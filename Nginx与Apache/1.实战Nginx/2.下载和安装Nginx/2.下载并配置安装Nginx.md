下载并配置安装Nginx
=========================================================

Nginx官网：[http://nginx.org/](http://nginx.org/)。我们从这里下载最新的，稳定的源代码安装包。
当前最新的stable版本为	nginx-1.11.2：	nginx-1.11.2.tar.gz。

### 下载并解压
```powershell
$ mkdir nginx && cd nginx
$ curl -O http://nginx.org/download/nginx-1.11.2.tar.gz
$ tar zxvf nginx-1.11.2.tar.gz
```
在用户home目录创建文件夹来存储下载并解压的Nginx文件。

### 配置选项
现在，为了适应操作系统，为了获得二进制的运行，要对Nginx进行 **编译配置处理**。创建一个应用程序通常分为三步：
从源代码到配置，编译和安装编译。配置步骤允许你选择许多选项，这些选项在完成程序的建立安装后不可编辑，
因此它直接影响该项目的二进制文件。所以，这一步非常重要，如果想在后来避免意外，必须仔细。

**该过程是添加某些开关选项（switch）到配置（configure）脚本**，该脚本本来就在源代码安装包中，
在下面的内容中我们将了解到，**可以激活的开关选项有三种类型**。

#### 路径选项
在运行`configure`脚本命令的时候，可能开启一些 **开关选项**，例如，需要对Nginx各种组成成分指定目录或文件路径。
可以运行命令：
```powershell
$ ./configure --help
```
列出有效的开关变量，以便于安装选择。典型的做法是使用开关命令在命令行添加一些文本，例如，使用开关选项 --conf-path:
```powershell
$ ./configure --conf-path=/etc/nginx/nginx.conf
```
下表中，全部列出配置时的开关选项（**加星（＊）的可能是我比较常用的**）：

| 选项     | 用法     | 默认值      |
| :-----  | :------ | :-----------|
| --prefix=... | 指定安装Nginx的基础目录 | /usr/local/nginx, 注意：如果你在配置时使用了相对路径，则连接到基础目录。示例：指定--conf-path=conf/nginx.conf 则配置文件会在目录：/usr/local/nginx/conf/nginx.conf
| --sbin-path=... | Nginx二进制文件安装的路径 | <prefix>/sbin/nginx |
| **--conf-path=...** | 主要配置文件放置目录 | <prefix>/conf/nginx.conf |
| --error-log-path=...| 错误日志存放的路径。错误日志在配置文件中须配置得非常正确，该路径只应用于你在配置文件中没有指定任何错误的日志指令时 | <prefix>/logs/error.log |
| --pid-path=... | 指定Nginx的pid文件的路径。可以在配置文件中指定pid文件的路径，如果没有具体的指定，则使用在这里对该选项指定的该路径 | <prefix>/logs/nginx.pid。注意：该pid文件是一个简单的文本文件，它包含进程的标识符。该文件应该放置在一个清晰可见的位置，以便其他应用程序能够很容易找到运行该程序的pid |
| --lock-path=...| 锁文件（lock file）的存放路径。同样，该文件也可以在配置文件中指定，但是，如果在配置文件中没有指定，则使用该值 | <prefix>/logs/nginx.lock，注意：锁文件允许其他应用程序确定是否一个程序在运行，就Nginx来说，它用于确定该进程没有被启动两次 |
| --with-perl_modules_path=...| 定义Perl模块的路径。如果需要包含另外的Perl模块，必须定义该参数 | |
| --with-perl=...| Perl二进制文件的路径。用于执行Perl脚本。如果想执行一个Perl脚本，必须设置该路径 | |
| --http-log-path=...| 定义被访问文件的日志文件存放路径。该路径只用于在配置文件中没有定义访问日志的情况 | <prefix>/logs/access.log |
| --http-client-body-temp-path=...| 该目录用于存储客户端请求产生的临时文件 | <prefix>/client_body_temp |
| --http-proxy-temp-path=...| 该目录用于代理存储临时文件 | <prefix>/proxy_temp |
| --http-fastcgi-temp-path=... | 指定用于HTTP FastCGI模块使用的临时文件的存放路径 | <prefix>/fastcgi_temp |
| --builddir=... | 指定创建应用程序的位置 | |
