正确安装并启动Redis（Linux）
====================================================================
### Linux中安装Redis
`Redis`能够兼容绝大部分的`POSIX`系统，例如`Linux`、`OS X`、`OpenBSD`、`NetBSD`和`FreeBSD`，
其中比较典型的是`Linux`操作系统（例如`CentOS`、`Redhat`、`Ubuntu`、`Debian`、`OS X`等）。
在`Linux`安装软件通常有两种方法，第一种是通过各个操作系统的软件管理软件进行安装，例如`CentOS`有`yum`
管理工具，`Ubuntu`有`apt`。但是由于`Redis`的更新速度相对较快，而这些管理工具不一定能更新到最新版本，
同时前面提到`Redis`的安装本身不是很复杂，**所以一般推荐使用第二种方式：源码的方式进行安装**，整个安装
只需以下六步即可完成。
```shell
$ curl -O http://download.redis.io/releases/redis-3.2.11.tar.gz             #1
$ tar xzvf redis-3.2.11.tar.gz                                              #2
ln -s redis-3.2.11/ redis                                                   #3
$ cd redis                                                                  #4
$ make                                                                      #5
$ make install                                                              #6
```
+ 下载`Redis`指定版本的源码压缩包到当前目录。
+ 解压缩`Redis`源码压缩包。
+ 建立一个`redis`目录的软连接，指向`redis-3.2.11`。
+ 进入`redis`目录。
+ 编译（编译之前确保操作系统已经安装`gcc`）。
+ 安装。

这里有两点要注意：第一，第`3`步中 **建立了一个`redis`目录的软链接，这样做是为了不把`redis`目录固定在指定版本上，
有利于`Redis`未来版本升级，算是安装软件的一种好习惯**。第二，第`6`步中的安装是将`Redis`的相关运行文件放到
**`usr/local/bin/`**下，这样就可以在任意目录下执行`Redis`的命令。例如安装后，可以在任何目录执行`redis-cli -v`
查看`redis`的版本：
```shell
$ redis-cli -v
redis-cli 3.2.11
```

### 配置、启动、操作、关闭Redis
**`Redis`安装之后，`src`和`/usr/local/bin`目录下多了几个以`redis`开头可执行文件，我们称之为`Redis shell`**，
这些可执行文件可以做很多事情，例如可以启动和停止`Redis`、可以检测和修复`Redis`的持久化文件，还可以检测`Redis`的性能。

| 可执行文件 | 作用 |
|:----------|:----|
| **redis-server** | **启动Redis** |
| **redis-cli** | **Redis命令行客户端** |
| **redis-benchmark** | **Redis基准测试工具** |
| **redis-check-aof** | **Redis AOF持久化文件检测和修复工具** |
| **redis-check-dump** | **Redis RDB持久化文件检测和修复工具** |
| **redis-sentinel** | **启动Redis Sentinel** |

`Redis`持久化和`Redis Sentinel`分别在第5章和第9章才会涉及，`Redis`基准测试将在第3章介绍，所以本节只对
`redis-server`、`redis-cli`进行介绍。

#### 启动Redis
**有三种方法启动Redis：默认配置、运行配置、配置文件启动**。

##### 默认配置
这种方法会使用`Redis`的默认配置来启动，下面就是`redis-server`执行后输出的相关日志：
```shell
$ redis-server
```
```
4398:M 17 Oct 13:45:59.549 * Increased maximum number of open files to 10032 (it was originally set to 1024).
                _._                                                  
           _.-``__ ''-._                                             
      _.-``    `.  `_.  ''-._           Redis 3.2.11 (00000000/0) 64 bit
  .-`` .-```.  ```\/    _.,_ ''-._                                   
 (    '      ,       .-`  | `,    )     Running in standalone mode
 |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379
 |    `-._   `._    /     _.-'    |     PID: 4398
  `-._    `-._  `-./  _.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |           http://redis.io        
  `-._    `-._`-.__.-'_.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |                                  
  `-._    `-._`-.__.-'_.-'    _.-'                                   
      `-._    `-.__.-'    _.-'                                       
          `-._        _.-'                                           
              `-.__.-'                                               

4398:M 17 Oct 13:45:59.567 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
4398:M 17 Oct 13:45:59.567 # Server started, Redis version 3.2.11
4398:M 17 Oct 13:45:59.567 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
4398:M 17 Oct 13:45:59.568 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
4398:M 17 Oct 13:45:59.568 * The server is now ready to accept connections on port 6379
```