Cookie的规范介绍
=================================
目前有以下几种`Cookie`规范：
+ **Netscape cookie草案**：是最早的`cookie`规范，基于 **rfc2109** 。尽管这个规范与 **rc2109** 有较大的差别，
但是很多服务器都与之兼容。
+ **rfc2109规范**：它是`w3c`发布的第一个官方`cookie`规范。理论上讲，所有的服务器在处理`cookie`（版本1）时，
都要遵循此规范。遗憾的是，这个规范太严格了，以致很多服务器不正确的实施了该规范或仍在使用`Netscape`规范。
+ **rfc2965规范**：该规范定义了 **cookie版本2**，并说明了 **cookie版本1** 的不足。

`rfc2965`规范的使用，目前并不多。`rfc2109`规范相应要严格得多，在实际应用上，并不是所有的浏览器和Web服务器都严格遵守。
因此相比较而言，**Netscape cookie草案倒是一个比较简洁和被广泛支持的Cookie规范**，因此我们在这里以Netscape cookie草案为基础进行讨论。

根据Netscape cookie草案的描述，Cookie是Web服务器向用户的浏览器发送的一段ASCII码文本。一旦收到Cookie，
浏览器会把Cookie的信息片断以 **"名/值"对** （name-value pairs）的形式储存保存在本地。这以后，
每当向同一个Web服务器请求一个新的文档时，Web浏览器都会发送该站点以前存储在本地的Cookie。创建Cookie的最初目的是想让
Web服务器能够通过多个HTTP请求追踪客户。有些复杂的网络应用需要在不同的网页之间保持一致，它们需要这种 **会话状态的保持能力** 。

浏览器与Web服务器通过HTTP协议进行通讯，而Cookie就是 **保存在HTTP协议的请求或者应答头部**（在HTTP协议中，数据包括两部分，
一部分是头部，由一些名值对构成，用来描述要被传输数据的一些信息。一部分是主体（body），是真正的数据（如HTML页面等））中进行传送的。

### Set-Cookie
在HTML文档被发送之前，Web服务器通过传送HTTP包头中的 **Set-Cookie** 消息把一个cookie发送到用户的浏览器中。
下面是一个 **遵循Netscape cookie草案的完整的Set-Cookie头**：
```
Set-Cookie:customer=huangxp;path=/foo;domain=.ibm.com;
expires=Wednesday,19-OCT-05 23:12:40 GMT;[secure]
```
**Set-Cookie** 的每个属性解释如下：
+ **Customer=huangxp** ：一个"名称＝值"对，把名称customer设置为值"huangxp"，**这个属性在Cookie中必须有** 。
+ **path=/foo**：控制哪些访问能够触发cookie的发送。**如果没有指定path，cookie会在所有对此站点的HTTP传送时发送** 。
如果`path=/directory`，只有访问`/directory`下面的网页时，cookie才被发送。在这个例子中，用户在访问目录/foo下的内容时，
浏览器将发送此cookie。如果指定了path，但是path与当前访问的url不符，则此cookie将被忽略。
+ **domain=.ibm.com**：指定cookie被发送到哪台计算机上。正常情况下，cookie只被送回最初向用户发送cookie的计算机。
在这个例子中，cookie会被发送到任何在 **.ibm.com域** 中的主机。**如果domain被设为空，domain就被设置为和提供cookie的Web服务器相同** 。
如果domain不为空，并且它的值又和提供cookie的Web服务器域名不符，这个Cookie将被忽略。
+ **expires=Wednesday,19-OCT-05 23:12:40 GMT**：指定cookie失效的时间。如果没有指定失效时间，这个cookie 就不会被写入计算机的硬盘上，并且只持续到这次会话结束。
+ **secure**：如果secure这个词被作为Set-Cookie头的一部分，那么cookie **只能通过安全通道传输** （目前即SSL通道）。
否则，浏览器将忽略此Cookie。
