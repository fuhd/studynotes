集群架构
===================================================================================
在专门讲述Hive之前，首先需要快速了解集群设计，并且在构建和扩展Hadoop集群时设定一些性能预期和通用
实践。这里我们将从高层视角来介绍如何设计集群。

构建集群需要确定在哪些节点上放置哪些组件。在何处安装服务非常关键，因为它既会影响集群的可用性，也会
影响集群的性能。通常，**管理员会将集群服务器划分为3个类别：主服务器、边缘服务器和工作服务器。主服务
器包含所有被认为对集群的健康状况至关重要的组件，通常涉及需要高可用性的组件。工作服务器包含了所有易
被替换或者停机时不必担心数据丢失的集群服务**。下面是希望在常见集群中主节点上提供的服务示例：
+ NameNode
+ JobTracker 
+ ResourceManager
+ Secondary NameNode
+ HBase Master、HiveServer2
+ Ooize Server 
+ Zookeeper 
+ Storm Server 
+ WebHCat Server 

Hadoop厂商习惯于将集群划分成3种类型：小型、中型和大型。一般来说，**小型集群通常少于32个节点，中型
集群的节点数介32～150，而大型集群的节点数则通常超过150**。另一种常见的设计模板是要看你的集群适用单
个机架还是多个机架。**小型集群适用单个机架，而中型和大型集群则要跨多个机架**。
```
注意

Hadoop并不要求采用主流厂商的硬件。你可以到最近的维修点或本地二手市场购买你所能找到的最便宜的机器，尽管获准在你的数据中
心安装这样的机器可能会有点困难。请记住，虽然Hadoop在吹嘘其弹性，但是主服务器仍然是SPOF（单点故障），这一点需要适当考虑。
```
**Hive客户端安装在所有工作节点上**。在与Hive交互时，你很可能会通过类似于Ambari或Hue这样的Web门
户访问它。这些服务器往往安装在边缘节点上。边缘节点的资源较少，也没有主服务器组件。请记住，这些节点
可能含有像其他关系数据库系统一样需要备份的元数据存储。**你可以将边缘节点看作管理服务器甚至Web服务
器。边缘节点可能含有一些操作软件（例如Ambari、MCS或Cloudera Manager）以及Pig或Hive等客户端组件。
它们也可能被用作防火墙，例如Apache Knox这样的情况。关键在于，边缘节点往往是小型服务器，它们的主要
用途是充当客户端进入大型Hadoop基础设施的网关**。由于可能出现大量应用程序记录日志，你也可能仍然希
望提供具有相当存储量的边缘节点。






