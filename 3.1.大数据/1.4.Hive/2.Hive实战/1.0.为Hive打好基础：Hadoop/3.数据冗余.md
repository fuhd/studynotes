数据冗余
===================================================================================
**大规模的数据也必须是高可用的**。Hadoop以高效且廉价的方式存储数据。Hadoop软件架构内置了一些机制，
允许我们采用廉价的硬件。**正如Google公司在其论文中所说的，最初的设计假定节点会发生故障**。当集群水
平扩展到数百、数千甚至数万个节点时，我们别无选择，只能假定在任意给定时间集群中都会有少量服务器出现
故障。

目前已有的高可用性解决方案在满足他们的需求时，不可避免地会使公司陷入硬件成本、软件成本和维护成本的
深渊中。为了满足他们的需求，有些事情必须改变。**Hadoop成了解决这一问题的方案，但是首先我们需要了解
为什么现有工具无法成为解决方案**。

## 1. 传统的高可用性
当我们想到冗余的时候，通常都会想到高可用性（HA）。**高可用性是一种架构，它描述了你访问环境的频次。
我们通常用“9”的形式来度量高可用性**。我们可以说自己的运行时间是99.999，也就是五个九。见下表：

| 可用率 | 每年停机时间 | 每月停机时间 | 每周停机时间 |
|:--------|:-----------------|:-------------------|:-------------------|
| 99.999% （五个九）| 5.26分 | 25.9秒 | 6.05秒 |
| 99.9999%（六个九）|31.5秒 | 2.59秒 | 0.605秒 |
|99.99999%（七个九）| 3.15秒| 0.259秒 | 0.0605秒 |

**成本通常与正常运行时间成比例。正常运行时间越多意味着成本越高**。尽管有少量解决方案也依赖于软件，
**但是大多数高可用性解决方案都聚焦于硬件**。大多数解决方案的理念都是采用一组被动系统，以备在主系统
出现故障时使用。大多数集群基础设施都采用这种模式。你可能有一个主节点和任意数量的副节点，其中含有复
制的应用程序二进制文件以及用于集群的特定软件。一旦主节点发生故障，副节点就会马上接管。
```
注意

你可以选择建立一个双活式集群，这其中的两个系统都在用。从资源的视角来看，你的成本仍然很高，因为当出现故障之后，你可能需
要解决两个系统的应用程序在同一台服务器上运行的问题。
```
这种模式的成本会很高。**集群需要共享存储架构，通常由一个SAN基础设施提供服务**。SAN可以存储大规模
数据，但是其建设和维护成本很高。**SAN独立于服务器存在，因此数据需要通过网络接口进行传输**。而且，
SAN将随机IO和顺序IO混合在一起，这意味着所有的IO都是随机的。最后，**管理员将大多数集群配置为活动/被
动式**。处于被动待命状态的服务器一直不被使用，直到出现故障为止。在这种情况下，**硬件成本会加倍，但
是可用资源却不会加倍**。

```
SAN英文全称：Storage Area Network，即存储区域网络。它是一种通过光纤集线器、光纤路由器、光纤交换机等连接设备将磁盘阵列、
磁带等存储设备与相关服务器连接起来的高速专用子网。
```

