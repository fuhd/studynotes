Oozie快速入门
================================================================================
## 1.构建Oozie

### 1.1.系统要求
+ Unix机箱（在Mac OS X和Linux上测试）
+ Java JDK 1.8+
+ Maven 3.0.1+
+ Hadoop 2.6.0+
+ Pig 0.10.1+

JDK命令（java，javac）必须位于命令路径中；Maven命令（mvn）必须位于命令路径中。

### 1.2.构建Oozie
从[Oozie站点](oozie.apache.org/)的“Releases”下拉菜单下载Oozie的源代码。然后，解压缩源代码
压缩包，并进入解压目录中执行如下命令：
```shell 
$ bin/mkdistro.sh [-DskipTests]
```
运行`mkdistro.sh`将创建Oozie的二进制分发文件。**默认情况下，oozie war不包含hadoop和
hcatalog库，但oozie工作需要它们**。添加这些库有两个选项：
1. 在安装时，将hadoop和hcatalog库复制到libext并运行`oozie-setup.sh`来设置Oozie。当需要在
具有不同hadoop/hcatalog版本的多个设置中使用相同的oozie包时，这是合适的。
2. 使用`-Puber`构建，它将在oozie var中捆绑所需的库。此外，以下选项可用于自定义依赖项的版本：
    ```
    -Dhadoop.version=<version> - default 2.6.0
    -Ptez - Bundle tez jars in hive and pig sharelibs. Useful if you want to use tez
    +as the execution engine for those applications.
    -Dpig.version=<version> - default 0.16.0
    -Dpig.classifier=<classifier> - default h2
    -Dsqoop.version=<version> - default 1.4.3
    -Dsqoop.classifier=<classifier> - default hadoop100
    -Djetty.version=<version> - default 9.3.20.v20170531
    -Dopenjpa.version=<version> - default 2.2.2
    -Dxerces.version=<version> - default 2.10.0
    -Dcurator.version=<version> - default 2.5.0
    -Dhive.version=<version - default 1.2.0
    -Dhbase.version=<version> - default 1.2.3
    -Dtez.version=<version> - default 0.8.4

    重要提示：如果针对Hadoop 3构建，必须激活配置文件hadoop-3
    ```

## 2.服务安装

### 2.1.系统要求
+ Unix机箱（在Mac OS X和Linux上测试）
+ Java JDK 1.8+
+ Hadoop
    - Apache Hadoop (用1.2.1和2.6.0+测试)
+ ExtJS库（可选，启用Oozie webconsole）
    - ExtJS 2.2

Java 1.8+ bin目录应位于命令路径中。

### 2.2.服务安装
**重要提示**：Oozie忽略 *`OOZIE_HOME`* 的任何设定值，Oozie自动计算其home目录。
+ 构建Oozie二进制分发版
+ 下载Hadoop二进制发行版
+ 下载ExtJS库（必须是2.2版）

**注意**：ExtJS库未与Oozie捆绑在一起，因为它使用不同的许可证。

**注意**：Oozie UI浏览器兼容性Chrome（全部），Firefox（3.5），Internet Explorer（8.0），
Opera（10.5）。

**注意**：建议将Oozie Unix用户用于Oozie服务。

解压Oozie发行版tar.gz。

解压Hadoop发行版tar.gz（作为Oozie Unix用户）。

**注意**：为Oozie进程配置带有proxyuser的Hadoop集群。

Hadoop **core-site.xml中需要以下两个属性**：
```xml
<!-- OOZIE -->
<property>
    <name>hadoop.proxyuser.[OOZIE_SERVER_USER].hosts</name>
    <value>[OOZIE_SERVER_HOSTNAME]</value>
  </property>
  <property>
    <name>hadoop.proxyuser.[OOZIE_SERVER_USER].groups</name>
    <value>[USER_GROUPS_THAT_ALLOW_IMPERSONATION]</value>
</property>
```
用特定值替换大写字母部分，然后重新启动Hadoop。

ExtJS库是可选的（只有Oozie Web控制台才能工作）

**重要提示**：所有Oozie服务器脚本（`oozie-setup.sh`，`oozied.sh`，`oozie-start.sh`，
`oozie-run.sh`和`oozie-stop.sh`）仅在拥有Oozie安装目录的Unix用户下运行，如有必要在调用脚本
时使用**`sudo -u OOZIE_USER`**。