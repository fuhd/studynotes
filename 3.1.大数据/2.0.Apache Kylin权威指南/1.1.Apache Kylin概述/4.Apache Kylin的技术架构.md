Apache Kylin的技术架构
================================================================================
Apache Kylin系统可以分为 **在线查询** 和 **离线构建** 两部分，在线查询的模块主要处于上半区，
而离线构建则处于下半区。

![Kylin的技术架构](img/2.png)

我们首先来看看离线构建的部分。数据源在左侧，目前主要是Hadoop Hive，保存着待分析的用户数据。根据
元数据的定义，下方构建引擎从数据源抽取数据，并构建Cube。**数据以关系表的形式输入，且必须符合星形
模型（Star Schema）**（更复杂的 **雪花模型** 在成文时还不被支持，可以用视图将雪花模型转化为星
形模型，再使用Kylin）。**MapReduce是当前主要的构建技术**。构建后的Cube保存在右侧的存储引擎中，
一般选用 **HBase** 作为存储。

完成了离线构建之后，用户可以从上方查询系统发送SQL进行查询分析。Kylin提供了各种 **Rest API、
JDBC/ODBC接口**。无论从哪个接口进入，SQL最终都会来到Rest服务层，再转交给查询引擎进行处理。这里
需要注意的是，**SQL语句是基于数据源的关系模型书写的，而不是Cube。Kylin在设计时刻意对查询用户屏
蔽了Cube的概念**，分析师只需要理解简单的关系模型就可以使用Kylin，没有额外的学习门槛，传统的SQL
应用也很容易迁移。**查询引擎解析SQL，生成基于关系表的逻辑执行计划，然后将其转译为基于Cube的物理
执行计划，最后查询预计算生成的Cube并产生结果**。整个过程不会访问原始数据源。






































dd
