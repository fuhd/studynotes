Sqoop Server安装与配置
=================================================================================
Sqoop安装包包含两部分：**client**与 **server**。
+ **Server**：你需要在Hadoop集群的单个节点上安装服务端，此节点将作为所有Sqoop客户端的入口。
+ **Client**：客户端可以安装在任意数量的机器上。

将Sqoop安装包复制到你想要运行Sqoop服务器的机器上。**Sqoop服务器作为Hadoop客户端，因此Hadoop库（
Yarn，MapReduce和HDFS jar文件）和配置文件（core-site.xml，mapred-site.xml，...）必须在此
节点上可用**。

你应该确认Hadoop可用：
```shell
su - hadoop
$ hadoop fs -ls /
```

### Hadoop依赖
**Sqoop服务端** 需要以下 **环境变量** 指向Hadoop库———— **$HADOOP_COMMON_HOME，$HADOOP_HDFS_HOME，
$HADOOP_MAPRED_HOME和$HADOOP_YARN_HOME**，你要确保这些变量已定义并指向有效的Hadoop安装。如果
找不到Hadoop库,Sqoop服务端将无法启动。

Sqoop服务端使用环境变量来查找Hadoop库。**如果设置了环境变量$HADOOP_HOME**，Sqoop将在以下位置查找jar：
**$HADOOP_HOME/share/hadoop/common，$HADOOP_HOME/share/hadoop/hdfs，$HADOOP_HOME/share/hadoop/mapreduce
和$HADOOP_HOME/share/hadoop/yarn**。你可以指定Sqoop服务端在$HADOOP_COMMON_HOME，$HADOOP_HDFS_HOME，
$HADOOP_MAPRED_HOME和$HADOOP_YARN_HOME环境变量中查找common、hdfs、mapreduce和yarn的jar包。
```shell
# 设置A
export HADOOP_HOME=/...

# 设置B，与A二选一
export HADOOP_COMMON_HOME=/...
export HADOOP_HDFS_HOME=/...
export HADOOP_MAPRED_HOME=/...
export HADOOP_YARN_HOME=/...
```
```
注意：
如果设置了环境变量$HADOOP_HOME，Sqoop将使用以下位置：
  $HADOOP_HOME/share/hadoop/common
  $HADOOP_HOME/share/hadoop/hdfs
  $HADOOP_HOME/share/hadoop/mapreduce
  $HADOOP_HOME/share/Hadoop/yarn
```

### Hadoop配置
Sqoop服务端将需要 **模拟用户访问集群内外的HDFS和其他资源**，而不是作为开始交付作业的用户，也不是运
行服务器的用户。你需要将Hadoop配置为 **可通过代理用户** 访问系统。你需要在 **core-site.xml** 文件
中创建两个属性——**hadoop.proxyuser.$SERVER_USER.hosts** 和 **hadoop.proxyuser.$SERVER_USER.groups**，
其中 **$SERVER_USER是将运行Sqoop2服务的用户**。在大多数情况下，配置 **＊** 就足够了。



































ddd
