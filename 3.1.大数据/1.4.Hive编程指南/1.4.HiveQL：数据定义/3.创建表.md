创建表
================================================================================
**CREATE TABLE语句遵从SQL语法惯例**，但是Hive的这个语句中 **具有显蓍的功能扩展**，使其可以具
有更广泛的灵活性。例如，可以定义表的数据文件存储在什么位置、使用什么样的存储格式，等等。本节中，我
们会讨论其他一些在CREATE TABLE语句中可以使用到的选项，下面这个表结构适用于前面"集合数据类型"中所
声明的employees表：
```sql
CREATE TABLE IF NOT EXISTS mydb。employees(
    name          STRING COMMENT 'Employee name',
    salary        FLOAT COMMENT 'Employee salary',
    subordinates  ARRAY<STRING> COMMENT 'Names of subordinates',
    deductions    MAP<STRING,FLOAT> COMMENT 'Keys are deductions names, values are precentages',
    address       STRUCT<street:STRING, city:STRING, state:STRING, zip:INT> COMMENT 'Home address')
COMMENT 'Description of the table'
TBLPROPERTIES ('creator'='me', 'created_at'='2012-01-02 10:00:00')
LOCATION '/user/hive/warehouse/mydb.db/employees';
```
首先，我们可以注意到，**如果用户当前所处的数据库并非是目标数据库，那么用户是可以在表名前增加一个
数据库名来进行指定的**，也就是例子中的mydb。

**如果用户增加上可选项IF NOT EXITS，那么若表已经存在了，Hive就会忽略掉后面的执行语句，而且不会有
任何提示**。在那些第一次执行时需要创建表的脚本中，这么写是非常有用的。然而，这个语句还有一个用户
需要注意的问题。**如果用户所指定的表的模式和已经存在的这个表的模式不同的话，Hive不会为此做出提示**。
如果用户的意图是使这个表具有重新指定的那个新的模式的话，那么就需要先删除这个表，也就是丢弃之前的数据，
然后再重建这张表。用户可以考虑使用一个或多个 **ALTER TABLE** 语句来修改已民经存在的表的结构。
```
提示

如果用户使用了IF NOT EXISTS，而且这个已经存在的表和CREATE TABLE语句后指定的模式是不同的，Hive会忽略掉这个差异。
```
用户可以在字段类型后 **为每个字段增加一个注释**。和数据库一样，用户也可以 **为这个表本身添加一个
注释**，还可以 **自定义一个或多个表属性**。大多数情况下，**TBLPROPERTIES的主要作用是按键/值对
的格式为表增加额外的文档说明**。

Hive会 **自动增加** 两个表属性：一个是 **last_modified_by**，其保存着最后修改这个表的用户的
用户名；另一个一个是 **last_modified_time**，其保存着最后一次修改的新纪元时间秒。
```
提示：

SHOW TBLPROPERTIES table_name命令，用于列举出某个表的TBLPROPERTIES属性信息。
```
在这个例子中，我们使用的Hive将会使用的默认的路径 /user/hive/warehouse/mydb.db/employees。
其中，**/user/hive/warehouse是默认的“数据仓库”路径地址，mydb.db是数据库目录，employees是
表目录**。

**默认情况下，Hive总是将创建的表的目录放置在这个表所属的数据库目录之后。不过，default数据库是个
例外，其在/user/hive/warehouse下并没有对应一个数据库目录。因此default数据库中的表目录会直接位
于/user/hive/warehouse目录之后**。
```
提示：

为了避免潜在产生混淆的可能性，如果用户不想使用默认的表路径，那么最好是使用外部表。
```
用户还可以 **拷贝一张已经存在的表的表模式（而无需拷贝数据）**：
```sql  
CREATE TABLE IF NOT EXISTS mydb.employees2 LIKE mydb.employees；
```
这个版本还可以接受 **可选的LOCATION** 语句，但是注意 **其他的属性，包括模式，都是不可能重新定义
的，这些信息直接从原始表获得**。

**SHOW TABLES命令可以列举出所有的表。如果不增加其他参数，那么只会显示当前工作数据库下的表**。
```sql
hive> USE mydb;

hive> SHOW TABLES;
employees2
table1
table2
```
即使我们 **不在那个数据库下，我们还是可以列举指定数据库下的表** 的：
```sql
hive＞ USE default；

hive＞ SHOW TABLES IN mydb；
employees
table1
table2
```














































ddd
