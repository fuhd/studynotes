Oozie工作流程概述
===================================================================================
Oozie是一个基于服务器的工作流引擎，专门用于运行工作流作业，其中包含运行Hadoop Map/Reduce和Pig
作业的操作。

Oozie是一个在Java servlet容器中运行的Java Web应用程序。

出于Oozie的目的，工作流是 **在控制依赖性DAG（有向无环图）中排列的动作集合**（即，Hadoop Map/Reduce
作业，Pig作业）。从一个动作到另一个动作的“控制依赖性”意味着第二个动作在第一个动作完成之前无法运行。

Oozie工作流定义用 **hPDL**（类似于JBOSS JBPM jPDL的XML过程定义语言）编写。

Oozie工作流操作在远程系统（即Hadoop，Pig）中启动作业。**在操作完成后，远程系统回调Oozie以通知
操作完成**，此时Oozie继续执行工作流中的下一个操作。

Oozie工作流包含 **控制流节点** 和 **动作节点**。

**控制流节点定义工作流的开始和结束（`start`，`end`和`fail`节点），并提供控制工作流执行路径（`decision`，
`fork`和`join`节点）的机制**。

动作节点是工作流 *触发计算/处理任务* 执行的机制。Oozie为不同类型的操作提供支持：**Hadoop map-reduce，
Hadoop文件系统，Pig，SSH，HTTP，eMail和Oozie子工作流**。Oozie可以扩展为支持其他类型的操作。

**可以参数化Oozie工作流程（使用工作流定义中的`${inputDir}`等变量）**。提交工作流时，必须提供
参数值。如果正确参数化（即使用不同的输出目录），则可以同时执行几个相同的工作流作业。

## WordCount工作流示例
工作流程图：

![WordCount工作流程图](img/1.png)

hPDL工作流程定义：
```xml
<workflow-app name='wordcount-wf' xmlns="uri:oozie:workflow:0.1">
    <start to='wordcount'/>
    <action name='wordcount'>
        <map-reduce>
            <job-tracker>${jobTracker}</job-tracker>
            <name-node>${nameNode}</name-node>
            <configuration>
                <property>
                    <name>mapred.mapper.class</name>
                    <value>org.myorg.WordCount.Map</value>
                </property>
                <property>
                    <name>mapred.reducer.class</name>
                    <value>org.myorg.WordCount.Reduce</value>
                </property>
                <property>
                    <name>mapred.input.dir</name>
                    <value>${inputDir}</value>
                </property>
                <property>
                    <name>mapred.output.dir</name>
                    <value>${outputDir}</value>
                </property>
            </configuration>
        </map-reduce>
        <ok to='end'/>
        <error to='end'/>
    </action>
    <kill name='kill'>
        <message>Something went wrong: ${wf:errorCode('wordcount')}</message>
    </kill/>
    <end name='end'/>
</workflow-app>
```