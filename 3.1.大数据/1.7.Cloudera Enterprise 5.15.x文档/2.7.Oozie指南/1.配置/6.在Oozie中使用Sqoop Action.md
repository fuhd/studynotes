在Oozie中使用Sqoop Action
================================================================================
Sqoop1不附带第三方JDBC驱动程序。您必须单独下载它们并将它们保存到 **Oozie服务器** 上的 **/var/lib/sqoop/**
目录中。有关更多信息，请参阅 [使用命令行设置Apache Sqoop](https://www.cloudera.com/documentation/enterprise/latest/topics/cdh_ig_sqoop_installation.html#topic_13)。

## 建议
+ **Cloudera建议您不要将Sqoop CLI命令与Oozie Shell Action一起使用**。此类部署不可靠，并且在
升级和配置更改期间容易中断。
+ 要将数据导入Hive，请使用Sqoop Action和Hive2 Action的组合。
    - Sqoop Action简单地将数据摄入HDFS。
    - Hive2 Action将数据从HDFS加载到Hive中。

## 部署和配置Oozie Sqoop1操作JDBC驱动程序
在开始此过程之前，请确认 **/var/lib/sqoop** 中存在Sqoop1 **JDBC驱动程序**。SSH到Oozie服务器主
机并执行以下命令在HDFS上部署和配置驱动程序：
```shell
$ cd /var/lib/sqoop
$ sudo -u hdfs hdfs dfs -mkdir /user/oozie/libext
$ sudo -u hdfs hdfs dfs -chown oozie:oozie /user/oozie/libext
$ sudo -u hdfs hdfs dfs -put /opt/cloudera/parcels/SQOOP_NETEZZA_CONNECTOR/sqoop-nz-connector*.jar /user/oozie/libext/
$ sudo -u hdfs hdfs dfs -put /opt/cloudera/parcels/SQOOP_TERADATA_CONNECTOR/lib/*.jar /user/oozie/libext/
$ sudo -u hdfs hdfs dfs -put /opt/cloudera/parcels/SQOOP_TERADATA_CONNECTOR/sqoop-connector-teradata*.jar /user/oozie/libext/
$ sudo -u hdfs hdfs dfs -put /var/lib/sqoop/*.jar /user/oozie/libext/
$ sudo -u hdfs hdfs dfs -chown oozie:oozie /user/oozie/libext/*.jar
$ sudo -u hdfs hdfs dfs -chmod 755 /user/oozie/libext/*.jar

$ sudo -u hdfs hdfs dfs -ls /user/oozie/libext
```
```
-rwxr-xr-x   3 oozie oozie     959987 2016-05-29 09:58 /user/oozie/libext/mysql-connector-java.jar
-rwxr-xr-x   3 oozie oozie     358437 2016-05-29 09:58 /user/oozie/libext/nzjdbc3.jar
-rwxr-xr-x   3 oozie oozie    2739670 2016-05-29 09:58 /user/oozie/libext/ojdbc6.jar
-rwxr-xr-x   3 oozie oozie    3973162 2016-05-29 09:58 /user/oozie/libext/sqoop-connector-teradata-1.5c5.jar
-rwxr-xr-x   3 oozie oozie      41691 2016-05-29 09:58 /user/oozie/libext/sqoop-nz-connector-1.3c5.jar
-rwxr-xr-x   3 oozie oozie       2405 2016-05-29 09:58 /user/oozie/libext/tdgssconfig.jar
-rwxr-xr-x   3 oozie oozie     873860 2016-05-29 09:58 /user/oozie/libext/terajdbc4.jar
```

## 配置Oozie Sqoop1操作工作流JDBC驱动程序
使用以下步骤配置Oozie Sqoop1操作工作流：
1. 确认HDFS中存在Sqoop1 JDBC驱动程序。为此，请通过SSH连接到Oozie Server主机并运行以下命令：
    ```shell
    $ sudo -u hdfs hdfs dfs -ls /user/oozie/libext
    ```
2. 在Oozie的job.properties文件中配置以下Oozie Sqoop1 Action工作流变量，如下所示：
    ```
    oozie.use.system.libpath = true
    oozie.libpath = /user/oozie/libext
    ```
