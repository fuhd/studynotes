CDH 5和Cloudera Manager 5要求和支持的版本
================================================================================
在企业数据中心，Cloudera Manager和CDH与Apache Accumulo，Apache Impala，Hue，Cloudera Search
和Cloudera Navigator等产品进行交互。本指南提供了有关CDH和Cloudera Manager的哪个发行版本支持产品的
哪些主要版本和次要版本的信息。

必须考虑不同版本的Cloudera Manager和CDH之间的兼容性，特别是在执行安装/升级过程时。

不同的Cloudera Manager和CDH版本的JDK兼容性也不同。某些版本的CDH5与JDK7和JDK8兼容。在这种情况下，请
确保您的所有服务都部署在相同的主要版本上。例如，在JDK7上运行Sqoop时，不应该在JDK7上运行Hadoop。此外，
由于Cloudera不支持混合环境，因此群集中的所有节点都必须运行相同的主要JDK版本。Cloudera仅支持Oracle提供
的JDK。

安装每个实体后，升级到最新的修补程序版本并应用任何其他适当的更新。可用更新可能特定于安装它的操作系统。例如，
如果你在你的环境中使用CentOS，你可以选择6作为主要版本，4作为次要版本，以表明你正在使用CentOS 6.4。安装
此操作系统后，应用所有相关的CentOS 6.4升级和补丁。在某些情况下，例如某些浏览器，可能不会列出次要版本。

## 1.Cloudera Manager的CDH要求
Cloudera使用以下版本约定：major.minor.maintenance。如果群集运行Cloudera Manager5.14.0，则主版本为5;
次要版本是14; 维护版本为0。

**Cloudera Manager次要版本必须始终等于或大于CDH次要版本**。较早版本的Cloudera Manager可能不支持较新
版本的CDH中的功能。

例如，Cloudera Manager5.12.0可以管理CDH5.12.2，因为次要版本是相同的。Cloudera Manager5.12.0无法管
理CDH5.14.0，因为Cloudera Manager次要版本12小于CDH次要版本14。

## 2.CDH和Cloudera Manager支持的操作系统
这里，我们只列出 **Cloudera Manager5.15.x与CDH5.15.x支持的操作系统**：

| 操作系统 | 版本 |
| :------------- | :------------- |
| RHEL/CentOS/Oracle Linux RHCK | 7.5, 7.4, 7.3, 7.2, 7.1, 6.9 , 6.8, 6.7, 6.6, 6.5, 6.4, 5.11, 5.10, 5.7 |
| Oracle Linux (OL) | 7.4, 7.3, 7.2, 7.1 (UEK default), 6.9, 6.8 (UEK R2, R4), 6.7, 6.6, 6.5 (UEK R2, R3), 6.4 (UEK R2), 5.11, 5.10, 5.7 (UEK R2) |
| SLES | 12 SP3, 12 SP2, 12 SP1, 11 SP4, 11 SP3 |
| Ubuntu | 16.04 LTS (Xenial), 14.04 LTS (Trusty), 12.04 LTS (Precise) |
| Debian | 8.9, 8.4, 8.2 (Jessie), 7.8, 7.1, 7.0 (Wheezy) |

## 3.文件系统要求

### 3.1.支持的文件系统
Hadoop分布式文件系统（HDFS）旨在运行在操作系统底层文件系统之上。Cloudera建议您使用在受支持的操作系统
上测试的以下任一文件系统：
+ **ext3**：这是HDFS测试最多的底层文件系统。
+ **ext4**：更新的Linux版本支持ext3的可扩展扩展。
    ```
    重要提示：Cloudera不支持从ext3到ext4的就地升级。Cloudera建议您将磁盘格式化为ext4，然后再将它们用作数据目录。
    ```
+ **XFS**：这是RHEL7中的默认文件系统。

**Kudu文件系统要求** - **Kudu在ext4和XFS上受支持**。Kudu需要支持hole punching的内核版本和文件系统。
Hole punching是使用FALLOC_FL_PUNCH_HOLE选项集使用fallocate（2）系统调用。有关更多详细信息，请参阅
Kudu故障排除 - During Hole Punch测试过程中的错误。

### 3.2.文件访问时间
Linux文件系统保留了每个文件被访问时记录的元数据。这意味着 **即使读取结果也会写入磁盘**。为加快文件读取速度，
**Cloudera建议您使用 /etc/fstab 中的挂载选项禁用此选项，称为atime**：
```shell
/dev/sdb1 /data1 ext4 defaults,noatime 0
```
应用更改而不重新启动：
```shell
mount -o remount /data1
```

### 3.3.文件系统安装选项
文件系统安装选项有一个同步选项，允许您同步写入。

但是，**使用sync选项会导致将数据写入磁盘的服务（如HDFS，YARN，Kafka和Kudu）的性能较差。在CDH中，
大部分写入已经被复制。因此，对磁盘进行同步写入是不必要的，而且价格昂贵，不值得提供更高的安全性**。

**NFS和NAS选项不能用作DataNode数据目录安装，即使使用分层存储功能也不行**。

## 4.CDH和Cloudera Manager支持的数据库
**Cloudera Manager和CDH与嵌入式PostgreSQL数据库一起打包，用于非生产环境。生产环境中不支持嵌入式
PostgreSQL数据库。对于生产环境，您必须将群集配置为使用外部数据库**。

在大多数情况下（但不是全部），Cloudera支持本机适用于每个受支持Linux发行版的 **MariaDB，MySQL和
PostgreSQL版本**。

安装数据库后，升级到最新的修补程序并应用适当的更新。可用更新可能特定于安装它的操作系统。

注意：
+ **对所有自定义数据库使用UTF8编码**。
+ **对于MySQL5.6和5.7，您必须安装MySQL-shared-compat或MySQL共享软件包。这是Cloudera Manager Agent
软件包安装所必需的**。
+ **不支持基于MySQL GTID的复制**。
+ **Hue需要安装它的操作系统的默认MySQL/MariaDB版本（如果使用）。请参见Hue数据库**。
+ **支持社区版和企业版MySQL，以及AWS RDS服务配置的MySQL**。
```
重要提示：
重新启动进程时，将使用保存在Cloudera Manager数据库中的信息重新部署每个服务的配置。如果此信息不可用，您的群集无法启
动或正常工作。您必须安排并维护Cloudera Manager数据库的定期备份才能在发生此数据库丢失时恢复群集。有关更多信息，请参
阅备份数据库。
```

### 4.1.跨CM/CDH5版本的MySQL支持

| MySQL | Cloudera Manager/CDH 5.10 - 5.15 | Cloudera Manager/CDH 5.1 - 5.9 | Cloudera Manager/CDH 5.0 |
| :------------- | :------------- | :--------------- | :---------------- |
| 5.1 | Y | Y | Y |
| 5.5 | Y | Y | Y |
| 5.6 | Y | Y | N |
| 5.7 | Y | N | N |

### 4.2.跨CM/CDH5版本的MariaDB支持

| MariaDB | Cloudera Manager/CDH 5.9 - 5.15 | Cloudera Manager/CDH 5.5 - 5.8 |
| :------------- | :------------- | :------------ |
| 5.5 | Y | Y |
| 10.0 | Y | N |

**注：这里我们只列了CM/CDH5对MySQL与MariaDB的支持情况，其它很少用也就不列出了**。

## 5.CDH和Cloudera Manager支持的JDK版本
**仅支持来自Oracle的64位JDK。所有版本的Cloudera Manager5和CDH5均支持Oracle JDK7。Oracle JDK8
在C5.3.x和更高版本中受支持**。

任何Cloudera Manager或CDH版本均不支持Oracle JDK9。

除非特别排除，否则Cloudera支持稍后对引入支持的发行版中的主要JDK版本进行更新。例如，8u102在CDH5.9之前
发布，但在CDH5.3及更高版本中得到支持，因为在CDH5.3中添加了对JDK1.8的支持。当安全性受到危害时，Cloudera
排除或删除对选择Java更新的支持。

**不支持在不同JDK版本的同一集群中运行CDH节点**。跨集群的JDK发行版需要与修补程序级别匹配。

### 5.1.JDK 7
在Cloudera Manager/CDH 5.0中，所有JDK7更新(从最低要求版本)都得到支持，除非特别排除。支持但不测试未列
出的最小值以上的更新。

Cloudera Manager存储库包含Oracle JDK1.7.0_67（例如），并且可以在全新安装或升级期间自动安装。
```
警告:
由Apache Kafka提供的CDK 3.0和更高版本需要JDK 8，不支持JDK 7。
由Apache Spark驱动的CDS 2.2需要JDK 8，它可以安装在cdh5上。。
```
支持和测试的JDK7更新：

| JDK 7 | 全部支持C5.x |
| :------------- | :------------- |
| 1.7u80 | 推荐/测试过的最新版本 |
| 1.7u75 | 推荐 |
| 1.7u67 | 推荐 |
| 1.7u55 | 最低要求 |

### 5.2.JDK 8
**所有JDK8更新，从最低要求版本开始，都支持Cloudera Manager/CDH5.3或更高版本**，除非特别排除。支持但
不测试未列出的最小值以上的更新。
```
警告:
- JDK 8u40、8u45和8u60由于安全风险被排除在支持之外:基于web的UI组件(如HDFS、YARN、SOLR和Oozie)的HTTP身份验证可能失败。
- 对于CDH版本5.13.0和更高版本，Sentry需要一个具有JDK-8055949固定的Java版本。
- 由Apache Kafka提供的CDK 3.0和更高版本需要JDK8，不支持JDK7。
- JDK8u75受到支持，但有一个已知的问题:Oozie Web控制台在JDK8u75或更高的平台上运行Oozie服务器时返回500个错误。
- 由Apache Spark驱动的CDS2.2需要JDK8，它可以安装在cdh5上。
```








































dd
