CDH 5和Cloudera Manager 5要求和支持的版本
================================================================================
在企业数据中心，Cloudera Manager和CDH与Apache Accumulo，Apache Impala，Hue，Cloudera Search
和Cloudera Navigator等产品进行交互。本指南提供了有关CDH和Cloudera Manager的哪个发行版本支持产品的
哪些主要版本和次要版本的信息。

必须考虑不同版本的Cloudera Manager和CDH之间的兼容性，特别是在执行安装/升级过程时。

不同的Cloudera Manager和CDH版本的JDK兼容性也不同。某些版本的CDH5与JDK7和JDK8兼容。在这种情况下，请
确保您的所有服务都部署在相同的主要版本上。例如，在JDK7上运行Sqoop时，不应该在JDK7上运行Hadoop。此外，
由于Cloudera不支持混合环境，因此群集中的所有节点都必须运行相同的主要JDK版本。Cloudera仅支持Oracle提供
的JDK。

安装每个实体后，升级到最新的修补程序版本并应用任何其他适当的更新。可用更新可能特定于安装它的操作系统。例如，
如果你在你的环境中使用CentOS，你可以选择6作为主要版本，4作为次要版本，以表明你正在使用CentOS 6.4。安装
此操作系统后，应用所有相关的CentOS 6.4升级和补丁。在某些情况下，例如某些浏览器，可能不会列出次要版本。

## 1.Cloudera Manager的CDH要求
Cloudera使用以下版本约定：major.minor.maintenance。如果群集运行Cloudera Manager5.14.0，则主版本为5;
次要版本是14; 维护版本为0。

**Cloudera Manager次要版本必须始终等于或大于CDH次要版本**。较早版本的Cloudera Manager可能不支持较新
版本的CDH中的功能。

例如，Cloudera Manager5.12.0可以管理CDH5.12.2，因为次要版本是相同的。Cloudera Manager5.12.0无法管
理CDH5.14.0，因为Cloudera Manager次要版本12小于CDH次要版本14。

## 2.CDH和Cloudera Manager支持的操作系统
这里，我们只列出 **Cloudera Manager5.15.x与CDH5.15.x支持的操作系统**：

| 操作系统 | 版本 |
| :------------- | :------------- |
| RHEL/CentOS/Oracle Linux RHCK | 7.5, 7.4, 7.3, 7.2, 7.1, 6.9 , 6.8, 6.7, 6.6, 6.5, 6.4, 5.11, 5.10, 5.7 |
| Oracle Linux (OL) | 7.4, 7.3, 7.2, 7.1 (UEK default), 6.9, 6.8 (UEK R2, R4), 6.7, 6.6, 6.5 (UEK R2, R3), 6.4 (UEK R2), 5.11, 5.10, 5.7 (UEK R2) |
| SLES | 12 SP3, 12 SP2, 12 SP1, 11 SP4, 11 SP3 |
| Ubuntu | 16.04 LTS (Xenial), 14.04 LTS (Trusty), 12.04 LTS (Precise) |
| Debian | 8.9, 8.4, 8.2 (Jessie), 7.8, 7.1, 7.0 (Wheezy) |

## 3.文件系统要求

### 3.1.支持的文件系统
Hadoop分布式文件系统（HDFS）旨在运行在操作系统底层文件系统之上。Cloudera建议您使用在受支持的操作系统
上测试的以下任一文件系统：
+ **ext3**：这是HDFS测试最多的底层文件系统。
+ **ext4**：更新的Linux版本支持ext3的可扩展扩展。
    ```
    重要提示：Cloudera不支持从ext3到ext4的就地升级。Cloudera建议您将磁盘格式化为ext4，然后再将它们用作数据目录。
    ```
+ **XFS**：这是RHEL7中的默认文件系统。

**Kudu文件系统要求** - **Kudu在ext4和XFS上受支持**。Kudu需要支持hole punching的内核版本和文件系统。
Hole punching是使用FALLOC_FL_PUNCH_HOLE选项集使用fallocate（2）系统调用。有关更多详细信息，请参阅
Kudu故障排除 - During Hole Punch测试过程中的错误。

### 3.2.文件访问时间
Linux文件系统保留了每个文件被访问时记录的元数据。这意味着 **即使读取结果也会写入磁盘**。为加快文件读取速度，
**Cloudera建议您使用 /etc/fstab 中的挂载选项禁用此选项，称为atime**：
```shell
/dev/sdb1 /data1 ext4 defaults,noatime 0
```
应用更改而不重新启动：
```shell
mount -o remount /data1
```

### 3.3.文件系统安装选项
文件系统安装选项有一个同步选项，允许您同步写入。

但是，**使用sync选项会导致将数据写入磁盘的服务（如HDFS，YARN，Kafka和Kudu）的性能较差。在CDH中，
大部分写入已经被复制。因此，对磁盘进行同步写入是不必要的，而且价格昂贵，不值得提供更高的安全性**。

**NFS和NAS选项不能用作DataNode数据目录安装，即使使用分层存储功能也不行**。

## 4.CDH和Cloudera Manager支持的数据库
**Cloudera Manager和CDH与嵌入式PostgreSQL数据库一起打包，用于非生产环境。生产环境中不支持嵌入式
PostgreSQL数据库。对于生产环境，您必须将群集配置为使用外部数据库**。

在大多数情况下（但不是全部），Cloudera支持本机适用于每个受支持Linux发行版的 **MariaDB，MySQL和
PostgreSQL版本**。

安装数据库后，升级到最新的修补程序并应用适当的更新。可用更新可能特定于安装它的操作系统。

注意：
+ **对所有自定义数据库使用UTF8编码**。
+ **对于MySQL5.6和5.7，您必须安装MySQL-shared-compat或MySQL共享软件包。这是Cloudera Manager Agent
软件包安装所必需的**。
+ **不支持基于MySQL GTID的复制**。
+ **Hue需要安装它的操作系统的默认MySQL/MariaDB版本（如果使用）。请参见Hue数据库**。
+ **支持社区版和企业版MySQL，以及AWS RDS服务配置的MySQL**。
```
重要提示：
重新启动进程时，将使用保存在Cloudera Manager数据库中的信息重新部署每个服务的配置。如果此信息不可用，您的群集无法启
动或正常工作。您必须安排并维护Cloudera Manager数据库的定期备份才能在发生此数据库丢失时恢复群集。有关更多信息，请参
阅备份数据库。
```

### 4.1.跨CM/CDH5版本的MySQL支持

| MySQL | Cloudera Manager/CDH 5.10 - 5.15 | Cloudera Manager/CDH 5.1 - 5.9 | Cloudera Manager/CDH 5.0 |
| :------------- | :------------- | :--------------- | :---------------- |
| 5.1 | Y | Y | Y |
| 5.5 | Y | Y | Y |
| 5.6 | Y | Y | N |
| 5.7 | Y | N | N |

### 4.2.跨CM/CDH5版本的MariaDB支持

| MariaDB | Cloudera Manager/CDH 5.9 - 5.15 | Cloudera Manager/CDH 5.5 - 5.8 |
| :------------- | :------------- | :------------ |
| 5.5 | Y | Y |
| 10.0 | Y | N |

**注：这里我们只列了CM/CDH5对MySQL与MariaDB的支持情况，其它很少用也就不列出了**。

## 5.CDH和Cloudera Manager支持的JDK版本
**仅支持来自Oracle的64位JDK。所有版本的Cloudera Manager5和CDH5均支持Oracle JDK7。Oracle JDK8
在C5.3.x和更高版本中受支持**。

任何Cloudera Manager或CDH版本均不支持Oracle JDK9。

除非特别排除，否则Cloudera支持稍后对引入支持的发行版中的主要JDK版本进行更新。例如，8u102在CDH5.9之前
发布，但在CDH5.3及更高版本中得到支持，因为在CDH5.3中添加了对JDK1.8的支持。当安全性受到危害时，Cloudera
排除或删除对选择Java更新的支持。

**不支持在不同JDK版本的同一集群中运行CDH节点**。跨集群的JDK发行版需要与修补程序级别匹配。

### 5.1.JDK 7
在Cloudera Manager/CDH 5.0中，所有JDK7更新(从最低要求版本)都得到支持，除非特别排除。支持但不测试未列
出的最小值以上的更新。

Cloudera Manager存储库包含Oracle JDK1.7.0_67（例如），并且可以在全新安装或升级期间自动安装。
```
警告:
由Apache Kafka提供的CDK 3.0和更高版本需要JDK 8，不支持JDK 7。
由Apache Spark驱动的CDS 2.2需要JDK 8，它可以安装在cdh5上。。
```
支持和测试的JDK7更新：

| JDK 7 | 全部支持C5.x |
| :------------- | :------------- |
| 1.7u80 | 推荐/测试过的最新版本 |
| 1.7u75 | 推荐 |
| 1.7u67 | 推荐 |
| 1.7u55 | 最低要求 |

### 5.2.JDK 8
**所有JDK8更新，从最低要求版本开始，都支持Cloudera Manager/CDH5.3或更高版本**，除非特别排除。支持但
不测试未列出的最小值以上的更新。
```
警告:
- JDK 8u40、8u45和8u60由于安全风险被排除在支持之外:基于web的UI组件(如HDFS、YARN、SOLR和Oozie)的HTTP身份验证可能失败。
- 对于CDH版本5.13.0和更高版本，Sentry需要一个具有JDK-8055949固定的Java版本。
- 由Apache Kafka提供的CDK 3.0和更高版本需要JDK8，不支持JDK7。
- JDK8u75受到支持，但有一个已知的问题:Oozie Web控制台在JDK8u75或更高的平台上运行Oozie服务器时返回500个错误。
- 由Apache Spark驱动的CDS2.2需要JDK8，它可以安装在cdh5上。
```

JDK 8更新被支持和测试：

| JDK 8 | 支持C5.3及更高版本 |
| :------------- | :------------- |
| 1.8u162 | 推荐/测试的最新版本 |
| 1.8u144 | 推荐 |
| 1.8u131 | 推荐 |
| 1.8u121 | 推荐 |
| 1.8u111 | 推荐 |
| 1.8u102 | 推荐 |
| 1.8u91 | 推荐 |
| 1.8u74 | 推荐 |
| 1.8u31 | 最低要求 |

### 5.3.Java加密扩展(JCE)无限强度权限需求
如果您正在使用CentOS/Red Hat Enterprise Linux 5.6或更高版本或Ubuntu，您必须在所有集群主机(包括网关主机)
上安装Java加密扩展(JCE)无限制强度权限策略文件。这是为了确保JDK使用与Red Hat/CentOS操作系统、Kerberos和其
他CDH集群使用的相同的默认加密类型(aes256-cts)。

在托管部署中，Cloudera管理器可以在主机上安装JCE。对于非托管部署，请使用README中的安装说明。jce_policy.x.zip
中包含的txt文件。
+ [JCE for Java SE 7](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)
+ JDK 1.8.0_150(及以下)- [JCE for Java SE 8](http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html)

**为JDK 1.8.0_151（及更高版本）启用无限强度加密**。
+ 从 **JDK 1.8.0_151** 开始，可以使用java启用无限强度加密。JDK 1.8.0_151发布说明中记录的安全文件。
不需要安装JCE策略文件。
+ 从 **JDK 1.8.0_161** 开始，**默认情况下已经启用了无限制的强度加密**。不需要采取进一步行动。

## 6.Cloudera Manager支持的浏览器
用于安装、配置、管理和监视服务的Cloudera Manager管理控制台支持以下浏览器的最新版本:
+ Mozilla Firefox
+ Google Chrome
+ Internet Explorer
+ Safari

## 7.Hue支持的浏览器
Hue适用于最近的两个LTS（长期支持）或ESR（扩展支持版本）浏览器。**Cookie和JavaScript必须打开**。
+ Chrome
+ Firefox
+ Internet Explorer
+ Safari (Mac only)
+ Windows Edge

Hue可以显示在较旧的浏览器和其他浏览器中，但您可能无法访问其所有功能。
```
重要提示:要查看Hue Web UI中的所有图标，IE和HTTPS用户必须添加一个负载均衡器。
```

## 8.CDH和Cloudera Manager支持的传输层安全版本
传输层安全性(TLS)的指定版本支持以下组件:

| 组件 | 角色 | 名称 | 端口 | 版本 |
| :---- | :---- | :---- | :---- | :---- |
| Cloudera Manager | Cloudera Manager Server |  | 7182 | TLS 1.2 |
| Cloudera Manager | Cloudera Manager Server |  | 7183 | TLS 1.2 |
| Flume |  |  | 9099 | TLS 1.2 |
| Flume |  | Avro Source/Sink |  | TLS 1.2 |
| Flume |  | Flume HTTP Source/Sink |  | TLS 1.2 |
| HBase | Master | HBase Master Web UI Port | 60010 | TLS 1.2 |
| HDFS | NameNode | Secure NameNode Web UI Port | 50470 | TLS 1.2 |
| HDFS | Secondary NameNode | Secure Secondary NameNode Web UI Port | 50495 | TLS 1.2 |
| HDFS | HttpFS | REST Port | 14000 | TLS 1.1, TLS 1.2 |
| Hive | HiveServer2 | HiveServer2 Port | 10000 | TLS 1.2 |
| Hue | Hue Server | Hue HTTP Port | 8888 | TLS 1.2 |
| Impala | Impala Daemon | Impala Daemon Beeswax Port | 21000 | TLS 1.2 |
| Impala | Impala Daemon | Impala Daemon HiveServer2 Port | 21050 | TLS 1.2 |
| Impala | Impala Daemon | Impala Daemon Backend Port | 22000 | TLS 1.2 |
| Impala | Impala StateStore | StateStore Service Port | 24000 | TLS 1.2 |
| Impala | Impala Daemon | Impala Daemon HTTP Server Port | 25000 | TLS 1.2 |
| Impala | Impala StateStore | StateStore HTTP Server Port | 25010 | TLS 1.2 |
| Impala | Impala Catalog Server | Catalog Server HTTP Server Port | 25020 | TLS 1.2 |
| Impala | Impala Catalog Server | Catalog Server Service Port | 26000 | TLS 1.2 |
| Oozie | Oozie Server | Oozie HTTPS Port | 11443 | TLS 1.1, TLS 1.2 |
| Solr | Solr Server | Solr HTTP Port | 8983 | TLS 1.1, TLS 1.2 |
| Solr | Solr Server | Solr HTTPS Port | 8985 | TLS 1.1, TLS 1.2 |
| Spark | History Server |  | 18080 | TLS 1.2 |
| YARN | ResourceManager | ResourceManager Web Application HTTP Port | 8090 | TLS 1.2 |
| YARN | JobHistory Server | MRv1 JobHistory Web Application HTTP Port | 19890 | TLS 1.2 |

## 9.Cloudera Manager资源需求
Cloudera Manager需要以下资源：
+ **磁盘空间**
  - Cloudera Manager服务器
    + 分区托管 **/var** 上的5GB
    + 分区托管 **/usr** 上有500MB
    + 对于parcels，所需的空间取决于下载到Cloudera Manager服务器的parcels的数量，并分发给代理主机。
    您可以下载同一产品、不同版本和不同版本的多个parcels。如果您正在管理多个集群，则在Cloudera Manager服
    务器上只下载了一个产品/版本/构建/分发包——而不是每个集群一个parcel。在Cloudera Manager服务器上的本
    地parcel存储库中，各种parcels的大致大小如下:
      - CDH5（包括Impala和Search）- 每parcel 1.5GB（包装），每parcel 2GB（未包装）
      - Impala - 每parcel 200MB
      - Cloudera Search - 每parcel 400MB

  - Cloudera管理服务 - 主机监视器和服务监视器数据库存储在主机分区 **/var** 上。确保此分区上至少有20GB可用。
  - 代理 - 在代理主机上，每个未打包的parcel需要在Cloudera Manager服务器上下载的parcel的 **3倍** 的空间。
  默认情况下，未打包的parcel位于 **/opt/cloudera/packages**。
+ **RAM** - 大多数情况下建议使用4GB，并且在使用Oracle数据库时需要。对于少于100台主机的非Oracle部署，2GB可
能就足够了。但是，要在具有2GB RAM的计算机上运行Cloudera Manager Server，必须调整其最大堆大小（通过修改
**/etc/default/cloudera-scm-server中的-Xmx**）。 否则，内核可能会因为消耗太多的内存而终止服务器。
+ **Python** - Cloudera Manager需要Python2.4或更高版本（**但与Python 3.0或更高版本不兼容**）。CDH5中
的Hue和CDH5的软件包安装需要Python2.6或2.7。所有支持的操作系统包括Python版本2.4或更高版本。Cloudera Manager
通过最新版本的Python 2.x与Python2.4兼容。Cloudera Manager不支持Python 3.0及更高版本。
+ **Perl** - Cloudera Manager需要perl。
+ **python-psycopg2软件包** - Cloudera Manager5.8及更高版本对软件包python-psycopg2有新的依赖关系。
此软件包在标准SLES11和SLES12存储库中不可用。在安装或升级Cloudera Manager之前，您需要添加此存储库或手动将其安装
到运行Cloudera Manager Agent的任何计算机。如果Cloudera Manager Server和Agent在同一主机上运行，请首先安装
Cloudera Manager Server，然后添加python-psycopg2存储库或软件包。添加存储库或软件包后，请安装Cloudera Manager Agent。
通过选择正确的SLES版本，从以下URL下载python-psycopg2存储库或软件包：
https：//software.opensuse.org/package/python-psycopg2。
+ **iproute软件包** - Cloudera Manager5.12及更高版本对iproute软件包有一个新的依赖关系。任何运行Cloudera Manager Agent
的机器都需要该软件包。您需要哪个版本取决于操作系统：
  | 操作系统 | iproute版本 |
  | :------------- | :------------- |
  | CentOS 6.x | iproute-2.6 |
  | CentOS 7.x | iproute-3.10 |
  | RHEL 6.x | iproute-2.6 |
  | RHEL 7.x | iproute-3.10 |

  ```
  注： 我们这里只列出来的CentOS/RHEL相关的
  ```








































dd
