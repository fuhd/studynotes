硬件需求指南
================================================================================
要评估群集的硬件和资源分配，需要分析要在群集上运行的工作负载类型，以及您将用于运行这些工作负载的CDH组件。
您还应该考虑要存储和处理的数据大小，工作负载的频率，需要运行的并发作业数以及应用程序所需的速度。

在创建集群体系结构时，您需要在集群中的主机之间分配Cloudera Manager和CDH角色，以最大限度地利用资源。
Cloudera提供了有关如何将角色分配给群集主机的一些指导。请参阅推荐的 [群集主机和角色分配](https://www.cloudera.com/documentation/enterprise/latest/topics/cm_ig_host_allocations.html)。
将多个角色分配给主机时，将主机上每个角色的总资源需求（内存，CPU，磁盘）加在一起以确定所需的硬件。

有关工作负载如何影响尺寸决策的信息，请参阅以下博客文章：[操作方法：为您的新Hadoop集群选择合适的硬件](http://blog.cloudera.com/blog/2013/08/how-to-select-the-right-hardware-for-your-new-hadoop-cluster/)。
```
注意：关于核心数量的所有建议都是指逻辑核心，而不是物理核心。
```

## 1.Cloudera Manager

### 1.1.Cloudera Manager服务器存储要求

| 组件 | 存储 | 备注 |
| :------------- | :------------- | :-------------- |
| 分区托管 /usr | 1GB |  |
| Cloudera Manager数据库 | 5GB | 如果Cloudera Manager数据库与具有Service Monitor和Host Monitor的主机共享，则需要更多的存储空间才能满足这些组件的要求。 |

### 1.2.基于主机的Cloudera Manager服务器要求

| 群集主机数量 | 数据库主机配置 | 堆大小 | 逻辑处理器 | Cloudera Manager Server存储本地目录 |
| :--------- | :---------- | :------ | :------ | :-------------------------------- |
| 非常小（≤10） | 共享 | 2GB | 4 | 最低5GB |
| 小（≤20） | 共享 | 4GB | 6 | 最低20GB |
| 中等（≤200） | 专用 | 8GB | 6 | 最低200GB |
| 大（≤500） | 专用 | 10GB | 8 | 最低500GB |
| 特大（> 500） | 专用 | 16GB | 16 | 最低1TB |

```
注意：在较小的群集上，Cloudera Manager服务器和数据库可以共享主机。 在较大的群集上，它们必须在不同的专用主机上运行。
```

### 1.3.服务监视器要求
服务监视器的要求基于受监视实体的数量。要查看受监视实体的数量，请执行以下步骤：
1. 打开Cloudera Manager管理控制台，然后单击 **群集> Cloudera管理服务**。
2. 找到Cloudera管理服务监控的实体图表。如果图表不存在，请将其从图表库中添加。

#### 1.3.1.与HDFS，YARN或Impala集群
对于具有工作角色的唯一服务是HDFS，YARN或Impala的群集，请使用此表中的建议。

| 受监控实体的数量 | 主机数量 | 必需的Java堆大小 | 推荐的非Java堆大小 |
| :---------- | :-------- | :------------- | :-------------- |
| 0-2,000 | 0-100 | 1GB | 6GB |
| 2,000-4,000 | 100-200 | 1.5GB | 6GB |
| 4,000-8,000 | 200-400 | 1.5GB | 12GB |
| 8,000-16,000 | 400-800 | 2.5GB | 12GB |
| 16,000-20,000 | 800-1,000 | 3.5GB | 12GB |

#### 1.3.2.与HBase，Solr，Kafka或Kudu集群
在群集中部署HBase，Solr，Kafka或Kudu等服务时，请使用这些建议。这些服务通常具有较大数量的受监视实体。

| 受监控实体的数量 | 主机数量 | 必需的Java堆大小 | 推荐的非Java堆大小 |
| :---------- | :-------- | :------------- | :-------------- |
| 0-30,000 | 0-100 | 2GB | 12GB |
| 30,000-60,000 | 100-200 | 3GB | 12GB |
| 60,000-120,000 | 200-400 | 3.5GB | 12GB |
| 120,000-240,000 | 400-800 | 8GB | 20GB |

### 1.4.主机监视器
主机监视器的要求基于受监视实体的数量。要查看受监视实体的数量，请执行以下步骤：
1. 打开Cloudera Manager管理控制台，然后单击 **群集> Cloudera管理服务**。
2. 找到Cloudera管理服务监控的实体图表。如果图表不存在，请将其从图表库中添加。

| 主机数量 | 受监控实体的数量 | 堆大小 | 非Java堆大小 |
| :---------- | :-------- | :------------- | :-------------- |
| 0-200 | <6k | 1GB | 2GB |
| 200-800 | 6k-24k | 2GB | 6GB |
| 800-1000 | 24k-30k | 3GB | 6GB |

确保主机监视器，服务监视器，报告管理器和事件服务器数据库 **至少有25GB可用磁盘空间**。

### 1.5.报告管理器
报告管理器定期从NameNode获取fsimage。它读取fsimage并为它创建一个Lucene索引。**为了提高索引性能，
Cloudera建议配置一台尽可能强大的主机，并将SSD磁盘专用于报告管理器**。

| 组件 | Java堆 | CPU | 磁盘 |
| :---------- | :-------- | :------------- | :-------------- |
| 报告管理器 | fsimage大小的3-4倍 | 最少：8个核心，推荐：16核心（32核心，启用超线程）| 1个专用磁盘，至少是fsimage大小的20倍。 Cloudera强烈建议使用SSD磁盘。 |

### 1.6.代理主机
未打包的parcel大约需要存储在Cloudera Manager服务器上的打包parcel的 **3倍** 空间。

### 1.7.事件服务器
为事件服务器索引目录预留 **20GB** 的磁盘空间。（此目录的位置由事件服务器索引目录事件服务器配置属性
设置。）

## 2.Cloudera导航器
导航器组件的大小根据集群的大小和生成的审计事件的数量而变化很大。有关更多信息，请参阅最小建议内存和磁盘
空间。

| 组件 | Java堆/内存 | CPU | 磁盘 |
| :---------- | :-------- | :------------- | :-------------- |
| 导航器审计服务器 | 最小：2-3GB的Java堆;使用字节配置属性中的审计服务器Java堆大小配置此值 | 最小：1个核心 | Navigator Audit Server使用的数据库必须能够容纳数百GB（或每天数千万行）。数据库大小可能会达到TB。理想情况下，数据库不应该与其他服务共享，因为审计插入速率可能会压倒数据库服务器，使得使用同一数据库的其他服务的响应性降低。请参阅Cloudera Navigator的存储空间规划。 |
| 导航器元数据服务器 | 最小：10GB的Java堆,推荐：20GB Java堆；为操作系统缓冲区缓存添加20GB，但是对于繁忙的群集，内存要求可能要高得多，并且可能需要配置专用主机。导航器日志包括基于正在跟踪的对象数量的估计。使用字节配置属性中的导航器元数据服务器Java堆大小配置此值。| 最小：1个核心 | 最低：50GB，建议：100-200GB；注意：除非您运行清除功能，否则元数据服务器存储的数据会无限增长。如果您尚未将清除功能设置为按计划的时间间隔运行，则Cloudera建议您运行清除功能以回收磁盘空间并检查数据增长（以及相应的内存要求）。请参阅Cloudera导航器管理。|
| Navigator HSM KMS | 16GB RAM | 最低：2GHz 64位四核 | 40GB，使用中等到高性能驱动器。|

## 3.Cloudera数据科学工作台

| 硬件组件 | 需求 | 备注 |
| :---------- | :-------- | :------------- |
| CPU | 16+ CPU（vCPU）内核 | 每个会话至少分配一个CPU内核。1个CPU内核通常适用于轻工作负载。 |
| 内存 | 32 GB RAM | 作为一般指导，Cloudera建议RAM的容量在60GB到256GB之间；分配少于2GB的RAM可能会导致许多应用程序出现内存不足错误。|
| 磁盘 | root卷：100GB；应用程序块设备或安装点（仅限主主机）：500GB；Docker镜像块设备：500GB | 强烈建议将SSD用于应用程序数据存储。|

## 4.CDH

### 4.1.Accumulo

| 组件 | Java堆 | CPU | 磁盘 |
| :---------- | :-------- | :------------- | :-------------- |
| Master | 最小：1GB（100-1000 tablets：4GB；10,000或更多tablets与200或更多的tablets服务器：8GB；10,000或更多tablets与300或更多的tablets服务器：12 GB。使用Tablet Server Max Heapsize Accumulo配置属性设置此值。请参阅Flume Memory消耗 | 2个核心。为大型群集或批量加载添加更多内容。 | 1个本地日志磁盘 |
| Tablet服务器 | 最小：512MB Java堆；建议：8GB；中等规模生产（每台Tablet服务器200个或更多的Tablets）：16GB；使用Tablet Server Max Heapsize Accumulo配置属性设置此值。| 最少4个专用内核。您可以在使用复制或批量加载时为更大的群集添加更多核心。| 每个HDFS DataNode有4个或更多的主轴；1磁盘用于本地日志（该磁盘可与操作系统 和/或 其他Hadoop日志共享）|
| Tracer（追踪器）| 1~2GB，具体取决于集群工作负载；使用Tracer Max Heapsize Accumulo配置属性设置此值。| 2个或更多专用内核，具体取决于群集大小和工作负载 | 1磁盘用于本地日志，可以与操作系统 和/或 其他Hadoop日志共享 |
| GC角色 | 1~2GB，使用Accumulo配置属性(Tracer Max Heapsize)设置此值。| 2个或更多专用内核，具体取决于群集大小 | 1磁盘用于本地日志，可以与操作系统 和/或  其他Hadoop日志共享 |
| 监视角色 | 1~2GB，使用Monitor Max Heapsize Accumulo配置属性设置此值。| 2个或更多专用内核，具体取决于群集大小和工作负载 | 1磁盘用于本地日志，可以与操作系统 和/或 其他Hadoop日志共享 |

有关更多信息，请参阅CDH安装指南中的Apache Accumulo。

### 4.2.Flume












































ddd
