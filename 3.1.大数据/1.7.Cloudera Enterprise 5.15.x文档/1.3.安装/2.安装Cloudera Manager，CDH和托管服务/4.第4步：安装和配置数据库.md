第4步：安装和配置数据库
================================================================================
Cloudera Manager使用各种数据库和数据存储来存储有关Cloudera Manager配置的信息，以及诸如系统运行
状况或任务进度等信息。

虽然您可以在单个环境中部署不同类型的数据库，但这样做可能会产生意外的复杂情况。**Cloudera建议为所有
Cloudera数据库选择一个受支持的数据库提供程序**。

**Cloudera建议将数据库安装在与服务不同的主机上**。将数据库与服务分离可以帮助隔离来自某个或另一个的
故障或资源争夺的潜在影响。它还可以简化具有专用数据库管理员的组织的管理。

您可以将自己的 **PostgreSQL，MariaDB，MySQL或Oracle** 数据库用于Cloudera Manager Server和其
他使用数据库的服务。有关规划，管理和备份Cloudera Manager数据存储的信息，请参阅
[Cloudera Manager的存储空间规划](https://www.cloudera.com/documentation/enterprise/latest/topics/cm_ig_reqs_space.html#concept_tjd_4yc_gr)和[备份数据库](https://www.cloudera.com/documentation/enterprise/latest/topics/cm_ag_backup_dbs.html#xd_583c10bfdbd326ba--6eed2fb8-14349d04bee--7e98)。

## 1.所需的数据库
以下组件都需要数据库：**Cloudera Manager服务，Oozie服务，Sqoop服务，活动监视器，报表管理器，
Hive Metastore服务，Hue服务，Sentry服务，Cloudera Navigator Audit服务和Cloudera Navigator
Metadata服务**。数据库中包含的数据类型及其相对大小如下所示：
+ **Cloudera Manager服务** - 包含有关已配置的服务及其角色分配，所有配置历史记录，命令，用户和运行
进程的所有信息。这个相对较小的数据库（ **<100 MB** ）是 **备份最重要的数据库**。
    ```
    重要提示：重新启动进程时，将使用保存在Cloudera Manager数据库中的信息重新部署每个服务的配置。如果此信息不可用，
    您的群集无法启动或正常工作。您必须安排并维护Cloudera Manager数据库的定期备份才能在发生此数据库丢失时恢复群集。
    有关更多信息，请参阅备份数据库。
    ```
+ **Oozie服务** - 包含Oozie工作流程，协调器和绑定数据。**可以长得很大**。
+ **Sqoop服务** - 包含诸如连接器，驱动程序，链接和作业等实体。**相对较小**。
+ **活动监视器** - 包含有关过去活动的信息。在大型集群中，该数据库可能会变大。**只有部署了MapReduce
服务时，才需要配置Activity Monitor数据库**。
+ **报告管理器** - 随时间追踪磁盘利用率和处理活动。**中型**。
+ **Hive Metastore服务** - 包含Hive元数据。**相对较小**。
+ **Hue服务** - 包含用户帐户信息，作业提交和Hive查询。**相对较小**。
+ **Sentry服务** - 包含授权元数据。**相对较小**。
+ **Cloudera Navigator审计服务** - 包含审计信息。在大型集群中，**该数据库可能会变大**。
+ **Cloudera Navigator元数据服务** - 包含授权，策略和审计报告元数据。**相对较小**。

主机监视器和服务监视器服务使用本地基于磁盘的数据存储。有关更多信息，请参阅监控数据的数据存储。

**数据库的JDBC连接器必须安装在分配活动监视器和报告管理器角色的主机上**。

## 2.安装和配置数据库
有关为Cloudera Manager，CDH和其他托管服务安装和配置数据库的说明，请参阅有关要使用的数据库类型的
说明。

### 2.1.安装和配置MySQL

#### 2.1.1.安装MySQL服务器
```
注意：

1. 如果您已经设置了MySQL数据库，则可以跳到配置和启动MySQL服务器部分，以验证您的MySQL配置是否满足Cloudera Manager的要求
2. 对于MySQL5.6和5.7，您必须安装MySQL-shared-compat或MySQL共享软件包。这是Cloudera Manager Agent软件包安装必需的
3. datadir目录（缺省情况下为 /var/lib/mysql）位于具有足够可用空间的分区上很重要
4. 如果在MySQL中启用基于GTID的复制，则Cloudera Manager安装将失败
```
这里只针对CentOS/RHEL操作系统：

**MySQL不再包含在RHEL中。您必须从MySQL网站下载存储库并直接安装它**。您可以使用以下命令来安装MySQL。
欲了解更多信息，请访问 [MySQL网站](https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/)。






































ddd
