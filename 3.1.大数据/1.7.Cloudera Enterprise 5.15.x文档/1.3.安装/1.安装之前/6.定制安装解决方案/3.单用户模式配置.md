单用户模式配置
================================================================================
在传统的Cloudera Manager部署中，管理每台主机上的Hadoop进程的Cloudera Manager Agent以root用
户身份运行。但是，某些环境限制对root帐户的访问。

**Cloudera Manager5.3及更高版本提供单用户模式**，满足此类环境的要求。在单用户模式下，Cloudera
Manager Agent和由Cloudera Manager管理的服务运行的所有进程都将作为单个配置的用户和组来启动。单用
户模式优先隔离Hadoop和系统其余部分，隔离系统上运行的Hadoop进程之间的隔离。

在Cloudera Manager部署中，单用户模式是全局性的，适用于由Cloudera Manager实例管理的所有群集。

**默认情况下，单个用户是cloudera-scm**，以下各节中描述的配置步骤假定该用户。但是，支持其他用户。
如果您选择其他用户，请在以下步骤中用所选用户替换cloudera-scm，并执行使用非默认单一用户中的其他步骤。

以下各节介绍了单用户模式的限制以及安装过程中特定点支持的安装方案所需的配置步骤。

## 1.限制
+ 在 **常规** 和 **单用户模式** 之间切换不受支持。
    ```
    重要：在 管理>设置 中，有一个单用户模式复选框。安装后不要启用或禁用复选框。
    ```
+ 运行CDH5.2及更高版本的群集支持单用户模式。
+ **单用户模式不支持NFS网关**。
+ 单用户模式不支持Cloudera Navigator数据加密组件。
+ **单用户模式不支持Kudu**。

## 2.使用非默认的单个用户
为默认（**cloudera-scm**）以外的用户 **配置单用户模式** 时，请执行以下配置步骤：
+ 使单个用户可以写入以下目录：
  - **/var/log/cloudera-scm-agent/**
  - **/var/lib/cloudera-scm-agent/**
+ Cloudera Manager将目录存储在 **/opt/cloudera** 下，默认情况下由cloudera-scm拥有。执行以下
操作之一：
  - 将 **/opt/cloudera** 更改为可由单个用户写入。
  - 将parcel目录位置更改为单个用户可写：
    1. 转至 **管理>设置>parcel**。
    2. 设置“本地parcel存储库路径”属性。
    3. 单击 **保存更改**。
+ 对于单个用户用户名，请使用以下设置在 **/etc/security/limits.d/username.conf** 中创建进程限制
配置文件：
  ```
  username soft nofile 32768
  username soft nproc 65536
  username hard nofile 1048576
  username hard nproc unlimited
  username hard memlock unlimited
  username soft memlock unlimited
  ```
。。。。。。。。未完。。。。。。。。。
