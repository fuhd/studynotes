建议的群集主机和角色分配
================================================================================
```
重要说明：

本主题介绍由Cloudera Manager管理的CDH群集的建议角色分配。您为部署选择的实际分配取决于工作负载的类型和数量，部署在群
集中的服务，硬件资源，配置和其他因素。
```
使用Cloudera Manager安装向导安装CDH时，Cloudera Manager会尝试根据主机中可用的资源在群集主机
（分配给网关主机的角色除外）之间分配角色。您可以在向导中出现的“自定义角色分配”页面上更改这些分配。
您也可以稍后使用Cloudera Manager更改和添加角色。请参阅角色实例。

如果您的群集使用静态数据加密，请参阅为受托者服务器和密钥受托者KMS分配主机。

有关如何查找Cloudera Manager和其他服务所需的各种数据库的位置的信息，请参阅 **步骤4：安装和配置数据库**。

## CDH群集主机和角色分配
群集主机可以大致描述为以下类型：
+ **Master主机** 运行Hadoop主进程，如HDFS NameNode和YARN资源管理器。
+ **Utility主机** 运行其他不是主进程的群集进程，如Cloudera Manager和Hive Metastore。
+ **Gateway主机** 是用于在群集中启动作业的客户端访问点。所需的网关主机数量取决于工作负载的类型和大小。
+ **Worker主机** 主要运行DataNode和其他分布式进程，如Impalad。
```
重要提示：Cloudera建议您始终在生产环境中使用CDH时启用高可用性。
```
以下表格描述了针对不同群集大小推荐的角色分配：

### 1.没有高可用性的3-10名Worker主机

| Master主机 | Utility主机/Gateway主机 | Worker主机 |
| :------------- | :------------ | :------------ |
| **Master主机1**: NameNode，YARN ResourceManager，JobHistory Server，ZooKeeper，Kudu master，Spark History Server | **一个主机适用于所有Utility和Gateway角色：** Secondary NameNode，Cloudera Manager，Cloudera Manager Management Service，Hive Metastore，HiveServer2，Impala Catalog Server，Impala StateStore，Hue，Oozie，Flume，Gateway configuration | **3-10 Worker主机**: DataNode，NodeManager，Impalad，Kudu tablet server |

### 2.具有高可用性的3-20名工作主机

| Master主机 | Utility主机 | Gateway主机 | Worker主机 |
| :------------- | :------------ | :------------ | :------------ |
| **Master主机1**: NameNode；JournalNode；FailoverController；YARN ResourceManager；ZooKeeper；JobHistory Server；Spark History Server；Kudu master；**Master主机2**: NameNode；JournalNode；FailoverController；YARN ResourceManager；ZooKeeper；Kudu master；**Master主机3**：Kudu master (Kudu需要一个奇数的Master为HA) | **Utility主机：** Cloudera Manager；Cloudera Manager Management Service；Hive Metastore；Impala Catalog Server；Impala StateStore；Oozie；ZooKeeper (需要专用磁盘)；JournalNode (需要专用磁盘) | **一个或多个Gateway主机：** Hue；HiveServer2；Flume；Gateway configuration；|  **3-20Worker主机：** DataNode；NodeManager；Impalad；Kudu tablet server |

### 3.具有高可用性的20-80个工作主机
略了，不写了，因为没有机会使用这么多机器。

### 4.具有高可用性的80-200个工作主机
略了，不写了，因为没有机会使用这么多机器。

### 5.具有高可用性的200-500名工作主机
略了，不写了，因为没有机会使用这么多机器。

### 6.具有高可用性的500-1000名工作主机
略了，不写了，因为没有机会使用这么多机器。
