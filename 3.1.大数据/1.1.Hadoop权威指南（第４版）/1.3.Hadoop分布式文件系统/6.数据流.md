数据流
==================================================================================
为了了解客户端及与之交互的HDFS、namenode和datanode之间的数据流是什么样的，我们可以 参考下图，
该图显示了在读取文件时事件的发生顺序。

客户端通过调用 *FileSystem* 对象的 *open()* 方法来打开希望读取的文件，对于HDFS来说，这个对
象是：*DistributedFileSystem* 的一个实例（**下图步骤1**）。*DistributedFileSystem* 通
过使用远程过程调用（*RPC*）来调用 *namenode*，以确定文件起始块的位置（**下图步骤2**）。对于每
一个块，*namenode* 返回存在该块副本的 *datanode* 地址。此外，这些 *datanode* 根据它们与客
户端的距离来排序（**根据集群的网络拓扑**）。如果该客户端本身就是一个 *datanode*（比如，在一个
*MapReduce* 任务中），那么该客户端将会从保存有相应数据块复本的本地 *datanode* 读取数据。

![客户端读取HDFS中的数据](img/1.jpeg)

































dd
