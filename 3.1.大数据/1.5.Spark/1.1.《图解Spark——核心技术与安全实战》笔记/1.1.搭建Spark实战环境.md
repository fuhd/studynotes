搭建Spark实战环境
================================================================================
## 1.基础环境搭建
在这里我们将 **搭建Spark集群运行模式**（当然在该集群中将 **安装Hadoop**，实战中需要它提供HDFS
文件存储和YARN资源调度管理）。该集群 **不少于3个节点**，如果没有物理节点，可以利用虚拟机软件，
如VMware、VirtualBox等工具进行搭建。

集群网络环境配置：

| 序号 | IP地址 | 机器名 | 运行进程 | 核数/内存 | 用户名 |
|:----|:-------|:------|:-------|:---------|:------|
| 1 | 192.168.1.10 | master | NN/SNN/DN/RM/Master/Worker | 1核/3G | spark |
| 2 | 192.168.1.11 | slave1 | DN/NM/Worker | 1核/2G | spark |
| 1 | 192.168.1.10 | slave2 | DN/NM/Worker | 1核/2G | spark |

目录：
+ `/app`
+ `/app/soft`
+ `/app/compile`
+ `/app/spark`
+ `/home/spark`

说明：
+ 所有节点均安装CentOS6.5版本64位系统，**防火墙/SElinux均禁用**，所有节点上均创建一个 **spark
用户**，该用户工作目录是`/home/spark`，**上传文件存放在`/home/spark/work`目录** 中。
+ 所有节点上均创建一个 **目录`/app`用于存放程序，并且拥有者是spark用户**。在`/app`目录下创建 
`soft`、`compile`和`spark`三个子目录：**`/app/soft`子目录用于存放支持Spark运行相关基础软件，
`/app/compile`子目录用于编译时存放源代码及编译结果，而`/app/spark`子目录则存放Spark和Hadoop
等**。

### 1.1.搭建集群样板机

#### 1.1.1.设置系统环境

1. **设置机器名**

为了方便Hadoop和Spark设置配置的方便，将设置每个服务器的机器名。以root用户登录，在命令行终端使
用：
```shell
vi /etc/sysconfig/network
```
打开配置文件，根据前面的规划设置服务器机器名：
```ini
NETWORKING=yes
HOSTNAME=master
```

2. **设置IP地址**

以root帐号登录，在如下配置文件中设置网卡信息：
```shell
vi /etc/sysconfig/network-scripts/ifcfg-eth0
```
主要参数信息如下：
```ini
#对应第一张网卡 
DEVICE=eth0
#以太网类型
TYPE=Ethernet
#是否启动时运行
ONBOOT=yes
#使用静态IP,而不是DHCP分配IP
BOOTPROTO=static 
#风格连接名称
NAME="System etho"
#eth0的MAC地址，根据实际情况而定，对应配置
HWADDR=00:50:56:94:04:3C
#指定本地IP地址
IPADDR=192.168.1.10
#指定子网掩码
NETMASK=255.255.255.0
#指定网关
GATEWAY=192.168.1.1
#DNS地址，配置后同步到/etc/resolv.conf文件
```
通过以上方法设置网络配置以后，使用命令：
```shell
service network restart
```
重启网络或重启机器，并 **使用ifconfig命令查看设置IP地址是否生效**。

3.**设置Host映射文件**

以root用户，在命令行使用命令：
```shell
vi /etc/hosts
```
编辑文件添加如下内容：
```shell
192.168.1.10 master
192.168.1.11 slave1
192.168.1.12 slave2
```
设置完毕后，可以使用：
```shell
ping master
```
直接检查master服务器是否连通以及检测服务器是响应速度。

4.**关闭防火墙和SELinux**

关闭防火墙和SELinux的原因在于Hadoop和Spark运行过程需要通过端口进行通信，而这些安全设施会进行
阻拦。另外，在使用SSH无密码访问时也存在同样的情况。

关闭iptables时，以root帐号使用如下命令：
```shell
service iptables status
```
查看 **iptables状态**，如果显式“iptables: Firewall is not running”表示iptables已经关闭；
如果显示iptables设置信息，则需要使用如下命令 **关闭iptables**：
```shell
chkconfig iptables off
```
同样，使用root用户编辑：
```shell
vi /etc/selinux/config
```
在该配置文件中设置 **SELINUX=disable，关闭防火墙和SELinux的设置需要重启机器才能够生效**。

#### 1.1.2.配置运行环境



## 2.编译Spark源代码


## 3.搭建Spark运行集群


## 4.搭建Spark实战开发环境 


