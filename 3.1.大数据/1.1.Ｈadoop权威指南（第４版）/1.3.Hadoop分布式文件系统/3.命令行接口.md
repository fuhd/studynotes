命令行接口
==========================================================================
现在我们通过命令行交互来进一步认识`HDFS`。`HDFS`还有很多其他接口，但命令行是最简单的，同时也是许多
开发者最熟悉的。

在我们设置为 **分布配置** 时，有两个属性项需要进一步解释。**第一项是`fs.defaultFS`**，设置为
`hdfs://localhost/`，**用于设置`Hadoop`的默认文件系统**。文件系统是由`URI`指定的，这里我们
已使用`hdfs URI`来配置`HDFS`为`Hadoop`的默认文件系统。**`HDFS`的守护程序通过该属性来确定
`HDFS namenode`的主机及端口**。我们将在`localhost`默认的`HDFS`端口 **`8020`** 上运行
`namenode`。这样一来，`HDFS`客户端可以通过该属性得知`namenode`在哪里运行进而连接到它。

**第二个属性`dfs.replication`，我们设为`1`，这样一来，`HDFS`就不会按默认设置将文件系统块复本
设置为`3`。在单独一个`datanode`上运行时，`HDFS`无法将块复制到`3`个`datanode`上，所以会持续
给出块复本不足的警告**。设置这个属性之后，上述问题就不会在出现了。

### 文件系统的基本操作
至此，文件系统已经可以使用了，我们 **可以执行所有常用的文件系统操作**，例如，读取文件，新建目录，
移动文件，删除数据，列出目录，等等。可以输入命令：
```shell
$ hadoop fs -help
```
**获取每个命令的详细帮助文件**。

首先 **从本地文件系统将一个文件复制到`HDFS`**：
```shell
$ hadoop fs -copyFromLocal ~/input/docs/quangle.txt hdfs://localhost/quangle.txt
```
该命令调用`hadoop`文件系统的`shell`命令 **`fs`**，后者提供了一系列子命令，在这个例子中，我们
执行的是 **`-copyFromLocal`**。本地文件`quangle.txt`被复制到运行在`localhost`上的`HDFS`
实例中，路径为：`hdfs://localhost/quangle.txt`。事实上，**我们可以简化命令格式以省略主机的`URL`
并使用默认设置，即省略`hdfs://localhost`，因为该项已在`core-site.xml`中指定**。如下命令：
```shell
$ hadoop fs -copyFromLocal ~/input/docs/quangle.txt /quangle.txt
```
**我们也可以使用相对路径，并将文件复制到`HDFS`的`home`目录中（注意：没有用/作为开始）**，本例中
为`/user/fuhd`：
```shell
$ hadoop fs -copyFromLocal ~/input/docs/quangle2.txt quangle2.txt
# 上例与下面命令相等
# hadoop fs -copyFromLocal ~/input/docs/quangle2.txt /user/fuhd/quangle2.txt
```
我们 **把文件复制回本地文件系统，并检查是否一致**：
```shell
$ hadoop fs -copyToLocal /quangle.txt ~/quangle.copy.txt
$ md5sum ~/input/docs/quangle.txt ~/quangle.copy.txt

b537dc015ca9316e9a052ce01edeef96  /home/fuhd/input/docs/quangle.txt
b537dc015ca9316e9a052ce01edeef96  /home/fuhd/quangle.copy.txt
```
`MD5`键值相同，表明这个文件在`HDFS`之旅中得以幸存并保存完整。

最后，看一下 **`HDFS`文件列表**。我们 **新建一个目录**，看它在列表中怎么显示：
```shell
$ hadoop fs -mkdir /books
$ hadoop fs -ls /
Found 4 items
drwxr-xr-x   - fuhd supergroup          0 2018-01-02 16:15 /books
-rw-r--r--   1 fuhd supergroup         97 2018-01-02 12:47 /quangle.txt
-rw-r--r--   1 fuhd supergroup        130 2018-01-02 15:50 /quangle2.txt
drwxrwx---   - fuhd supergroup          0 2017-12-21 14:51 /tmp
```
返回的结果信息与`Unix`命令 **`ls -l`** 的输出结果非常相似，仅有细微差别。**第`1`列显示的是文
件模式。第`2`列是这个文件的备份数**（这在传统`Unix`文件系统是没有的）。由于我们在整个文件系统
范围内设置的默认复本数为`1`，所以这里显示的也都是`1`。**第`3`列和第`4`列显示文件的所属用户和组别。
第`5`列是文件的大小，以字节为单位，目录为`0`。第`6`列和第`7`列是文件的最后修改时期与时间。最后，
第`8`列是文件或目录的名称**。
```
HDFS中的文件访问权限
针对文件和目录，HDFS的权限模式与POSIX的权限模式非常相似。
一共提供三类权限模式：只读权限（r）、写入权限（w）和可执行权限（x）。读取文件或列出目录内容时需要
只读权限。写入一个文件或是在一个目录上新建及删除文件或目录，需要写入权限。对于文件而言，可执行权限
可以忽略，因为你不能在HDFS中执行文件（与POSIX不同），但在访问一个目录的子项时需要该权限。

```




































































































ss
