升级到HDP-3.0 +时迁移Atlas元数据
================================================================================
升级到HDP-3.0及更高版本时，必须执行其他步骤将Atlas元数据从Titan迁移到JanusGraph。

## 概览
在`HDP-3.0+`中，`Apache Atlas`使用 **JanusGraph图数据库** 来存储元数据对象。在早期版本中，
Atlas使用 **Titan图数据库** 进行元数据存储。升级到HDP-3.0及更高版本时，必须使用命令行迁移工具
将Atlas元数据从Titan迁移到JanusGraph。
1. 估计现有Atlas存储库的大小以及将元数据从`HDP 2.x` Titan数据库导出到`HDP 3.x` JanusGraph
数据库所需的时间。
2. 使用Atlas元数据迁移工具从`HDP 2.x`导出Atlas元数据。
3. 将Atlas元数据导入`HDP 3.x`。

## 升级到HDP-3.0+ 时迁移Atlas元数据
从`HDP-2.x`升级到`HDP-3.0`及更高版本时，执行以下步骤将Atlas元数据从Titan迁移到JanusGraph。

### 1.过程
1. 在升级HDP和Atlas之前，请使用以下方法之一来确定`HDP-2.x`群集上Atlas元数据的大小。
    + 单击`Atlas Web UI`上的SEARCH，然后将绿色切换按钮从 **Basic** 切换到 **Advanced**。
    在“按查询搜索”框中输入以下查询，然后单击“搜索”。
      ```
      Asset select count()
      ```
    + 运行以下Atlas指标REST API查询：
      ```
      curl -g -X GET -u admin:admin -H "Content-Type: application/json" -H "Cache-Control: no-cache" "http://<atlas_server>:21000/api/atlas/admin/metrics"
      ```
      































dd
