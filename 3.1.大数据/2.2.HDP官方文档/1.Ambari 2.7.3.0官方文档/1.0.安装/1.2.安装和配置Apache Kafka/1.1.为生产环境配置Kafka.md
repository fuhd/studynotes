为生产环境配置Kafka
================================================================================
本章介绍与Kafka配置相关的主题，包括：
+ 准备环境
+ 为brokers、producers和consumers定制设置
+ 配置ZooKeeper与Kafka一起使用
+ 在安全集群上运行Kafka时启用对HDFS的审核

## 1.准备环境
以下因素可能会影响Kafka的表现：
+ 操作系统设置
+ 文件系统选择
+ 磁盘驱动器配置
+ Java版本
+ 以太网带宽

## 2.操作系统设置
配置Kafka时请考虑以下事项：
+ Kafka使用页面缓存内存作为活动编写器和读取器的缓冲区，因此在指定JVM大小（使用`-Xmx`和`-Xms`
Java选项）后，将剩余的RAM保留给操作系统以进行页面缓存。
+ Kafka需要打开文件和网络连接的文件描述符。您应该将文件描述符限制设置为 **至少128000**。
+ 您可以增加最大套接字缓冲区大小以启用高性能数据传输。

## 3.文件系统选择
Kafka使用常规的Linux磁盘文件进行存储。我们建议使用 **EXT4** 或 **XFS** 文件系统。对XFS文件
系统的改进表明Kafka工作负载的性能特性得到改善，而且不会影响稳定性。
```
警告：
1.由于存在索引失败的风险和（在网络文件系统的情况下）与使用MemoryMapped文件存储偏移索引相关的问题，请不要将已安装的共享驱动器或
任何网络文件系统与Kafka一起使用。
2.Kafka不支持加密文件系统，如SafenetFS。可能会发生索引文件损坏。
```

## 4.磁盘驱动器配置
对于吞吐量，我们建议将多个驱动器专用于Kafka数据。使用Kafka的驱动器通常比使用更少的驱动器更好。
不要将这些Kafka驱动器与任何其他应用程序共享或将它们用于Kafka应用程序日志。

您可以通过在`server.properties`文件中为`log.dirs`属性指定逗号分隔的目录列表来配置多个驱动器。
Kafka使用循环方法将分区分配给`log.dirs`中指定的目录；默认值为`/tmp/kafka-logs`。


































dd
