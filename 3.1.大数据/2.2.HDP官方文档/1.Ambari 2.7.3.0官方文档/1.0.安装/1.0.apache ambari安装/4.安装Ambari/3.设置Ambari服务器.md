设置Ambari服务器
================================================================================
在启动Ambari Server之前，您必须设置Ambari服务器。安装程序将Ambari配置为与Ambari数据库通信，
安装JDK并允许您自定义Ambari Server守护程序将运行的用户帐户。该：`ambari-server setup`命令
管理设置过程。

在Ambari服务器主机上运行以下命令以启动安装过程。您还可以将“设置选项”附加到命令。
```shell
ambari-server setup
```
回应安装提示：
1. 如果您尚未暂时禁用SELinux，则可能会收到警告。接受默认值（**y**），然后继续。
2. 默认情况下，Ambari Server在root下运行。接受Ambari-server守护程序提示的Customize用户帐
户的默认值（**n**），以root身份继续。如果要创建另一个用户来运行Ambari服务器，或者要分配以前创
建的用户，请在自定义用户帐户中为ambari-server守护程序提示选择 **y**，然后提供用户名。
3. 如果您没有暂时禁用iptables，您可能会收到警告。输入 **y** 继续。
4. 选择要下载的JDK版本。输入 **1** 以下载Oracle JDK 1.8。默认情况下，Ambari Server安装程
序会下载并安装Oracle JDK 1.8和随附的Java Cryptography Extension（JCE）策略文件。
5. 要继续进行默认安装，请在出现提示时接受Oracle JDK许可证。您必须接受此许可证才能从Oracle下载
必要的JDK。JDK在部署阶段安装。或者，您可以输入 **2** 以下载自定义JDK。如果选择Custom JDK，则
必须在所有主机上手动安装JDK并指定Java Home路径。
    ```
    提示

    要安装OpenJDK，请使用“自定义”选项。准备好向Ambari提供有效的JAVA_HOME值。我们强烈建议您在所有主机上一致地安装JDK软
    件包。
    ```
6. 出现提示时，请查看GPL许可协议。要明确启用Ambari下载和安装LZO数据压缩库，您必须回答 **y**。
如果输入 **n**，Ambari将不会自动在群集中的任何新主机上安装LZO。在这种情况下，您必须确保已正确
安装和配置LZO。如果未安装和配置LZO，则使用LZO压缩的数据将无法读取。如果您不希望Ambari自动下载
并安装LZO，您必须确认您的选择以继续。
7. 在输入高级数据库配置中选择 **n** 以使用默认值，用于Ambari的嵌入式PostgreSQL数据库。默认的
PostgreSQL数据库名称是`ambari`。默认用户名和密码是`ambari/bigdata`。否则，要使用现有的
PostgreSQL、MySQL/MariaDB或Oracle数据库与Ambari，请选择 **y**。
    + 如果您使用的是现有的PostgreSQL、MySQL/MariaDB或Oracle数据库实例，请使用以下提示之一：
        ```
        重要

        在运行安装程序并输入高级数据库配置之前，必须准备现有数据库实例。
        ```
        ```
        重要

        不支持使用Microsoft SQL Server或SQL Anywhere数据库选项。
        ```
    + 要使用现有Oracle实例，并为该数据库选择自己的数据库名称，用户名和密码，请输入 **2**。选择
    要使用的数据库，并提供提示中请求的任何信息，包括主机名，端口，服务名称或SID，用户名和密码。
    + 要使用现有的MySQL/MariaDB数据库，并为该数据库选择自己的数据库名称，用户名和密码，请输入
    **3**。选择您要使用的数据库，并提供所需的任何信息提示，包括主机名，端口，数据库名称，用户名
    和密码。
    + 要使用现有的PostgreSQL数据库，并为该数据库选择自己的数据库名称，用户名和密码，请输入
    **4**。选择要使用的数据库，并提供提示中请求的任何信息，包括主机名，端口，数据库名称，用户名
    和密码。
8. 在继续配置远程数据库连接属性[y/n]选择 **y**。
9. 安装完成。
    ```
    提示

    如果主机通过代理服务器访问Internet，则必须将Ambari Server配置为使用此代理服务器。
    ```

## 设置选项
Ambari Server设置经常使用以下选项。

| 选项 | 描述 |
| :------------- | :------------- |
| `-j (or --java-home)` | 指定要在Ambari Server和群集中的所有主机上使用的JAVA_HOME路径。默认情况下，如果不指定此选项，Ambari Server安装程序会将Oracle JDK 1.8二进制文件和随附的Java Cryptography Extension（JCE）策略文件下载到 /var/lib/ambari-server/resources。然后，Ambari Server将JDK安装到 /usr/jdk64。当您计划使用默认Oracle JDK 1.8以外的JDK时，请使用此选项。如果使用备用JDK，则必须在所有主机上手动安装JDK，并在Ambari Server安装期间指定Java Home路径。如果您计划使用Kerberos，则还必须在所有主机上安装JCE。此路径必须在所有主机上有效。 例如：`ambari-server setup –j /usr/java/default` |
| `--jdbc-driver` | 应该是JDBC驱动程序JAR文件的路径。使用此选项可指定JDBC驱动程序JAR的位置，并使该JAR可供Ambari Server在配置期间分发到群集主机。将此选项与--jdbc-db选项一起使用可指定数据库类型。|
| `--jdbc-db` | 指定数据库类型。有效值为：[postgres|mysql|oracle]将此选项与--jdbc-driver选项一起使用以指定JDBC驱动程序JAR文件的位置。|
| `-s (or --silent)` | 安装程序静默运行。接受所有默认提示值，例如：1.ambari-server的用户帐户“root”; 2.Oracle 1.8 JDK（安装在/usr/jdk64中）。可以通过添加-j选项并指定现有JDK路径来覆盖它；3.用于Ambari DB的嵌入式PostgreSQL（数据库名称为“ambari”）; *aa*|
|  |  |





































dd
