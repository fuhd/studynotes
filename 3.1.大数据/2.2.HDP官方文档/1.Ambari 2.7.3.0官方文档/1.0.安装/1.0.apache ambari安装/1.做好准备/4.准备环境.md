准备环境
================================================================================
要使用Ambari部署Hortonworks堆栈，您需要准备部署环境：
+ 设置无密码SSH
+ 设置服务用户帐户
+ 在群集和浏览器主机上启用NTP
+ 检查DNS和NSCD
+ 配置iptables
+ 禁用SELinux和PackageKit并检查umask值
+ 下载并设置数据库连接器
+ 为Ranger配置数据库实例
+ 安装HDF服务的数据库

## 1.设置无密码SSH

### 关于这个任务
要让`Ambari Server`在所有群集主机上自动安装`Ambari Agent`，必须在`Ambari Server`主机与群
集中的所有其他主机之间设置无密码SSH连接。`Ambari Server`主机使用SSH公钥身份验证来远程访问和安
装Ambari代理。
```
提示

您可以选择在每个群集主机上手动安装Ambari代理。在这种情况下，您不需要生成和分发SSH密钥。
```

### 步骤
1. 在`Ambari Server`主机上生成公钥和私钥SSH密钥。
  ```shell
  ssh-keygen
  ```
2. 将SSH公钥（`id_rsa.pub`）复制到目标主机上的root帐户。
  ```shell
  .ssh/id_rsa
  .ssh/id_rsa.pub
  ```
3. 将SSH公钥添加到目标主机上的`authorized_keys`文件中。
  ```shell
  cat id_rsa.pub >> authorized_keys
  ```
4. 根据您的SSH版本，您可能需要在目标主机上的`.ssh`目录（至700）和该目录（至600）中的
`authorized_keys`文件上设置权限。
  ```shell
  chmod 700 ~/.ssh
  chmod 600 ~/.ssh/authorized_keys
  ```
5. 从`Ambari Server`，确保您可以使用SSH连接到群集中的每个主机，而无需输入密码。
  ```shell
  ssh root@<remote.target.host>
  ```
其中`<remote.target.host>`具有集群中每个主机名的值。
6. 如果在第一次连接期间显示以下警告消息：您确定要继续连接（是/否）吗？输入 **是**。
7. 在运行基于Web的Ambari安装向导的计算机上保留SSH私钥的副本。
```
提示

如果该帐户可以在不输入密码的情况下执行sudo，则可以使用非root SSH帐户。
```





























ddd
