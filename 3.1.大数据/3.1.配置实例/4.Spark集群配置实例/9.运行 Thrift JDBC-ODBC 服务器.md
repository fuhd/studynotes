运行 Thrift JDBC-ODBC 服务器
=================================================================================
```
说明：
该测试计划配置Hadoop集群，一共三个节点：
    node-master（172.16.177.166）
    node-slave01（172.16.177.167）
    node-slave02（172.16.177.168）

node-master：NameNode，DataNode，ResourceManager，NodeManager，worker（非进程）
node-slave01：DataNode，NodeManager，SecondaryNameNode，worker（非进程）
node-slave02: DataNode，NodeManager，worker（非进程），Thrift服务
```

### 添加Thrift配置项
在 **$SPARK_HOME/conf/hive-site.xml** 中，添加如下配置项：
```xml
......
<property>
    <name>hive.server2.thrift.port</name>
    <value>10001</value>
</property>
<property>
    <name>hive.server2.thrift.bind.host</name>
    <value>node-slave02</value>
</property>
......
```

### 运行Thrift服务
**注意：指定哪个节点运行Thrift服务，就登录哪个节点操作**。这里我们指定了node-slave02，那我们就登
录这个节点进行操作：
```shell
# 这里是hadoop用户，也使用的ssh免密登录
$ ssh node-slave02
$ start-thriftserver.sh --master yarn
```
**如果停止Thrift服务，可以执行如下命令**：
```shell
$ stop-thriftserver.sh
```

### 客户端连接Thrift服务
可以从任何一个节点连接Thrift服务：
```shell
su - hadoop
```
```shell
$ beeline

Beeline version 1.2.1.spark2 by Apache Hive
```
```
beeline> !connect jdbc:hive2://node-slave02:10001

Connecting to jdbc:hive2://node-slave02:10001
Enter username for jdbc:hive2://node-slave02:10001: hadoop
Enter password for jdbc:hive2://node-slave02:10001:
18/01/30 15:19:57 INFO jdbc.Utils: Supplied authorities: node-slave02:10001
18/01/30 15:19:57 INFO jdbc.Utils: Resolved authority: node-slave02:10001
18/01/30 15:19:57 INFO jdbc.HiveConnection: Will try to open client transport with JDBC Uri: jdbc:hive2://node-slave02:10001
Connected to: Spark SQL (version 2.2.1)
Driver: Hive JDBC (version 1.2.1.spark2)
Transaction isolation: TRANSACTION_REPEATABLE_READ
0: jdbc:hive2://node-slave02:10001>
```

### SQL语句测试
```sql
0: jdbc:hive2://node-slave02:10001> show databases;
+---------------+--+
| databaseName  |
+---------------+--+
| default       |
+---------------+--+
1 row selected (0.137 seconds)
```
```sql
0: jdbc:hive2://node-slave02:10001> show tables;
+-----------+------------+--------------+--+
| database  | tableName  | isTemporary  |
+-----------+------------+--------------+--+
+-----------+------------+--------------+--+
No rows selected (0.043 seconds)
```

**注：按ctrl+d退出**。
