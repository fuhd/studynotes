卸载并清除Ambari和HDP
================================================================================
## 1.停止在Ambari中的所有服务

![停止在Ambari中的所有服务](img/31.png)

## 2.停止Ambari Server与Ambari Agent
在`server01.tythin.com`上执行：
```shell
ambari-server stop
```
在 **所有节点上** 执行：
```shell
ambari-agent stop
```

## 3.卸载Ambari Server与Ambari Agent
在`server01.tythin.com`上执行：
```shell
yum remove ambari-server
```
在 **所有节点上** 执行：
```shell
yum remove ambari-agent 
```

## 4.删除已安装的服务组件

## 4.1.检查已安装服务
在 **所有节点** 上执行：
```shell
yum list installed | grep ambari  

#示例结果：
ambari-agent.x86_64                   2.7.3.0-139                @ambari-2.7.3.0
ambari-infra-solr.noarch              2.7.3.0-139                @ambari-2.7.3.0
ambari-infra-solr-client.noarch       2.7.3.0-139                @ambari-2.7.3.0
ambari-metrics-grafana.x86_64         2.7.3.0-139                @ambari-2.7.3.0
ambari-metrics-hadoop-sink.x86_64     2.7.3.0-139                @ambari-2.7.3.0
ambari-metrics-monitor.x86_64         2.7.3.0-139                @ambari-2.7.3.0
smartsense-hst.x86_64                 1.5.1.2.7.3.0-139          @ambari-2.7.3.0
```
```shell
yum list installed | grep HDP 

#示例结果：
                                      1.1.0.3.1.0.0-78           @HDP-3.1-repo-1
                                      1.1.0.3.1.0.0-78           @HDP-3.1-repo-1
bigtop-jsvc.x86_64                    1.0.15-78                  @HDP-3.1-repo-1
hadoop_3_1_0_0_78.x86_64              3.1.1.3.1.0.0-78           @HDP-3.1-repo-1
hadoop_3_1_0_0_78-client.x86_64       3.1.1.3.1.0.0-78           @HDP-3.1-repo-1
hadoop_3_1_0_0_78-hdfs.x86_64         3.1.1.3.1.0.0-78           @HDP-3.1-repo-1
hadoop_3_1_0_0_78-libhdfs.x86_64      3.1.1.3.1.0.0-78           @HDP-3.1-repo-1
hadoop_3_1_0_0_78-mapreduce.x86_64    3.1.1.3.1.0.0-78           @HDP-3.1-repo-1
hadoop_3_1_0_0_78-yarn.x86_64         3.1.1.3.1.0.0-78           @HDP-3.1-repo-1
hbase_3_1_0_0_78.noarch               2.0.2.3.1.0.0-78           @HDP-3.1-repo-1
hdp-select.noarch                     3.1.0.0-78.el7             @HDP-3.1-repo-1
hive_3_1_0_0_78.noarch                3.1.0.3.1.0.0-78           @HDP-3.1-repo-1
hive_3_1_0_0_78-hcatalog.noarch       3.1.0.3.1.0.0-78           @HDP-3.1-repo-1
hive_3_1_0_0_78-jdbc.noarch           3.1.0.3.1.0.0-78           @HDP-3.1-repo-1
                                      1.0.0.3.1.0.0-78           @HDP-3.1-repo-1
kafka_3_1_0_0_78.noarch               2.0.0.3.1.0.0-78           @HDP-3.1-repo-1
livy2_3_1_0_0_78.noarch               0.5.0.3.1.0.0-78           @HDP-3.1-repo-1
phoenix_3_1_0_0_78.noarch             5.0.0.3.1.0.0-78           @HDP-3.1-repo-1
ranger_3_1_0_0_78-hbase-plugin.x86_64 1.2.0.3.1.0.0-78           @HDP-3.1-repo-1
ranger_3_1_0_0_78-hdfs-plugin.x86_64  1.2.0.3.1.0.0-78           @HDP-3.1-repo-1
ranger_3_1_0_0_78-hive-plugin.x86_64  1.2.0.3.1.0.0-78           @HDP-3.1-repo-1
ranger_3_1_0_0_78-kafka-plugin.x86_64 1.2.0.3.1.0.0-78           @HDP-3.1-repo-1
ranger_3_1_0_0_78-yarn-plugin.x86_64  1.2.0.3.1.0.0-78           @HDP-3.1-repo-1
snappy-devel.x86_64                   1.1.0-3.el7                @HDP-UTILS-1.1.0.22-repo-1
spark2_3_1_0_0_78.noarch              2.3.2.3.1.0.0-78           @HDP-3.1-repo-1
spark2_3_1_0_0_78-python.noarch       2.3.2.3.1.0.0-78           @HDP-3.1-repo-1
spark2_3_1_0_0_78-yarn-shuffle.noarch 2.3.2.3.1.0.0-78           @HDP-3.1-repo-1
tez_3_1_0_0_78.noarch                 0.9.1.3.1.0.0-78           @HDP-3.1-repo-1
zookeeper_3_1_0_0_78.noarch           3.4.6.3.1.0.0-78           @HDP-3.1-repo-1
zookeeper_3_1_0_0_78-server.noarch    3.4.6.3.1.0.0-78           @HDP-3.1-repo-1
```

## 4.2.根据检查出的服务进行卸载
```shell
#示例：
yum remove ambari*
yum remove smartsense-hst*

yum remove hadoop*
yum remove bigtop-jsvc*
yum remove hbase*
yum remove hdp-select*
yum remove hive*
yum remove kafka*
yum remove livy2*
yum remove phoenix*
yum remove ranger*
yum remove snappy-devel*
yum remove spark2*
yum remove tez*
yum remove zookeeper*
```