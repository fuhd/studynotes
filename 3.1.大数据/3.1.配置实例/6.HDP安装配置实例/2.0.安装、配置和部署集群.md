安装、配置和部署集群
================================================================================
## 1.启动Ambari服务器
在Ambari Server（`10.10.26.31`）主机上运行以下命令：
```shell
ambari-server start
```

## 2.登录Apache Ambari
地址：http://10.10.26.31:8080 

账号/密码：admin/admin

## 3.启动Ambari群集安装向导
1. 在Ambari Welcome页面中，选择Launch Install Wizard。

    ![安装向导](img/1.png)

2. 命名的集群

    ![命名的集群](img/2.png)

3. 选择版本

    ![选择版本1](img/3.png)

    ![选择版本2](img/4.png)

    注意：要勾选

4. 安装选项

    ![安装选项](img/5.png)

    **注意：这里的私钥文件要从Ambari server主机上复制到自己当前的工作机器上**。

5. 确认主机

    ![确认主机](img/6.png)

6. 选择服务

    ![选择服务1](img/7.png)

    ![选择服务2](img/8.png)

    当前选择了如下服务：
    + HDFS
    + YARN+MR2
    + Tez
    + Hive
    + HBase
    + Sqoop
    + Oozie
    + Zookeeper
    + Infra Solr
    + Ambari Metrics
    + Atlas
    + Kafka
    + Ranger
    + Ranger KMS
    + Spark2

7. 分配Masters

    ![分配Masters1](img/9.png)

    ![分配Masters2](img/10.png)

    | 服务 | 节点 |  | 服务 | 节点 |
    |:---- |:---- |:---|:--- |:--- |
    | **SNameNode** | server02 |  | **NameNode** | server01 |
    | **Timeline Service V1.5** | server02 |  | **Resource Manager** | server01 |
    | **Timeline Service V2.0 Reader** | server01 |  | **YARN Registry DNS** | server01 |
    | **History Service** | server02 |  | **Hive MetaStore** | server01 |
    | **HiveServer2** | server01 |  | **HBase Master** | server01 |
    | **Oozie Server** | server01 |  | **Zookeeper Server** | server2、server3、server4 |
    | **Infra Solr Instance** | server03 |  | **Metrics Collector** | server03 |
    | **Grafana** | server03 |  | **Atlas Metadata Server** | server03 |
    | **Kafka Broker** | server04 |  | **Log Search Server** | server03 |
    | **Ranger Usersync** | server04 |  | **Ranger Admin** | server04 |
    | **Ranger KMS Server** | server04 |  | **Activity Explorer** | server01 |
    | **HST Server** | server01 |  | **Activity Analyzer** | server01 |
    | **Spark2 History Server** | server01 |  |  |  |


8. 分配Slaves和客户端

    ![分配Slaves和客户端](img/11.png)

9. 自定义服务

    + 请提供这些服务的密码
        
        ![请提供这些服务的密码1](img/12.png)

        ![请提供这些服务的密码2](img/13.png)

    + 请为这些服务选择并配置相应的数据库

        **Hive**：
        ![请为这些服务选择并配置相应的数据库1](img/14.png)

        **OOZIE**：
        ![请为这些服务选择并配置相应的数据库2](img/15.png)

        **RANGER**：
        ![请为这些服务选择并配置相应的数据库3](img/16.png)

        **RANGER KMS**：
        ![请为这些服务选择并配置相应的数据库4](img/17.png)
        



    


    


