安装、配置和部署集群
================================================================================
## 1.启动Ambari服务器
在Ambari Server（`10.10.26.31`）主机上运行以下命令：
```shell
ambari-server start
```

## 2.登录Apache Ambari
地址：http://10.10.26.31:8080 

账号/密码：admin/admin

## 3.启动Ambari群集安装向导
1. **在Ambari Welcome页面中，选择Launch Install Wizard**

    ![安装向导](img/1.png)

2. **命名的集群**

    ![命名的集群](img/2.png)

3. **选择版本**

    ![选择版本1](img/3.png)

    ![选择版本2](img/4.png)

    注意：要勾选

4. **安装选项**

    ![安装选项](img/5.png)

    **注意：这里的私钥文件要从Ambari server主机上复制到自己当前的工作机器上**。

5. **确认主机**

    ![确认主机](img/6.png)

6. **选择服务**

    ![选择服务1](img/7.png)

    ![选择服务2](img/8.png)

7. **分配Masters**

    ![分配Masters1](img/9.png)

    ![分配Masters2](img/10.png)

8. **分配Slaves和客户端**

    ![分配Slaves和客户端](img/11.png)

9. **自定义服务**

    + **密码**
        
        ![密码1](img/12.png)

        ![密码2](img/13.png)

        **这里都统一设置成MyPass009@，必须字母加数字超过8个字符**

    + **数据库**

        **HIVE**：
        ![数据库1](img/14.png)

        **这里使用已有的MySQL数据库，相关帐号与库已创建好了！特别注意：连接到MySQL的URL一定要是非常完整的！！**

        **RANGER**：
        ![数据库2](img/15.png)

        ![数据库3](img/16.png)

        **这里使用已有的MySQL数据库，相关帐号与库实时创建**

        **RANGER KMS**：
        ![数据库4](img/17.png)

        ![数据库5](img/18.png)

        **这里使用已有的MySQL数据库，相关帐号与库实时创建**

    + **目录**

        ![目录1](img/19.png)

    + **帐号**

        ![帐号1](img/20.png)

    + **所有配置**

        ![所有配置1](img/21.png)

10. **Review**

    ![Review](img/22.png)

11. **安装、启动和测试**

    ![安装、启动和测试1](img/23.png)

    ![安装、启动和测试2](img/24.png)

12. **安装成功**

    ![安装成功](25.png)

## 4.可能出现的警告

### 4.1.Ranger警告
```
User:amb_ranger_admin credentials on Ambari UI are not in sync with Ranger
```
如果出现这种情况，要在Ambari的Ranger设置中保证 **amb_ranger_admin** 用户的密码与 **Ranger
登录界面** 中使用 **amb_ranger_admin**用户登录一致。如果出现这种情况可能登录到Ranger中修改
amb_ranger_admin用户的密码。

### 4.2.Atlas无法启动
```
Connection failed to http://server02.tythin.com:21000/api/atlas/admin/status (<urlopen error [Errno 111] Connection refused>)

内部异常表现为：

org.apache.hadoop.hbase.coprocessor.CoprocessorException: HTTP 404 Error: HTTP 404
```




    


    


