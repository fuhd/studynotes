完全卸载CDH
================================================================================
**注意：集群中每个节点都要执行**（server01~06）。

### 1.停止CDH所有服务
通过Cloudera Manager的 **web管理界面** 来停止CDH所有相关服务。

### 2.停止服务
```shell
systemctl stop cloudera-scm-server
systemctl stop service cloudera-scm-agent
```

### 3.卸载安装包
```shell
# 方案一
yum remove -y cloudera*
yum clean all
# 方案二
for f in `rpm -qa | grep cloudera`; do rpm -e ${f}; done
```

### 4.kill相关hadoop组件进程
```shell
for u in cloudera-scm flume hadoop hdfs hbase hive httpfs hue impala llama mapred oozie solr spark sqoop sqoop2 yarn zookeeper; do sudo kill $(ps -u $u -o pid=); done
```

### 5.干掉监督者supervisor进程
```shell
kill -9 $(pgrep -f supervisord)
```

### 6.卸载/var/run/cloudera-scm-agent/process
```shell
umount /var/run/cloudera-scm-agent/process
```

### 7.删除文件
```shell
rm -rf /etc/cloudera* /usr/share/cmf /var/log/cloudera* /var/lib/cloudera* /var/run/cloudera* /var/run/hadoop* /var/run/hdfs* /var/cache/yum/x86_64/6/cloudera*
```
```shell
rm -rf /var/lib/flume-ng /var/lib/hadoop* /var/lib/hue /var/lib/navigator /var/lib/oozie /var/lib/solr /var/lib/sqoop* /var/lib/zookeeper
```
```shell
rm -rf /var/lib/alternatives/beeline /var/lib/alternatives/flume* /var/lib/alternatives/hadoop* /var/lib/alternatives/hbase* /var/lib/alternatives/hdfs* /var/lib/alternatives/hive* /var/lib/alternatives/impala* /var/lib/alternatives/oozie* /var/lib/alternatives/pig* /var/lib/alternatives/spark* /var/lib/alternatives/mapred* /var/lib/alternatives/sqoop* /var/lib/alternatives/yarn* /var/lib/alternatives/zookeeper* /var/lib/alternatives/hue* /var/lib/alternatives/solr* /var/lib/alternatives/hcat*
```
```shell
rm -rf /usr/bin/hadoop* /usr/bin/zookeeper* /usr/bin/hbase* /usr/bin/hive* /usr/bin/hdfs /usr/bin/mapred /usr/bin/yarn /usr/bin/sqoop* /usr/bin/oozie  
```
```shell
rm -rf /etc/hadoop* /etc/zookeeper* /etc/hive* /etc/hue /etc/impala /etc/sqoop* /etc/oozie /etc/hbase* /etc/hcatalog
```
```shell
rm -rf /tmp/.scm_prepare_node.lock /tmp/cmflistener-std*  
rm -rf /dfs /yarn
rm -rf /opt/cloudera/parcel-cache /opt/cloudera/parcels /opt/cloudera/parcel-repo
```

### 8.清除数据库数据
```shell
drop database cmf
drop database amon
drop database hive
```

到这里卸载完成！
