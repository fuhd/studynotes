安装MySQL
================================================================================
**CDH5.14.1** 支持MySQL5.7，那这里我们就选择 **MySQL5.7**。我们选择在 **server02** 上安装MySQL。

### 1.安装MySQL
**参见**：MySQL/来自互联网资料/在CentOS7中安装配置MySQL5.7.md

CentOS通过yum安装（RPM分发进行安装）MySQL的几个人默认目录如下：

| 目录 | 目录内容 |
| :------------- | :------------- |
| /usr/bin | 客户端程序和脚本 |
| /usr/sbin | mysqld服务器 |
| /var/lib/mysql | 日志文件，数据库文件 |
| /usr/share/mysql | 错误消息和字符集文件 |
| /etc/my.cnf | 配置文件 |

### 2.修改MySQL默认目录

#### 2.1.停止MySQL服务
```shell
systemctl stop mysqld
```

#### 2.1.建立目标存放目录
```shell
mkdir /data2
```

#### 2.2.拷贝文件
```shell
cp -R /var/lib/mysql /data2/
```

### 3.修改MySQL配置文件
编辑 **/etc/my.cnf** 的 **[mysqld]** 下的：
```shell
# 以前的配置用#进行注释了
datadir=/data2/mysql
socket=/data2/mysql/mysql.sock
```
另增加：
```shell
[mysql]
socket=/data2/mysql/mysql.sock
```
如果不增加这个配置会报错：
```
Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock
```

### 4.设置/data2/下mysql文件夹的属主和权限
```shell
chown -R mysql:mysql /data2/mysql
```

### 5.启动MySQL
```shell
systemctl start mysqld
```

### 6.创建三个数据库

#### 6.1.创建Hive使用的数据库
```shell
create database hive character set utf8 collate utf8_general_ci;
grant all on hive.* to 'hive'@'%' identified by 'HzMyPass29';
```

#### 6.2.创建hue使用的数据库
```shell
create database hue character set utf8 collate utf8_general_ci;
grant all on hue.* to 'hue'@'%' identified by 'HzMyPass38';
```

#### 6.3.创建oozie使用的数据库
```shell
create database oozie character set utf8 collate utf8_general_ci;
grant all on oozie.* to 'oozie'@'%' identified by 'HzMyPass47';
```
