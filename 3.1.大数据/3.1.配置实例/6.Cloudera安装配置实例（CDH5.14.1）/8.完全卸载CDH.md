完全卸载CDH
================================================================================
### 1.停止CDH所有服务
通过Cloudera Manager的 **web管理界面** 来停止CDH所有相关服务。

### 2.卸载Cloudera Manager

#### 2.1.第一步
进入 **server01** 节点，执行：
```shell
/usr/share/cmf/uninstall-cloudera-manager.sh
```
根据显示的 **图形界面** 进行操作卸载。

#### 2.2.第二步
进入 **server02~06** 节点，执行：
```shell
systemctl stop cloudera-scm-agent.service
```

#### 2.3.第三步
在 **server01~06** 执行清除工作：
```
umount /var/run/cloudera-scm-agent/process
```
如果出现：
```
umount /var/run/cloudera-scm-agent/process

umount: /run/cloudera-scm-agent/process：目标忙。
        (有些情况下通过 lsof(8) 或 fuser(1) 可以
         找到有关使用该设备的进程的有用信息)
```
可以使用如下命令：
```shell
fuser -mv /var/run/cloudera-scm-agent/process
```
找到相关进程：
```
fuser -mv /var/run/cloudera-scm-agent/process

                     用户     进程号 权限   命令
/run/cloudera-scm-agent/process:
                     root     kernel mount /run/cloudera-scm-agent/process
                     root        607 F.... python
                     cloudera-scm  15792 ..c.. java
```
杀掉进程：
```shell
kill -9 607
```
然后再执行：**umount /var/run/cloudera-scm-agent/process**。

#### 2.4.第四步
进入 **server01** 节点，执行：
```shell
rm -rf /usr/share/cmf /var/lib/cloudera* /var/cache/yum/x86_64/6/cloudera* /var/log/cloudera* /var/run/cloudera* /etc/cloudera* 
```








































ddd
