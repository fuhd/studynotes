配置Hadoop
=================================================================================
```
说明：
我们计划配置Hadoop集群（三个节点：server1（172.16.177.168）,server2（172.16.177.166）,server3（172.16.177.167））
，下面以其中一台（server2作为master节点）作为演示。

server2：namenode，资源管理器，datanode1
server1：辅助namenode，datanode2
server3: namenode（备），datanode3
```

### 1.在hadoop-env.sh文件中设置HADOOP_CONF_DIR属性
在 **$HADOOP_HOME/etc/hadoop/hadoop-env.sh** 中，包括：
```shell
export HADOOP_CONF_DIR=${HADOOP_CONF_DIR:-"/etc/hadoop"}
```
也就是说，**默认情况下，Hadoop会在/etc/hadoop目录下查找配置文件**。
```
说明：
应该不是$HADOOP_HOME/etc/hadoop目录，要不然不会有前面第一个斜杠（/etc/hadoop）。是不是？？是不是？？？？
```
**第一步，为了避免歧义，明确指定绝对路径**：
```shell
export HADOOP_CONF_DIR=/etc/hadoop
```

**第二步，在/etc目录下创建hadoop目录**：
```shell
$ sudo mkdir -p /etc/hadoop
```

**第三步，让/etc/hadoop目录属于hadoop用户与hadoop用户组**：
```shell
$ sudo chown -R hadoop:hadoop /etc/hadoop/
```

### 2.在hadoop-env.sh文件中设置JAVA_HOME属性
```shell
export JAVA_HOME=/opt/jdk1.8.0_151
```

### 3.在hadoop-env.sh文件中设置HADOOP_HEAPSIZE属性
默认为1000MB，代表守护进程的堆内存大小，**暂时可以不用配置**。

### 4.在hadoop-env.sh文件中设置HADOOP_NAMENODE_OPTS属性
目前，HADOOP_NAMENODE_OPTS的默认配置是：
```shell
export HADOOP_NAMENODE_OPTS="-Dhadoop.security.logger=${HADOOP_SECURITY_LOGGER:-INFO,RFAS} -Dhdfs.audit.logger=${HDFS_AUDIT_LOGGER:-INFO,NullAppender} $HADOOP_NAMENODE_OPTS"
```
namenode需要的内存要大些，这里暂时设置为2000MB，加入配置 **-Xmx2000m**：
```shell
export HADOOP_NAMENODE_OPTS="-Xmx2000m -Dhadoop.security.logger=${HADOOP_SECURITY_LOGGER:-INFO,RFAS} -Dhdfs.audit.logger=${HDFS_AUDIT_LOGGER:-INFO,NullAppender} $HADOOP_NAMENODE_OPTS"
```
































dddd
