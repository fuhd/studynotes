硬件的选择
===================================================================================
kafka本身对硬件没有特别要求，它可以运行在任何系统上。不过，如果比较关注性能，那么就需要考虑几个会
影响整体性能的因素，**磁盘吞吐量和容量、内存、网络和CPU**。

## 磁盘吞吐量
**生产者客户端的性能直接受到服务器端磁盘吞吐量的影响。生产者生成的消息必须被提交到服务器保存，大多
数客户端在发送消息之后会一直等待，直到至少有一个服务器确认消息已经成功提交为止，也就是说，磁盘写入
速度越快，生成消息的延迟就越低**。

在考虑硬盘类型对磁盘吞吐量的影响时，是选择传统的机械硬盘（HDD）还是固态硬盘（SSD）。我们可以很容
易地作出决定。**固态硬盘的查找和访问速度都很快，提供了最好的性能。机械硬盘更便宜，单块硬盘容量也更
大。在同一个服务器上使用多个机械硬盘，可以设置多个数据目录，或者把它们设置成磁盘阵列，这样可以提升
机械硬盘的性能**。其他方面的因素，比如磁盘特定的技术（串行连接存储技术或SATA），或者磁盘控制器的质
量，都会影响吞吐量。

## 磁盘容量
**需要多大的磁盘容量取决于需要保留的消息数量。如果服务器每天会收到1TB消息，并且保留7天，那么就需要
7TB的存储空间，而且还要为其他文件提供至少10％额外空间。除此之外，还需要提供缓冲区，用于应付消息流
量的增长和波动**。

在决定扩展kafka集群规模时，存储容量是一个需要考虑的因素。**通过让主题拥有多个分区，集群的总流量可以
被均衡到整个集群，而且如果单个broker无法支撑全部容量，可以让其他broker提供可用的容量。存储容量的选
择同时受到集群复制策略的影响**。

## 内存
除了磁盘性能外，服务器端可用的内存容量是影响客户端性能的主要因素。**磁盘性能影响生产者，而内存影响
消费者。消费者一般从分区尾部读取消息，如果有生产者存在，就紧跟在生产者后面。在这种情况下，消费者读
取的消息会直接存放在系统的页面缓存里，这比从磁盘上重新读取要快得多**。

**运行kafka的JVM不需要太大的内存，剩余的系统内存可以用作页面缓存，或者用来缓存正在使用中的日志片段。
这也就是为什么不建议把kafka同其他重要的应用程序部署在一起的原因，它们需要共享页面缓存，最终会降低
kafka消费者的性能**。






