Kafka登场
================================================================================
Kafka就是为了解决上述问题而设计的一款基于发布与订阅的消息系统。它一般被称为“**分布式提交日志**“
或者”**分布式流平台**“。Kafka的数据分布在整个系统里，**具备数据故障保护和性能伸缩能力**。

## 1.消息和批次
Kafka的数据单元被称为消息。**消息由字节数组组成**，所以对于Kafka来说，**消息里的数据没有特别的
格式或含义。消息可以有一个可选的元数据，也就是键。键也是一个字节数组，与消息一样，对于Kafka来说
也没有特殊的含义。当消息以一种可控的方式写入不同的分区时，会用到键。最简单的例子就是为键生成一个一
致性散列值，然后使用散列值对主题分区数进行取模，为消息选取分区。这样可以保证具有相同键的消息总是
被写到相同的分区上**。

为了提高效率，消息被分批次写入Kafka。**批次就是一组消息，这些消息属于同一个主题和分区**。如果每
一个消息都单独穿行于网络，会导致大量的网络开销，**把消息分成批次传输可以减少网各开销**。不过，这
要在时间延迟和吞吐量之间作出权衡：批次越大，单位时间内处理的消息就越多，单个消息的传输时间就越长。
**批次数据会被压缩，这样可以提升数据的传输和存储能力，但要做更多的计算处理**。

## 2.模式 



