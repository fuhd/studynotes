初识Kafka
===================================================================================
## 1.发布与订阅消息系统
发布与订阅系统一般会有一个 **broker**，也就是发布消息的中心点。

## 2.Kafka登场
Kafka是一款基于发布与订阅的消息系统。它一般被称为“**分布式提交日志**”或者“**分布式流平台**”。

### 2.1.消息和批次
Kafka的数据单元被称为 **消息**，消息由 **字节数组** 组成。消息可以有一个 **可选的元数据**，也就是 
**键**。键也是一个 **字节数组**。

当消息以一种可控的方式 **写入不同的分区时，会用到键**。最简单的例子就是为键生成一个 **一致性散列值**，
然后 **使用散列值对主题分区数进行取模，为消息选择分区**。

为了 **提高效率**，消息被 **分批次** 写入Kafka，批次就是一组消息。把消息分成批次传输可以 **减少网络
开销**。不过，这要在时间延迟和吞吐量之间作出权衡，**批次越大，单位时间内处理的消息就越多，单个消息
的传输时间就越长**。批次数据会被 **压缩**，这样可以提升数据的传输和存储能力，**但要做更多计算处理**。

### 2.2.模式
Kafka的许多开发者喜欢使用 **Apache Avro**，它最初是为Hadoop开发的一款 **序列化框架**。Avro提供了
一种紧凑的序列化格式，**模式和消息体是分开的**，当模式发生变化时，不需要重新生成代码。它还 **支持强
类型和模式进化**，其版本既向前兼容，也向后兼容。






