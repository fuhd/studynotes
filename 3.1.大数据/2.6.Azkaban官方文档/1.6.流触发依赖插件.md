流触发依赖插件
================================================================================
## 1.基于Kafka事件的触发器
目前，Azkaban支持通过 **调度Flow** 或 **Ajax API** 来启动Flow。但是，它们是有限的，因为有时
需要根据需要自动执行Job。事件触发器是Azkaban引入的新功能。它定义了一种新的触发Flow范式：**触发
Kafka事件到达时的Flow**。此概念使用户能够定义Flow所依赖的事件。一旦所有事件都准备就绪，将触发工
作流程。

Apache Kafka是一个发布和订阅数据流系统。通过使用Kafka，我们在Kafka事件有效负载上进行正则表达
式匹配。通过包含逻辑匹配，仅当整个有效负载包含用户预定义的正则表达式模式时，才会将依赖关系标记为
满足。

## 2.在Azkaban上部署事件触发器入门
Azkaban构建使用Gradle（使用gradlew运行时自动下载，这是Gradle包装器）并且需要Java 8或更高版
本。

### 2.1.构建
以下命令在`Linux`、`OS X`等`*nix`平台上运行。要构建`Flow Trigger Dependency Plugin`，我
们需要在`/az-flow-trigger-dependency-type/kafka-event-trigger`目录中运行注释。
```shell
# Build Azkaban
../../gradlew build

# Clean the build
../../gradlew clean

# Build without running tests
../../gradlew build -x test
```
这些都是标准的Gradle命令。有关详细信息，请查看Gradle文档。

### 2.2.Server配置
gradlew命令可以帮助您构建胖JAR。之后，您需要在`conf`中指定`plugin.dir`。以solo-server
为例，覆盖solo-server `conf`目录下`azkaban.properties`文件中运行时参数的
`azkaban.dependency.plugin.dir`属性。此属性需要设置为包含放置Event-Trigger JAR文件的位置。

### 2.3.数据库配置
必须在`conf/azkaban.private.properties`中定义以下4个属性。对于基于solo-server的用例。

| 属性 |
|:----- |
| `mysql.user` |
| `mysql.password` |
| `org.quartz.dataSource.quartzDS.user` |
| `org.quartz.dataSource.quartzDS.password` |




