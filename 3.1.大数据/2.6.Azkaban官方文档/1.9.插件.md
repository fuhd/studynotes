插件
================================================================================
Azkaban设计为模块化。我们可以插入代码来添加查看器页面或以可自定义的方式执行作业。这些页面将描述
可以从 [下载页面](https://azkaban.readthedocs.io/en/latest/%7B%7B%20site.home%20%7D%7D/downloads.html)
下载的azkaban插件，以及如何通过创建自己的插件或扩展现有插件来扩展Azkaban。
```
注意：上面设置的下载页面好像不能下载。
```

## 1.HadoopSecurityManager
Azkaban最常见的采用方式是Hadoop等大数据平台。Azkaban的jobtype插件系统允许对这些系统提供最灵
活的支持。

Azkaban能够支持所有Hadoop版本，并支持Hadoop安全功能；Azkaban能够在同一个实例上支持各种不同版
本的生态系统组件，例如不同版本的pig，hive。

实现此目标的常见模式是使用 **HadoopSecurityManager** 类，该类处理与Hadoop集群的通信并以安全
的方式处理Hadoop安全性。

### 1.1.Hadoop安全性与Kerberos，Hadoop令牌
在企业生产环境中使用Hadoop时，建议打开其安全功能，以保护您的数据并防止出错。

#### 1.1.1.Kerberos身份验证
Apache Hadoop提供的最常见身份验证是通过Kerberos，它需要KDC来验证用户和服务。

用户可以通过用户名/密码使用KDC进行身份验证或使用密钥表。KDC将tgt分发给经过身份验证的用户。Hadoop
服务（例如namenode和jobtracker）可以使用此tgt来验证这是经过身份验证的用户。

#### 1.1.2.Hadoop令牌
一旦用户使用Hadoop服务进行身份验证，Hadoop就会向用户发出令牌，以便其内部服务不会充斥KDC。有关
令牌的说明，请参见 [此处](https://hortonworks.com/blog/the-role-of-delegation-tokens-in-apache-hadoop-security/)。

#### 1.1.3.Hadoop SecurityManager
对于人类用户，可以使用kinit命令对KDC进行身份验证。但是对于像其他用户那样代表运行作业的Azkaban等
调度程序，它需要获取将由用户使用的令牌。特定的Azkaban作业类型应该使用HadoopSecurityManager类
来处理这个问题。

例如，当Azkaban加载pig作业类型时，它将启动一个HadoopSecurityManager，该HadoopSecurityManager
使用所需的KDC和Hadoop Cluster进行身份验证。pig作业类型conf应指定与不同服务进行通信所需的令牌。
至少它需要来自namenode和jobtracker的令牌。当一个pig作业启动时，它将转到HadoopSecurityManager
以获取所有这些令牌。当用户进程完成时，pig作业类型再次调用HadoopSecurityManager来取消所有这些
令牌。

### 1.2.所有Hadoop集群的通用设置
当用户程序想要与Hadoop集群通信时，它需要知道namenode和jobtracker的位置。它还需要知道如何使用
它们进行身份验证。这些信息都在Hadoop配置文件中，通常位于`$HADOOP_HOME/conf`中。因此，此conf
目录以及hadoop-core jar需要位于azkaban executor服务器类路径上。

如果您使用的是使用HCat作为其Metastore的Hive，那么您还需要在类路径上使用相关的hive jar和hive 
conf。

#### 1.2.1.Native Library
您的Hadoop平台很可能依赖于某些本地库，这应该在azkaban executor服务器的java.library.path中
指定。

#### 1.2.2.temp dir
除此之外，Hadoop上的许多工具，如Pig/Hive/Crunch都将文件写入临时目录。默认情况下，它们都转到
`/tmp`。当许多作业同时运行时，这可能会导致操作问题。因此，您可能希望通过将`java.io.tmp.dir`设
置为其他目录来更改此设置。

### 1.3.设置与非安全Hadoop集群通信
如果您刚开始使用Hadoop，很可能您的Hadoop没有kerberos身份验证。根据您是否要将所有内容作为azkaban
用户（或任何用户启动azkaban执行程序服务器）运行，您可以执行以下设置：
+ 如果您使用名为azkaban的用户启动执行程序服务器，并且希望在Hadoop上以azkaban的身份运行所有作
业，只需设置`azkaban.should.proxy = false`与`obtain.binary.token=false`。
+ 如果您使用名为azkaban的用户启动了执行程序服务器，但是您希望将Hadoop作业作为其各个用户运行，
则需要设置`azkaban.should.proxy = true`和`obtain.binary.token = false`。

### 1.4.设置与安全Hadoop集群通信

