示例：主-从应用
================================================================================
在分布式系统设计中一个得到广泛应用的架构：**主/从（master-worker）架构**。如图：

![主-从示例](img/a.jpg)

遵循这个架构的一个重要例子是 **HBase**————一个Google的数据存储系统（**BigTable**）模型的实
现。

一般在这种构架中，主节点进程负责跟踪从节点状态和任务的有效性，并分配任务到从节点。对ZooKeeper来
说，这个架构风格具有代表性，阐述了大多数流行的任务，如 **选举主节点，跟踪有效的从节点，维护应用
元数据**。

要实现主/从模式的系统，我们必须解决以下三个关键问题：
+ **主节点崩溃**：如果主节点发生错误并失效，系统将无法分配新的任务或重新分配已失败的任务。
+ **从节点崩溃**：如果从节点崩溃，已分配的任务将无法完成。
+ **通信故障**：如果主节点和从节点之间无法进行信息交换，从节点将无法得知新任务分配给它。

## 1.主节点失效
**主节点失效时，我们需要有一个备份主节点（backup master）。当主要主节点（primary master）崩
溃时，备份主节点接管主要主节点的角色，进行故障转移，然而，这并不是简单开始处理进入主节点的请求。
新的主要主节点需要能够恢复到旧的主要主节点崩溃时的状态。对于主节点状态的可恢复性，我们不能依靠从
已经崩溃的主节点来获取这些信息，而需要从其他地方获取，也就是通过ZooKeeper来获取**。








































eee
