ZooKeeper的使命
==========================================================================
多个独立的程序协同工作是一件非常困难的事情。开发这样的应用，很容易让很多开发人员陷入如何使多个程序协同工作的逻辑中，
最后导致没有时间更好地思考和实现他们自己的应用程序逻辑。

**`ZooKeeper`从文件系统`API`得到启发**，提供一组简单的`API`，使得开发人员可以实现 **通用的协作任务**，包括 **选举主节点、
管理组内成员关系、管理元数据** 等。`ZooKeeper`包括一个 **应用开发库** （主要提供`Java`和`C`两种语言的`API`）和一个用
**`Java`实现的服务组件。`ZooKeeper`的服务组件运行在一组专用服务器之上，保证了高容错性和可扩展性**。

**当你决定使用`ZooKeeper`来设计应用时，最好将应用数据和协同数据独立开**。

关于 **`ZooKeeper`这样的系统功能** 的讨论都围绕着一条主线：**它可以在分布式系统中协作多个任务。一个协作任务是指一个包含多个进程的任务。
这个任务可以是为了协作或者是为了管理竟争。协作意味着多个进程需要一同处理某些事情，一些进程采取某些行动使得其他进程可以继续工作**。
比如，**在典型的主-从（`master-worker`）工作模式中**，从节点处于空闲状态时会通知主节点可以接受工作，于是主节点就会分配任务给从节点。
**竟争则不同，它指的是两个进程不能同时处理工作的情况**，一个进程必须等待另一个进程。同样在主-从工作模式的例子中，我们想有一个主节点，但是很多
进程也许都想成为主节点，因此我们需要实现 **互斥排他锁（`mutual exclustion`）**。实际上，我们可以认为获取主节点身份的过程其实就是获取锁的
过程，获得主节点控制权锁的进程即主节点进程。

**协同并不总是采取像群首选举或者加锁等同步原语的形式。配置元数据也是一个进程通知其他进程需要做什么的一种常用方式**。比如，
在一个主-从系统中，从节点需要知道任务已经分配到它们。即使在主节点发生崩溃的情况下，这些信息也需要有效。

让我们看一些`ZooKeeper`的使用实例，以便更直观地理解其用处：
+ **`Apache HBase`**：`HBase`是一个通常与`Hadoop`一起使用的数据存储仓库。**在`HBase`中，`ZooKeeper`用于选举一个集群内的主节点，
以便跟踪可用的服务器，并保存集群的元数据**。
+ **`Apache Kafka`**：`Kafka`是一个基于发布-订阅（`pub-sub`）模型的消息系统。**其中`ZooKeeper`用于检测崩溃，实现主题（`topic`）的发现，
并保持主题的生产和消费状态**。
+ **`Apache Solr`**： `Solr`是一个企业级的搜索平台。`Solr`的分布式版本命名为`SolrCloud`，**它使用`ZooKeeper`来存储集群的元数据，
并协作更新这些元数据**。

当开发人员使用`ZooKeeper`进行开发时，开发人员设计的那些应用往往可以看成一组 **连接到`ZooKeeper`服务器端的客户端**，它们通过`ZooKeeper`的客户端
`API`连接到`ZooKeeper`服务器端进行相应的操作。**`ZooKeeper`的客户端`API`功能强大**，其中包括：
+ **保障强一致性，有序性和持久性**。
+ **实现通用的同步原语的能力**。 
+ **在实际分布式系统中，并发往往导致不正确的行为。`ZooKeeper`提供了一种简单的并发处理机制**。
```
注：ZooKeeper由雅虎研究院开发。
```

### ZooKeeper改变了什么
`ZooKeeper`之前的其他一些系统采用分布式锁管理器或者分布式数据库来实现协作。实际上，`ZooKeeper`也从这些系统中借鉴了很多概念。
但是，**`ZooKeeper`的设计更专注于任务协作，并不提供任何锁的接口或通用存储数据接口**。同时，`ZooKeeper`没有给开发人员强加任何
特殊的同步原语，使用起来非常灵活。

虽然我们也可以不使用`ZooKeeper`来构建分布式系统，但是 **使用`ZooKeeper`可以让开发人员更专注于其应用本身的逻辑而不是神秘的
分布式概念**。

### ZooKeeper不适用的场景
**`ZooKeeper`不适合用作海量数据存储**。另外在设计应用时，**最佳实践还是应该将应用数据和协同数据独立开**。

### 通过ZooKeeper构建分布式系统

 










