YARN告警
================================================================================
较新版本的Hadoop（包括HDP3）使用HBase作为时间线服务的后端。您可以使用外部HBase，也可以在Yarn
上运行系统HBase（默认设置）。

使用系统HBase时，您启动并运行时间轴服务器可能会遇到一个警报（在Ambari中）：
```
ATSv2 HBase Application

The HBase application reported a 'STARTED' state. Check took 1.207s
```
直接影响将是Oozie作业，以及一些其他作业。

我发现解决这个问题的解决方案如下：
1. 检查YARN日志（/var/log/hadoop-yarn/yarn/），看是否有异常需要解决。
2. 按照[HDP文档](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/data-operating-system/content/remove_ats_hbase_before_switching_between_clusters.html)中的描述清理hdfs ATS数据。
3. 清理zookeeper ATS数据（这里的例子是针对不安全的集群，你可能会有另一个针对kerberised集群的
znode）：`zookeeper-client rmr /atsv2-hbase-unsecure`。
4. 重启所有的YARN服务。
5. 有可能还要重启整个HDP与Ambari服务（重启机器？）。

清理hdfs和zookeeper的步骤将使您丢失ATS历史记录（即作业名称，时间，日志......），但您的实际数
据非常安全，其他任何内容都不会丢失。