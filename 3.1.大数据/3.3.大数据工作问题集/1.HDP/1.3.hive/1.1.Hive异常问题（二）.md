Hive异常问题（二）
================================================================================
## 问题描述
执行如下HiveQL语句，取UUID值时：
```sql
select regexp_replace(reflect("java.util.UUID", "randomUUID"), "-", "");
```
报如下错误：
```
Error: Error while compiling statement: FAILED: SemanticException UDF reflect is not allowed
```

## 原因
当通过HiveServer2（通过beeline，ODBC，JDBC连接）运行查询时，默认情况下反映UDF被列入黑名单，
因为它被发现存在安全风险。Reflect UDF默认被列入黑名单。可以通过如下语句查询：
```sql
set hive.server2.builtin.udf.blacklist;

hive.server2.builtin.udf.blacklist=reflect,reflect2,java_method,in_file
```
会显式出`reflect`被加入了黑名单！！

## 解决
可以通过Ambari管理界面进行修改。打开`Hive -> Configs -> Advanced -> Custom hive-site`，
添加属性：
```ini
#可以是任意值，比如：empty_blacklist
hive.server2.builtin.udf.blacklist=empty_blacklist
```
**再通过Ambari重启Hive服务**。