企业（市场主体）画像与分析模型建设技术方案
====================================================================================
### 1.什么是企业（市场主体）画像

![企业（市场主体）画像](img/p1.jpg)

企业（市场主体）画像就是把企业（市场主体）信息标签化，画像的核心工作就是为企业（市场主体）打标签。比如：
+ IT企业
+ 缴税大户
+ ...

### 2.为什么要对企业（市场主体）画像
通过分析模型对企业（市场主体）真实数据的全方位多维度的分析，提取出企业（市场主体）特征，并以 **标签＋权重** 的形式标注，
方便后续的分析或决策。
+ **标签**：表征了特征内容
+ **权重**：表示指数、需求度、可信度、概率等等

### 3.如何构建用户画像
+ 人工定制标签规则（分析模型）
+ 计算机根据标签规则（分析模型）提取 **标签** 与 **权重**

### 4.标签提取过程
```                                  
    企业（市场主体）数据   =====>   分析模型   =====>   标签 与 权重   
                         (输入)             (输出)  
```
与标签、权重相关的关键项：
+ **时间**
+ **企业（市场主体）**
+ **事件**
+ **内容**

分析模型举例：
```
    例如，企业经营异常

    分值 ＝ 时间衰减因子 ＊ 事件权重 ＊ 事件次数

    三年内，企业经营地址变更3次；每增加1年，时间衰减因子减0.2，三年衰减到0.6；经营地址变更事件权重为：0.5

    企业经营异常分值 ＝ 0.6 ＊ 0.5 ＊ 3 ＝ 0.9

    如果阈值为0.8，那么该企业可以打上企业经营异常标签
```

### 5.标签分类
+ **第一类：事实标签**————直接从原始数据中提取出，如市场主体类型（比如：外资企业）是原始数据中（**企业基本信息表**）的字段，可以直接提取为标签。
+ **第二类：模型标签**————通过原始数据、事实标签建立基本分析模型并提取出标签，如：年营业总收入 > 1亿，并且员工规模在2000人以上，提取为大型企业标签。
+ **第三类：预测标签（策略标签）**：通过对原始数据、事实标签、模型标签，使用一些分类、聚类、回归分析等算法得出预测性或决策性标签。

### 6.数据处理流程

#### 第一步：创建以企业（市场主体）为中心的数据仓库
+ 业务系统中结构化的数据通过`sqoop`ETL工具抽取到以`Hive`实现的数据仓库中。
+ 使用`NLP`技术对互联网数据（半结构化或非结构化）进行情感分析，以及提取关键词，并结构化存入`Hive`实现的数据仓库中。

#### 第二步：对数据仓库中的全量数据进行批处理，提取事实标签
对数据仓库中的全量数据进行批处理，提取事实标签，并存到`Hive`中的 **企业（市场主体）事实标签表** 中。
在这一过程中，我们 **只需要使用`HiveQL`来提取事实标签** 就可以了，然后再把提取与统计的结果 **导入到`Oracle（MySQL、MongoDB或HBase）`** 
供市场大脑相关系统查询。

#### 第三步：对数据仓库中的全量数据、事实标签表，通过分析模型分析，提取出模型标签
对数据仓库中的全量数据、事实标签表，通过分析模型分析，提取出模型标签，并存到`Hive`中的 **企业（市场主体）模型标签表** 中。
在这一过程中，我们也 **只需要使用`HiveQL`来提取模型标签** 就可以了，然后再把提取与统计的结果 **导入到`Oralce（MySQL、MongoDB或HBase）`** 
供市场大脑相关系统查询。

#### 第四步：对数据仓库中的全量数据、事实标签表、模型标签表，通过分类、聚类、回归分析等算法来提取预测标签（策略标签）
这个过程中，使用许多机器学习相关算法，对市场主体的数据分析已经进入深层次，**目前在大半年内做不到（暂不实现）**！！！

#### 第五步：对企业（市场主体）基本信息、风险排察信息、预警分析信息的查询
这个过程，主要是市场大脑相关系统对`Oracle（MySQL、MongoDB或HBase）`的查询统计过程。

### 7.根据该图可以对标签做更细致的分类

![标签分类](img/p2.png)









