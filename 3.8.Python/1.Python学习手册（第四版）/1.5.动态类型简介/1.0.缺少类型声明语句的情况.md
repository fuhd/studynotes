缺少类型声明语句的情况
================================================================================
到现在为止，**我们使用变量时，都没有声明变量的存在和类型，但变量还可以工作**。如，在交互会话模式
或是程序文件中，当输入`a = 3`时，Python怎么知道那代表了一个整数呢？在这种情况下，Python怎么知
道`a`是什么？

一旦你开始问这样的问题，就已经进入了 **Python动态类型模型** 的领域。**在Python中，类型是在运行
过程中自动决定的，而不是通过代码声明。这意味着没有必要事先声明变量**。

## 1.变量、对象和引用
就像本书已使用过的很多例子一样，当在Python中运行赋值语句`a = 3`时，即使没有告诉Python将`a`作
为一个变量来使用，或者没有告诉它`a`应该作为一个整数类型对象，但一样也能工作。在Python语言中，这
些都会以一种非常自然的方式完成，就像下边这样：
+ **变量创建**：**一个变量（也就是变量名），就像`a`，当代码第一次给它赋值时就创建了它**。之后的
赋值将会改变已创建的变量名的值。从技术上来讲，Python在代码运行之前先检测变量名，可以当成是最初的
赋值创建变量。
+ **变量类型**：变量永远不会有任何的和它关联的类型信息或约束。**类型的概念是存在于对象中，而不是
变量名中。变量原本是通用的，它只是在一个特定的时间点，简单地引用了一个特定的对象而已**。
+ **变量使用**：**当变量出现在表达式中时，它会马上被当前引用的对象所代替 ，无论这个对象是什么类
型**。此外，所有的变量必须在其使用前明确地赋值，使用未赋值的变量会产生错误。

总而言之，**变量在赋值的时候才创建，它可以引用任何类型的对象，并且必须在引用之前赋值。这意味着，
不需要通过脚本声明所要使用的名字，但是，必须初始化名字然后才有更新它们**。

这种动态类型与传统语言的类型相比有明显的不同。刚入门时，**如果清楚地将变量名和对象划分开来，动态
类型是很容易理解的**。例如，当我们这样说时：
```python
>>> a = 3
```
至少从概念上来说，Python将会执行三个不同的步骤去完成这个请求。这些步骤反映了Python语言中所有赋
值的操作：
1. **创建一个对象来代表值`3`**。
2. **创建一个变量`a`，如果它还没有创建的话**。
3. **将变量与新的对象`3`相连接**。

**变量和对象保存在内存中的不同部分，并通过连接相关联**。变量总是连接到对象，并且绝不会连接到其他
变量上，但是更大的对象可能连接到其他的对象。

在Python中 **从变量到对象的连接称为引用**。也就是说，**引用是一种关系，以内存中的指针的形式实
现**。一旦变量被使用（也就是说被引用），Python自动跟随这个变量到对象的连接。这实际上比术语所描述
的要简单得多。以具体的术语来讲：
+ **变量是一个系统表的元素，拥有指向对象的连接的空间**。
+ **对象是分配的一块内存，有足够的空间去表示它们所代表的值**。
+ **引用是自动形成的从变量到对象的指针**。

至少从概念上讲，在脚本中，每一次通过运行一个表达式生成一个新的值，Python都创建一个新的对象（换言
之，一块内存）去表示这个值。**从内部来看，作为一种优化，Python缓存了不变的对象并对其进行复用**。
但是，从逻辑的角度看，这工作起来就像每一个表达式结果的值都是一个不同的对象，而每一个对象都是不同
的内存。

从技术上来讲，**对象有更复杂的结构而不仅仅是有足够的空间表示它的值那么简单。每一个对象都有两个标
准的头部信息：一个类型标志符去标识这个对象的类型，以及一个引用的计数器，用来决定是不是可以回收这
个对象**。

## 2.类型属于对象，而不是变量
为了理解对象类型是如何使用的，请看当我们对一个变量进行多次赋值后的结果：
```python
>>> a = 3
>>> a
3
>>> a = 'spam'
>>> a
'spam'
```
这不是典型的Python代码，但是它是可行的。`a`刚开始是一个整数，然后变成一个字符串。**这个例子对于
C程序员来说，可能看起来特别奇怪**，因为当我们说`a = 'spam'`时，`a`的类型似乎从整数变成了字符串。

事实并非如此，在Python中，情况很简单：**变量名没有类型**。就像前边所说的，**类型属于对象，而不
是变量名**。实际上，**我们并没有改变变量`a`的类型，只是让变量引用了不同类型的对象而已**。实际上，
Python的变量就是在特定的时间引用了一个特定的对象。

从另一方面讲，**对象知道自己的类型。每个对象都包含了一个头部信息，其中标记了这个对象的类型**。例如，
整数对象3，包含了值3以及一个头部信息，告诉Python，这是一个整数对象（从严格意义上讲，一个指向`int`
的对象的指针）。`spam`字符串的对象的标志符指向了一个字符串类型（叫做`str`）。**因为对象记录了它们
的类型，变量就没有必要了**。

## 3.对象的垃圾收集
例如，在下边的语句中，对象3发生了什么变化？
```python
>>> a = 3
>>> a = 'spam'
```
答案是，在Python中，**每当一个变量名被赋予了一个新的对象，之前的那个对象占用的空间就会被回收（
如果它没有被其他的变量名或对象所引用的话）。这种自动回收对象空间的技术叫做垃圾收集**。

在内部，Python是这样来实现这一功能的：**它在每个对象中保持了一个计数器，计数器记录了当前指向该
对象的引用的数目。一旦（并精确在同一时间）这个计数器被设置为0，这个对象的内存空间就会自动回收**。
