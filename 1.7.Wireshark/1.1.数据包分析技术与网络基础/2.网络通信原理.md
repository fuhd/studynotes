网络通信原理
===========================================================================
### 协议
常见的网络协议包括 **传输控制协议（`TCP`）、互联网协议（`IP`）、地址解析协议（`ARP`）和动态主机配置协议（`DHCP`）**。
网络协议帮助我们定义如何路由数据包，如何发起一个连接，以及如何确认收到的数据。一个网络协议可以非常简单，
也可能非常复杂，这取决于它的功能。

### 七层OSI参考模型
**`OSI`模型** 将网络通信过程分为 **`7`** 个不同层次：**应用层、表示层、会话层、传输层、网络层、数据链路层、物理层**。

OSI参考模型中的每层都具有特定功能。具体如下：

#### 应用层（第7层）
OSI参考模型的最上层，**为用户访问网络资源提供一种手段**。这通常是唯一一层能够由最终用户看到的协议，
因为它提供的接口是最终用户所有网络活动的基础。

#### 表示层（第6层）
这一层 **将接收到的数据转换成应用层可以读取的格式。在表示层完成的数据编码与解码取决于发送与接收数据的应用层协议**。
表示层同时进行用来保护数据的多种 **加密与解密** 操作。

#### 会话层（第5层）
**这一层管理两台计算机之间的对话（会话），负责在所有通信设备之间建立、管理和终止会话连接**。会话层还负责以 **全双工** 或者
**半双工** 的方式来创建会话连接，在通信主机间礼貌地关闭连接，而不是粗暴地直接丢弃。

#### 传输层（第4层）
**传输层的主要目的是为较低层提供可靠的数据传输服务。通过流量控制、分段/重组、差错控制等机制，传输层确保网络数据
端到端的无差错传输**。因为确保可靠的数据传输极为烦琐，因此OSI参考模型将其作为完整的一层。传输层同时提供了面 **向连接**
和 **无连接** 的网络协议。**某些防火墙** 和 **代理服务器** 也工作在这一层。

#### 网络层（第3层）
**这一层负责数据在物理网络中的路由转发，是最复杂的OSI层之一**。它除了 **负责网络主机的逻辑寻址**（例如通过一个`IP`地址）外，
还 **处理数据包分片** 和一些情况下的错误检测。**路由器** 工作在这一层上。

#### 数据链路层（第2层）
**这一层提供了通过物理网络传输数据的方法，其主要目的是提供一个寻址方案，可用于确定物理设备（例如`MAC`地址）**。
**网桥** 和 **交换机** 是工作在数据链路层的物理设备。

#### 物理层（第1层）
`OSI`参考模型的底层是 **传输网络数据的物理媒介**。这一层定义了所有使用的网络硬件设备的物理和电气特性，包括电压、
集线器、网络适配器、中继器和线缆规范等。物理层建立和终止连接，并提供一种共享通信资源的方法，将数字信号转换成模拟
信号传输，并反过来将接收的模拟信号转换回数字信号。

### 数据封装
`OSI`参考模型不同层次上的协议在数据封装的帮助下进行通信传输。**协议栈中的每层协议都负责在传输数据上增加一个协议
头部或尾部，其中包含了使协议栈之间能够进行通信的额外信息**。例如，当传输层从会话层接收数据时，它会在将数据传递到下
一层之前，增加自己的头部信息数据。 

数据封装过程将创建一个协议数据单元（`PDU`），其中包括正在发送的网络数据，以及所有增加的头部与尾部协议信息。
随着网络数据沿着`OSI`参考模型向下流动，`PDU`逐渐变化和增长，各层协议均将其头部或尾部信息添加进去，直到物理层时达到其
最终形式，并发送给目标计算机。接收计算机收到`PDU`后，沿着`OSI`参考模型往上处理，逐层剥去协议头部和尾部，当`PDU`到达
`OSI`参考模型的最上层时，将只剩下原始传输数据。

### 网络硬件

#### 集线器
集线器一般是提供了多个`RJ-45`端口的机盒。集线器从非常小的4端口的设备，到企业环境中安装机架设计的48端口机盒设备，
变化很大。

**因为集线器会产生很多不必要的网络流量，并仅在半双工模式下运行（不能在同一时间发送和接收数据），所以你通常不会在现代
或高密度的网络中再看到它们的身影（用交换机来代替）**。然而，你应该知道集线器的工作机制，因为它们对于数据包分析技术非常
重要。

一台 **集线器无非就是工作在OSI参考模型物理层上的转发设备。它从一个端口接收到数据包，然后将数据包传输（中继）到
设备的其他每个端口上**。



