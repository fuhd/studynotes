流是什么
================================================================================
**流是Java API的新成员，它允许你以声明性方式处理数据集合**（通过查询语句来表达，而不是临时编写
一个实现）。就现在来说，**你可以把它们看成遍历数据集的高级迭代器**。此外，**流还可以透明地并行处
理**，你无需写任何多线程代码了。下面两段代码都是用来返回低热量的菜肴名称的，并按照卡路里排序，一
个是用Java7写的，另一个是用Java8的流写的。

之前（Java7）：
```java
List<Dish> lowCaloricDishes = new ArrayList<>();
for(Dish d: menu) {
  if(d.getCalories() < 400) {
    //用累加器筛选元素
    lowCaloricDishes.add(d);
  }
}
//用匿名类对菜希排序
Collections.sort(lowCaloricDishes, new Comparator<Dish>(){
  public int compare(Dish d1, Dish d2) {
    return Integer.compare(d1.getCalories(), d2.getCalories());
  }
});
//处理排序后的菜名列表
List<String> lowCaloricDishesName = new ArrayList<>();
for(Dish d: lowCaloricDishes) {
  lowCaloricDishesName.add(d.getName());
}
```
在这段代码中，你用了一个“垃圾变量” lowCaloricDishes。它唯一的作用就是作为一次性的中间容器。在
Java8中，实现的细节被放在它本该归属的库里了。

之后（Java8）：
```java
import static java.util.Comparator.comparing;
import static java.util.stream.Collectors.toList;

List<String> lowCaloricDishesName = menu.stream()
    .filter(d -> d.getCalories() < 400)   //选出400卡路里以下的菜肴
    .sorted(comparing(Dish::getCalories)) //并按照卡路里排序
    .map(Dish::getName)                   //提取菜肴的名称
    .collect(toList());                   //将所有名称保存在List中
```
**为了利用多核架构并行执行这段代码，你只需要把stream()换成parallelStream()**：
```java
List<String> lowCaloricDishesName = menu.parallelStream()
    .filter(d -> d.getCalories() < 400)  
    .sorted(comparing(Dish::getCalories))
    .map(Dish::getName)                  
    .collect(toList());
```






























dd
