Java配置Spring Security
=====================================================================
Spring Security从`3.2`开始加入`java`配置支持。这让用户不使用任何`XML`，用更简单方式配置`Spring Security`。

### 基础的网站安全java配置
第一步是创建我们的java配置。**这个配置在你的应用程序中创建一个`springSecurityFilterChain`的`Servlet`的过滤器**
`springSecurityFilterChain`负责所有安全（例如:保护应用程序的`URL`，验证提交的用户名和密码，重定向到登陆的表单等等）。
你可以在下面找到大部分java配置项的例子: 
```java
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.*;
import org.springframework.security.config.annotation.authentication.builders.*;
import org.springframework.security.config.annotation.web.configuration.*;

@EnableWebSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
    @Autowired
	public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication().withUser("user").password("password").roles("USER");
	}
}
```
```
注：configureGlobal方法的名字不重要，重要的是只在一个被＠EnableWebSecurity，＠EnableGlobalMethodSecurity，
或者@EnableGlobalAuthentication注解的类中配置AuthenticationManagerBuilder，否则会有不可预知的后果。
```
真的没有太多配置，但它确实有很多功能：
+ 在你的应用程序中对每个`URL`进行验证；
+ 为你生成一个登陆表单；
+ 允许使用用户名`Username`和密码`Password`使用验证表单进行验证；
+ 允许用户登出；
+ `CSRF`攻击防范；
+ `Session`保护；
+ 安全`Header`集成；
+ 与`Servlet API`方法集成；

### AbstractSecurityWebApplicationInitializer
下一步是注册`springSecurityFilterChain`，可以通过`Spring`在`Servlet 3.0+`环境中对`WebApplicationInitializer`的支持
进行`java`配置。`Spring Security`提供了基本的抽象类：`AbstractSecurityWebApplicationInitializer`，
这可以确保`springSecurityFilterChain`已经被注册。我们使用`AbstractSecurityWebApplicationInitializer`
的不同方式取决于你是不是使用`Spring`框架。

### AbstractSecurityWebApplicationInitializer与Spring MVC一起使用
如果我们在应用程序的其他地方已经使用了`Spring`，那么我们已经有了一个`WebApplicationInitializer`用来载入`Spring`的配置。
所以 **我们应该使用已经存在的`ApplicationContext`注册`Spring Security`**。举个例子，如果我们使用`Spring MVC`，
我们的`SecurityWebApplicationInitialize`应该看起来和下面差不多：
```java
import org.springframework.security.web.context.*;

public class SecurityWebApplicationInitializer extends AbstractSecurityWebApplicationInitializer {

}
```