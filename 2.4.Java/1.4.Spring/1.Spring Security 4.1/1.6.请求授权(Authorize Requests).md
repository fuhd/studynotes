请求授权(Authorize Requests)
========================================================================
我们的案例目前使用的是`WebSecurityConfigurerAdapter`中默认的`HttpSecurity`对象的配置，该配置是要求应用中所有`url`
的访问都需要进行验证。**我们也可以自定义哪些`URL`需要权限验证**，哪些不需要。只需要在我们的`SecurityConfig`类中覆写
`configure(HttpSecurity http)`方法即可。
```java
protected void configure(HttpSecurity http ) throws Exception {
    http.authorizeRequests()                                                            //1
        .antMatchers( "/resources/**", "/signup" , "/about").permitAll()                //2
        .antMatchers( "/admin/**").hasRole("ADMIN" )                                    //3
        .antMatchers( "/db/**").access("hasRole('ADMIN') and hasRole('DBA')")           //4
        .anyRequest().authenticated()                                                   //5
        .and()
        // ...
        .formLogin();
}
```
1. `http.authorizeRequests()`方法有很多子方法，每个子匹配器将会按照声明的顺序起作用。
2. 指定用户可以访问的多个`url`模式。特别的，任何用户可以访问以"`/resources`"开头的`url`资源，或者等于"`/signup`"或`/about`。
3. 任何以"`/admin`"开头的请求限制用户具有"`ROLE_ADMIN`"角色。你可能已经注意的，**尽管我们调用的`hasRole`方法，
但是不用传入"`ROLE_`"前缀**。
4. 任何以"`/db`"开头的请求同时要求用户具有"`ROLE_ADMIN`"和"`ROLE_DBA`"角色。
5. 任何没有匹配上的其他的`url`请求，只需要用户被验证。

### 源码解读
在这个案例中我们调用了`antMatchers`方法来定义什么样的请求可以放过，什么样的请求需要验证。**`antMatchers`使用的是`Ant`风格的路径
匹配模式**。这个方法中定以在`AbstractRequestMatcherRegistry`中，我们查看一下这个方法的源码：
```java
public C antMatchers(String... antPatterns) {
    return chainRequestMatchers(RequestMatchers.antMatchers(antPatterns));
}
```
这个方法内部又调用了`RequestMatchers`对象的静态方法`antMatchers`方法，源码如下：
```java
public static List<RequestMatcher> antMatchers(HttpMethod httpMethod,String... antPatterns) {
    String method = httpMethod == null ? null : httpMethod.toString();
    List<RequestMatcher> matchers = new ArrayList<RequestMatcher>();
    for (String pattern : antPatterns) {
        matchers.add(new AntPathRequestMatcher(pattern, method));
    }
    return matchers;
}
```
可见最终返回的是一个`RequestMatcher`列表，事实上，`SpringSecurity`在工作过程中，就可以利用`RequestMatcher`对象来进行
路径匹配了。

**除了`ANT`风格的路径匹配模式，我们还可以使用基于正则表达式的路径匹配模式**，对应的方法是`regexMatchers(..)`。