初识Web应用安全的Java配置
=============================================================================
跟传统情况下，我们在过滤器中做权限验证类似，`Spring Secuirty`也是在`Filter`中进行权限验证。因此使用`Java`代码配置
`Spring Security`主要是这两个步骤：
1. 创建过滤器
2. 注册过滤器

### 第一步：创建过滤器
第一步，是使用`Java`代码创建`Spring Security`的配置。这段配置创建一个`Servlet Filter`：**springSecurityFilterChain**，
其负责应用中的所有安全，包括：保护应用的`URLS`，验证提交的`username`和`password`，重定向到登录页面等。通过以下代码可以看到使用
`Java`配置`Spring Security`的基础案例：
```java
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
     
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter{
    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication().withUser("user").password("password").roles("USER");
    } 
}
```
方法名`configureGlobal`是无关紧要的，重要的是在一个添加了 **@EnableWebSecurity, @EnableGlobalMethodSecurity** 
或者 **@EnableGlobalAuthentication** 注解的类里面，注入 **AuthenticationManagerBuilder**。

这段代码内容很少，但事实上已经做了很多的默认安全验证，包括（列出主要部分）：
1. 访问应用中的每个URL都需要进行验证；
2. 生成一个登陆表单；
3. 允许用户使用`username`和`password`来登陆；
4. 允许用户注销；
5. `CSRF`攻击拦截；
6. `Session Fixation`攻击；

### 注册过滤器
下一步是注册`springSecurityFilterChain`。这个可以借助`Spring3.1`引入的`WebApplicationInitializer`完成。`SpringSecurity`
提供了一个基类`AbstractSecurityWebApplicationInitializer`来确保`springSecurityFilterChain`被注册。对于如何使用
`AbstractSecurityWebApplicationInitializer`，这要依据`Spring Secuirty`是否项目中的唯一的`Spring`组件而有所不同。

