线程的优势和风险
============================================================================
### 多线程编程优势
+ **提高系统的吞吐率**。多线程编程使得一个进程中可以有多个并发的操作。例如，当一个线程因为`I/O`操作而处于等待时，
其他线程仍然可以执行其操作。
+ **提高响应性**。比如，对于`web`应用程序而言，一个请求的处理慢了并不会影响其他请求的处理。
+ **充分利用多核`CPU`资源**。实施恰当的多线程编程有助于我们充分利用设备的多核`CPU`资源，从而避免了资源浪费。
+ **最小化对系统资源的使用**。一个进程中的多个线程可以共享其所在进程所申请的资源（如内存空间），因此使用多个线程相比于
使用多个进程进行编程来说，节约了对系统资源的使用。
+ **简化程序的结构**。线程可以简化复杂应用程序的结构。

### 多线程编程的问题与风险
+ **线程安全问题**。多个线程共享数据的时候，如果没有采取相应的并发访问控制措施，那么就可能产生数据一致性问题。
+ **线程的生命特征问题**。一个线程从其创建到运行结束的整个生命周期会经历若干个状态。从单个线程的角度来看，`RUNNABLE`
状态是我们所期望的状态。但实际上，代码编写不适当可能导致某些线程一直处于等待其他线程释放锁的状态（`BLOCKED`状态），
即产生了 **死锁（`Dead Lock`）**。例如，线程`T1`拥有锁`L1`，并试图去获得锁`L2`，而此时线程`T2`拥有锁`L2`而试图去获得
锁`L1`，这就导致线程`T1`和`T2`一直处于等待对方释放锁而一直又得不到锁的状态。当然，一直忙碌的线程也可能会出现问题，
它可能面临 **活锁（`Live Lock`）** 问题，即一个线程一直在尝试某个操作但就是无法进展，这就好比室内窗户上的苍蝇向着阳光飞却一直
也没能飞出去一样。另外，线程是一种稀缺的计算资源，一个系统所拥有的`CPU`数量相比于该系统中存在的线程数量而言总是少之又少的。
某些情况可能出现 **线程饥饿** 的问题，即某些线程永远无法获取`CPU`执行的机会而永远处于`RUNNABLE`状态的`READY`子状态。
+ **上下文切换**。由于`CPU`资源的稀缺性，上下文切换可以看作是多线程编程的必然副产物，**它增加了系统的消耗**，不利于系统的吞吐率。
+ **可靠性**。多线程编程一方面可以有利于可靠性，例如某个线程意外提前终止了，但这并不影响其他线程继续其处理。另一方面，线程是进程的
一个组件，它总是存在于特定的进程中的，如果这个进程由于某种原因意外提前终止了，比如某个`Java`进程由于内存泄漏导致`JVM`奔溃而意外
终止了，那么该进程中所有的线程也就随之而无法继续运行。因此，**从提高软件的可靠性的角度来看，某些情况下可能要考虑多进程多线程的编程方式，
而非简单的单进程多线程方式**。



