数字证书详解
================================================================
数字证书集合了多种密码学算法：**自身带有公钥信息，可完成相应的加密/解密操作；同时，还带有数字签名，
可鉴别消息来源；且自身带有消息摘要信息，可验证证书的完整性；由于证书本身含有用户身份信息，因而具有认证性**。

数字证书具备常规加密/解密必要的信息，包含签名算法，可用于网络数据加密/解密交互，标识网络用户（计算机）身份。
数字证书为发布公钥提供了一种简便的途径，**其数字证书则成为加密算法以及公钥的载体**。依靠数字证书，
我们可以构建一个简单的加密网络应用平台。

数字证书（`Digital Certificates`）也称为电子证书，类似于我们生活中的身份证，用于标识网络中的用户（计算机）
身份。在现实生活中，我们的身份证需由公安机关的签发，而网络用户（计算机）的身份凭证则需由 **数字证书颁发认证机构**
（`Certificate Authority`, **`CA`**）签发，**只有经过CA签发的证书在网络中才具备可认证性**。

**`VeriSign`**（`http://www.verisign.com/`）、**`GeoTrust`**（`http://www.geotrust.com/`）和
**``Thawte**（`http://www.thawte.com/`）是国际权威数字证书颁发认证机构的“三巨头”。其中，**应用最为广泛的
是`VeriSign`签发的电子商务用数字证书**。

通常，这种由国际权威数字证书颁发认证机构颁发的数字证书需要向用户收取昂贵的申请和维护费用。但并不是所有的国际权威
数字证书颁发认证机构都收费，**CAcert**（`http://www.cacert.org/`）就是一个免费的数字证书颁发国际组织。
随着用户群的增大和颁发手段的可信性，这种免费的数字证书可信度越来越高。

**证书的签发过程实际上是对申请数字证书的公钥做数字签名**，证书的验证过程实际上是对数字证书的公钥做验证签名，
其中还包含证书的 **有效期验证**。

通过使用由`CA`颁发的数字证书，我们可以对网络上传输的数据进行 **加密/解密** 和 **签名/验证** 操作，确保数据的 **机密性、
完整性和抗否认性**。同时，**数字证书中包含的用户信息可以明确地标识交易实体身份，具有认证性，保证交易实体身份的真实性**，
从而保障网络应用的安全性。

实际上，数字证书是采用了 **公钥基础设施**（`Public Key Infrastructure,PKI`），使用了相应的加密算法确保网络
应用的安全性：
+ **非对称加密算法** 用于 **对数据进行加密/解密操作**，确保数据的机密性。
+ **数字签名算法对** 用于 **对数据进行签名/验证操作**，确保数据的完整性和抗否认性。
+ **消息摘要算法对** 用于 **对数子证书本身做摘要处理**，确保数字证书完整性。
目前，数字证书中最为常用的 **非对称加密算法** 是 **`RSA`算法**，与之配套使用的 **签名算法** 是 **`SHA1withRSA`算法**，
而最为常用的 **消息摘要算法** 是 **`SHA1`算法（指纹算法）**。

除了使用`RSA`算法外，我们还可以使用 **`DSA`算法**。只是使用`DSA`算法 **无法完成加密/解密实现**，
即这样的数字证书不包括数据加密/解密功能。 

数字证书有多种文件编码格式，主要包含 **`CER`编码、`DER`编码** 等：
+ **`CER`**（`Canonical Encoding Rules`，**规范编码格式**）是数字证书的一种编码格式，
它是 **`BER`**（`Basic Encoding Rules`，**基本编码格式**）的一个变种，比`BER`规定得更严格。
+ **`DER`**（`Distinguished Encoding Rules`，**卓越编码格式**）同样是`BER`的一个变种，
与`CER`的不同之处在于：**`DER`使用定长模式，而`CER`使用变长模式**。

所有证书都符合公钥基础设施（`PKI`）制定的 **`ITU-T X509`国际标准（`X509`标准）**，目前共包含 **三个版本**。
**`PKCS`**（`Public-key Cryptogrrraphy Standards`，**公钥加密标准**）由`RSA`实验室和其他安全系统开发商
为促进公钥密码的发展而制定的一系列标准。`PKCS`至今共发布过15个标准，常用标准主要包括 **`PKCS＃7`**、**`PKCS#10`**、
和 **`PKCS#12`**。PKCS常用标准如下表：

| 公钥加密标准 | 描述信息 | 文件名后缀 |
|:--------|:--------|:--------------|
| **PKCS#7** | **密码消息语法标准** | **.p7b、.p7c、.spc** |
| **PKCS#10** | **证书请求语法标准** | **.p10、.csr** |
| **PKCS#12** | **个人信息交换语法标准** | **.p12、.pfx** |

以上标准主要用于证书的申请和更新等操作，例如，`PKCS#10`文件用于证书签发申请，**`PKCS#12`文件可作为Java中的密钥库
或信任库直接使用**。

**通常使用`Base64`编码格式作为数字证书文件存储格式**。
```
x509，公钥证书，只有公钥。
p7，签名或加密。可以往里面塞x509，同时没有签名或加密内容。
p12，含有私钥，同时可以有公钥，有口令保护。

p7的作用就是电子信封。

X509是基本规范
P7和P12是两个实现规范，P7是数字信封，P12是带有私钥的证书规范。

x509是数字证书的规范，P7和P12是两种封装形式。比如说同样的电影，有的是avi格式，有的是mpg，大概就这个意思。
P7一般是把证书分成两个文件，一个公钥一个私钥，有PEM和DER两种编码方式。PEM比较多见，就是纯文本的。
P7一般是分发公钥用，看到的就是一串可见字符串，扩展名经常是.crt,.cer,.key等。DER是二进制编码。
P12是把证书压成一个文件，.pfx 。主要是考虑分发证书，私钥是要绝对保密的，不能随便以文本方式散播。
所以P7格式不适合分发。.pfx中可以加密码保护，所以相对安全些。

在实践中，用户证书都是放在USB Key中分发，服务器证书经常还是以文件方式分发。服务器证书和用户证书，都是X509证书，
就是里面的属性有区别。

X509 是证书规范
PKCS#7 是消息语法（常用于数字签名与加密）
PKCS#12 个人消息交换与打包语法（如.PFX .P12）打包成带公钥与私钥
还有其它常用的是PKCS#10 是证书请求语法。
```
在获得数字证书后，可以将其保存在电脑里，也可以保存在`IC`卡或`USB Key`中。

我们在使用银行借记卡或信用卡进行网上交易时，为增强网络数据传输安全性使用银行提供的“U盾”或其他设备。这种设备中实际
上存储了银行提供的数字证书，并可通过设备上固化的程序对数字证书做定期升级。









