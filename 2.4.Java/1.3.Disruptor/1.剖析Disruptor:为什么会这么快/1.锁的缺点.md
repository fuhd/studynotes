锁的缺点
================================================================================
**Disruptor究竟是什么？**，目前我正准备回答这个问题，但首先回答＂**为什么它会这么快?**＂这些问
题持续出现，但是我不能没有说它是干什么的就说它为什么会这么快，不能没有说它为什么这样做就说它是什么
东西。所以我陷入了一个僵局，一个如何写博客的僵局。要打破这个僵局，我准备以最简单方式回答第一个问题，
如果幸运的话，在以后博文里，如果需要解释的话我会重新提回：**Disruptor提供了一种线程之间信息交换
的方式**。作为一个开发者,因为 **线程** 一词的出现，我的警钟已经敲响，它意味着 **并发**，而并发是
困难的。

## 并发

![并发](img/1.png)

**想象有两个线程尝试修改同一个变量value**：
+ 情况一：线程1先到达
  1. 变量value的值变为”blah”。
  2. 然后当线程2到达时，变量value的值变为”blahy”。
+ 情况二：线程2先到达
  1. 变量value的值变为”fluffy”。
  2. 然后当线程１到达时，值变为”blah”。
+ 情况三：线程1与线程2交互
  1. 线程2得到值＂fluff＂然后赋给本地变量myValue。
  2. 线程1改变value的值为”blah”。
  3. 然后线程2醒来并把变量value的值改为”fluffy”

**情况三显然是唯一一个是错误的**。其他两种情况主要是看你的意图和想要达到的效果。线程2可能不会关心变
量value的值是什么，主要的意图就是在后面加上字符 ‘y＇而不管它原来的值是什么，**在这种前提下，情况一
和情况二都是正确的**。

但是如果线程2只是想把＂fluff＂改为”fluffy”，**那么情况二和三都不正确**。假定线程2想把值设为”fluffy”,
有几种办法可以解决这个问题：

### 办法一：悲观锁

![悲观锁](img/2.png)









































dd
