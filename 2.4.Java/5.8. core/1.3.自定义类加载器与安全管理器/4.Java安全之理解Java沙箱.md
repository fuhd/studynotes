Java安全之理解Java沙箱
================================================================================
## 1.什么是沙箱
**Java安全模型的核心就是Java沙箱（`sandbox`）**，什么是沙箱？沙箱是一个限制程序运行的环境。限
制程序运行，一方面是为了保护系统资源，同时另一方面也为了保护程序自己。**沙箱主要限制系统资源访问，
那系统资源包括什么？——CPU、内存、文件系统、网络**。不同级别的沙箱对这些资源访问的限制也可以不一
样。

**所有的Java程序运行都可以指定沙箱，可以定制安全策略**。而一个Java程序运行的安全策略，包括了以
下几点基础：
+ **字节码校验器**（bytecode verifier）：确保Java类文件遵循Java语言规范。这样可以帮助Java
程序实现内存保护。但是不是所有的类文件都会经过字节码校验，比如核心类。
+ **类加载器**（class loader）：所有的Java类都是通过类加载器加载的，可以自定义类加载器来设置
加载类的权限。
+ **访问控制器**（access controller）：访问控制器可以控制核心API对操作系统的存取权限，而这个
控制的策略设定，可以由用户指定。
+ **安全管理器**（security manager）：是核心API和操作系统之间的主要接口。实现权限控制，比存
取控制器优先级高。
+ **安全软件包**（security package）：java.security下的类和扩展包下的类，允许用户为自己的
应用增加新的安全特性，包括：
  - 安全提供者
  - 消息摘要
  - 数字签名
  - 加密
  - 鉴别

## 2.沙箱包含哪些要素

### 2.1.权限
权限是指允许代码执行的操作。包含三部分：**权限类型、权限名和允许的操作**。权限类型是实现了权限的
Java类名，是必需的。**权限名一般就是对哪类资源进行操作的资源定位**（比如一个文件名或者通配符、
网络主机等），**一般基于权限类型来设置**，有的比如`java.security.AllPermission`不需要权限名。
允许的操作也和权限类型对应，指定了对目标可以执行的操作行为，比如读、写等。如下面的例子：
```java
permission java.security.AllPermission;                 //权限类型
permission java.lang.RuntimePermission "stopThread";    //权限类型+权限名
permission java.io.FilePermission "/tmp/foo" "read";    //权限类型+权限名+允许的操作
```


































大
