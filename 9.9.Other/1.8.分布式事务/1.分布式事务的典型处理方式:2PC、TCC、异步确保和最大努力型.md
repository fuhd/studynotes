分布式事务的典型处理方式：2PC、TCC、异步确保和最大努力型
==========================================================================================
### 柔性事务和刚性事务
**柔性事务** 满足 **BASE** 理论（**基本可用，最终一致**）；**刚性事务** 满足 **ACID** 理论；

本文主要 **围绕分布式事务当中的柔性事务** 的处理方式进行讨论。

#### 柔性事务：业务活动
![柔性事务：业务活动](img/p1.jpg)

#### 柔性事务：业务活动举例
![柔性事务：业务活动举例](img/p2.jpg)

柔性事务分为：
1. **两阶段型**
2. **补偿型**
3. **异步确保型**
4. **最大努力通知型**

### 两阶段提交（`2PC`）型
两阶段型：就是 **分布式事务两阶段提交**，对应技术上的：**`XA`、`JTA/JTS`**。这是分布式环境下事务处理的 **典型模式**。
![全局事务(DTP模型)](img/p3.jpg)

![两阶段提交](img/p4.jpg)

### 事务补偿型（TCC事务）
**TCC型事务（`Try/Cnfirm/Cancel`）可以归为补偿型**。补偿型的例子，在一个 **长事务（`long-running`）** 中，
一个由两台服务器一起参与的事务，**服务器`A`发起事务，服务`B`参与事务**，B的事务需要人工参与，所以处理时间可能很长。
如果按照`ACID`原则，要保持事务的隔离性、一致性，服务器`A`中发起的事务中使用到的事务资源将会被锁定，不允许其他应用
访问到事务过程中的中间结果，直到整个事务被提交或者回滚。**这就造成事务A中的资源被长时间锁定**，系统的可用性将不可接受。






