ACID原则与CAP原理、BASE理论
====================================================================
### ACID原则
关系型数据库的 **本地事务** 都是支持 **ACID** 原则的：
+ **A**tomicity（**原子性**）：原子性是指事务是一个不可分割的工作单位，事务中的操作要么都成功，要么都失败。
+ **C**onsistency（**一致性**）：事务必须使数据库从一个一致性状态变换到另外一个一致性状态。
+ **I**solation（**隔离性**）：一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发
的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。
+ **D**urabilily（**持久性**）：一个事务一旦被提交，它对数据库中数据的改变就是永久性的，
接下来的其他操作和数据库故障不应该对其有任何影响。

这种支持**ACID**原则的本地事务也称为**刚性事务**。

### CAP原理
**`CAP`** 的概念2000年，`Eric Brewer`教授在`ACM`分布式计算年会上指出了著名的`CAP`理论：分布式系统不可能同时满足
**一致性（`C`：Consistency），可用性（`A`：Availability）和分区容错性（`P`：Tolerance of network Partition）**
这三个需求。
+ **Consistency**：一致性，一个服务是一致的完整操作或完全不操作，也有人将期简称为 **数据一致性**，任何一个读操作总是
能读取到之前完成的写操作结果，也就是在分布式环境中，多点的数据是一致。
+ **Availability**：**可用性**，每一个操作总是能够在确定的时间内返回，也就是系统随时都是可用的。
+ **Tolerance of network Partition**：**分区容忍性**，**节点崩溃** 或者 **网络分片** 都不应该导致一个分布式系统停止服务。
```
注：网络分片是指对网络进行分割或隔离——通常采用一个或多个防火墙，但是在政府或军事网络中，出于安全原因的考虑，
这可能意味着要在物理上隔离不同的网络，使它们无法连接其他网络或互联网
```
#### 定理
任何分布式系统 **只可同时满足二点，没法三者兼顾**。

#### 忠告
架构师不要将精力浪费在如何设计能满足三者的完美分布式系统，**而是应该进行取舍**。

### BASE理论
**Base** = `Basically Available` + `Soft state` + `Eventually consistent`（**基本可用性** + **柔性状态** + **最终一致性**），
由`eBay`架构师`Dan Pritchett`提出。**`Base`是对`CAP`中一致性和可用性权衡的结果**，源于提出者自己在大规模分布式系统上实践的总结。
**核心思想是无法做到强一致性**，但每个应用都可以根据自身的特点，**采用适当方式达到最终一致性**。

**BASE**理论就是：
+ **BA**: Basic Availability（**基本可用性**）
基本可用是指分布式系统在出现不可预知故障的时候，**允许损失部分可用性**——但请注意，**这绝不等价于系统不可用**，以下两个就是“基本可用”的典型例子。
    + **响应时间上的损失**：正常情况下，一个在线搜索引擎需要0.5秒内返回给用户相应的查询结果，但由于出现异常（比如系统部分机房发生断电或断网故障），
查询结果的响应时间增加到了1~2秒。
功能上的损失：正常情况下，在一个电子商务网站上进行购物，消费者几乎能够顺利地完成每一笔订单，但是在一些节日大促购物高峰的时候，由于消费者的购物行为激增，为了保护购物系统的稳定性，部分消费者可能会被引导到一个降级页面。


+ **S**： Soft state（**柔性状态**）
+ **E**： Eventuall consistency（**最终一致性**）

遵循BASE理论的方式称为 **柔性事务**。而柔性事务又分为：
**两阶段型、补偿型、异步确保型、最大努力通知型**。

