安装和部署
================================================================
### 部署拓扑结构
示例，以3个Sentinel节点、1个Redis主节点、2个Redis从节点组成一个Redis Sentinel进行说明。

| 角色 | IP | Port | 别名（为了后文中方便）|
| :---| :----|:-----|:------------------|
| master | 127.0.0.1 | 6379 | 主节点或者6379节点 |
| slave-1 | 127.0.0.1 | 6380 | slave-1节点或者6380节点 |
| slave-2 | 127.0.0.1 | 6381 | slave-2节点或者6381节点 |
| sentinel-1 | 127.0.0.1 | 26379 | sentinel-1节点或者26379节点 |
| sentinel-2 | 127.0.0.1 | 26380 | sentinel-2节点或者26380节点 |
| sentinel-3 | 127.0.0.1 | 26381 | sentinel-3节点或者26381节点 |

### 部署Redis数据节点
目前，Redis Sentinel中Redis数据节点没有做任何特殊配置。

#### 启动主节点
配置：redis-7379.conf
```
port 6379
daemonize yes
logfile "6379.log"
dbfilename "dump-6379.rdb"
dir "/opt/soft/redis/data/"
......
```
启动主节点：
```shell
$ redis-server redis-6379.conf
```

#### 启动两个从节点
配置：两个从节点配置是完全一样的，只是与主节点配置有点区别（添加了`slaveof`配置）,见redis-6380.conf
```
port 6380
daemonize yes
logfile "6380.log"
dbfilename "dump-6380.rdb"
dir "/opt/soft/redis/data/"
slaveof 127.0.0.1 6379
```
这里只显式配置一下6380节点。

启动两个从节点：
```shell
redis-server redis-6380.conf
redis-server redis-6381.conf
```
验证：
```shell
$ redis-cli -h 127.0.0.1 -p 6380 ping
PONG
$ redis-cli -h 127.0.0.1 -p 6381 ping
PONG
```

#### 确认主从关系
主节点的视角，它有两个从节点：
```shell
$ redis-cli -h 127.0.0.1 -p 6379 info replication 
# Replication
role:master
connected_slaves:2
slave0:ip=127.0.0.1,port=6380,state=online,offset=281,lag=1
slave1:ip=127.0.0.1,port=6381,state=online,offset=281,lag=0
.......................
```
从节点的视角，它的主节点是127.0.0.1:6379:
```shell
$ redis-cli -h 127.0.0.1 -p 6380 info replication
# Replication
role:slave
master_host:127.0.0.1
master_port:6379
master_link_status:up
.......................
```

### 部署Sentinel节点
3个Sentinel节点的部署方法是完全一致的（**端口不同**）：



