配置子项目
=========================
本节中，你将了解到在多项目构建中如何定义特定的和公共的行为来避免重复配置。

### 理解Project API表示
前面我们了解过Project API的属性和方法，你可能会在日常业务中使用到它们。为了实现多项目构建，你还需要
了解一些新的方法。
```groovy
//project API的部分属性和方法

//特定的项目配置
project(path:String)
project(path:String,config:Closure)
//公共的项目配置
allprojects(action:Action<? super Project>)
allprojects(action:config:Closure)
subprojects(action:Action<? super Project>)
subprojects(action:config:Closure)
//项目解析顺序
evaluationDependsOn(path:String)
evaluationDependsOnChildren()
```
为了声明特定的项目构建代码，使用了`project`方法。至少必须提供项目路径（例如，`:model`）。

很多时候，你想要为所有的项目或只有子项目定义一些公共的行为。为实现这些用例，Project API提供了两个专门的
方法：`allprojects`和`subprojects`。假设你想要把Java插件应用到所有子项目中，你可以通过在subprojects
闭包参数中定义代码来实现。

在多项目构建中项目的默认执行顺序是基于它们的字母名称的。为了显式地控制在构建生命周期的配置阶段的执行顺序，
你可以使用方法：`evaluationDependsOn`和`evaluationDependsOnChildren`。对于需要确保为一个项目设置
的属性可以被其他项目使用的情况尤其如此。

### 定义特定的行为
可以通过project方法来定义特定的项目行为。示例，为了给三个子项目————model，repository，web搭建构建基础
环境，你需要为它们分别创建一个项目配置块，见下面的`build.gradle`文件：
```gradle
//声明额外属性projectIds，通过map的形式存储group和version键值对；这些属性可以在子项目中使用
ext.projectIds = ['group':'com.manning.gia','version':'0.1']
group = projectIds.group
version = projectIds.version
//通过project方法配置每一个子项目，实际的配置在闭包中
project(':model'){
  group = projectIds.group
  version = projectIds.version
  apply plugin: 'java'
}
project(':repository'){
  group = projectIds.group
  version = projectIds.version
  apply plugin: 'java'
}
project(':web'){
  group = projectIds.group
  version = projectIds.version
  apply plugin: 'java'
  apply plugin: 'war'
  apply plugin: 'jetty'
  repositories{
    mavenCentral()
  }
  dependencies{
    providedCompile 'javax.servlet:servlet-api:2.5'
    runtime 'javax.servlet:jstl:1.1.2'
  }
}
```
你会发现解决方案并不完美。即使定义了一个额外属性，将group和version属性值指定给每一个子项目，也还是有
一些重复代码。
> #### 属性继承
> 在一个项目中定义的属性会自动被其子项目继承，这个概念也适用于其他构建工具如Maven。额外属性projectIds
> 是在根项目中声明的，它对于model，repository和web子项目都是可用的。

在多项目构建中，你可以从根目录为某个子项目执行task。你只需要确定连接项目路径和task名称即可。记住，路径
是用冒号（`:`）表示的。示例：
```powershell
$ gradle :model:build
```
