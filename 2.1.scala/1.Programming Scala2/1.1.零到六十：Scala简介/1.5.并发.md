并发
====================================================================
**`Scala`有许多诱人之处，能够使用`Akka API`通过直观的`actor`模式构建健壮的并发应用便是其中之一**。

将`Scala`与一套直观的并发`API`相结合，便能以如此简洁优雅的方式实现并发软件。你之前研究`Scala`的一个原因
可能是寻求更好的并发之道，**以便更好地利用多核`CPU`和集群中的服务器来实现并发。使用`actor`并发模型便是其中的一种方法**。

**在`actor`并发模型中，`actor`是独立的软件实体，它们之间并不共享任何可变状态信息。`actor`之间无须共享信息，
通过交换消息的方式便可进行通信。通过消除同步访问那些共享可变状态，编写健壮的并发应用程序变得非常简单。尽管这些`actor`
也许需要修改状态，但是假如这些可变状态对外不可访问，并且`actor`框架确保`actor`相关代码调用是线程安全的，
开发者就无須再费力编写枯燥而又容易出错的同步原语了**。

在这个简单示例中， 我们会将表示几何图形的一组类的实例发送给一个`actor`，该`actor`再将这组实例绘制到显示器上。
你可以想象这样一个场景：渲染工厂（`rendering farm`）在为动画生成场景。一旦场景渲染完毕，构成场景的几何图形便会
被发送给某一`actor`进行展示。

首先，我们将定义`Shape`类：
```scala
//src/main/scala/progscala2/introscala/shapes/Shapes.scala
package progscala2.introscala.shapes

case class Point(x: Double = 0.0, y: Double = 0.0)                                      //1

abstract class Shape() {                                                                //2
    /*
    * draw方法接受一个函数参数。每个图形对象都会将自己的字符格式传给函数f,
    * 由函数f执行绘制工作。
    */
    def draw(f: String => Unit): Unit = f(s"draw: ${this.toString}")                    //3
}

case class Circle(center: Point, radius: Double) extends Shape                          //4
case class Rectangle(lowerLeft: Point, height: Double, width: Double) extends Shape     //5
case class Triangle(point1: Point, point2: Point, point3: Point) extends Shape          //6
```
+ 注1：此处声明了一个表示二维点的类。
+ 注2：此处声明了一个表示几何形状的抽象类。
+ 注3：此处实现了一个“绘制”形状的`draw`方法，该方法中仅输出了一个格式化的字符串。
+ 注4：`Circle`类由圆心和半径组成。
+ 注5：位于左下角的点、高度和宽度这三个属性构成了矩形。为了简化问题，我们规定矩形的各条边分别与横坐标或纵坐标平行。
+ 注6：三角形由三个点所构成。

`Point`类名后列出的参数列表就是 **类构造函数参数列表**。**在`Scala`中，整个类主体便是这个类的构造函数，因此你能在类名之后、
类主体之前列出主构造函数的参数**。在本示例中，`Point`类并没有类主体。**由于我们在`Point`类声明的前面输入了`case`关键字，
因此每一个构造函数参数都自动转化为`Point`实例的某一只读（不可变）字段**。也就是说，假如要实例化一个名为`Point`的`point`
实例，你可以使用`point.x`和`point.y`读取`point`的字段，但无法修改它们的值。

你也 **可以设置参数默认值**。每个参数定义后出现`=0.0`会把`0.0`设置为该参数的默认值。**因此用户无须明确给出参数值，
`Scala`便会推导出参数值。不过这些参数值会按照从左到右的顺序进行推导**。下面我们运用`SBT`项目去进一步探索参数默认值：
```shell
$ sbt console
[info] Loading project definition from /home/fuhd/work/github/prog-scala-2nd-ed-code-examples/project
[info] Set current project to Programming Scala, Second Edition - Code examples (in build file:/home/fuhd/work/github/prog-scala-2nd-ed-code-examples/)
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.11.7 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_144).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import progscala2.introscala.shapes._
import progscala2.introscala.shapes._

scala> val p00 = new Point
p00: progscala2.introscala.shapes.Point = Point(0.0,0.0)

scala> val p20 = new Point(2.0)
p20: progscala2.introscala.shapes.Point = Point(2.0,0.0)

scala> val p20b = new Point(2.0)
p20b: progscala2.introscala.shapes.Point = Point(2.0,0.0)

scala> val p02 = new Point(y = 2.0)
p02: progscala2.introscala.shapes.Point = Point(0.0,2.0)

scala> p00 == p20
res0: Boolean = false

scala> p20 == p20b
res1: Boolean = true
```

