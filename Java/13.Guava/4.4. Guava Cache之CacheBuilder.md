Guava Cache之CacheBuilder
========================================================
CacheBuilder类通过 **建造者(Builder)模式** 为我们提供了一种获取 **Cache** 和 **LoadingCache** 实例的方式。
CacheBuilder提供了许多选项，我们可以选择部分来创建Cache实例，不需要列出所有的选项，这是Builder模式的魅力。

这个例子演示的是在缓存条目加载到缓存中后，我们如何指定条目失效：
```java
package com.fhd.java;

import com.google.common.base.Ticker;
import com.google.common.cache.CacheBuilder;
import com.google.common.cache.CacheLoader;
import com.google.common.cache.LoadingCache;

import java.util.concurrent.TimeUnit;

public class CacheBuilderTest {
    public static void main(String[] args) {

        LoadingCache<String, TradeAccount> tradeAccountCache = CacheBuilder.newBuilder()
                .expireAfterWrite(5L, TimeUnit.MINUTES)
                .maximumSize(5000L)
                .removalListener(new TradeAccountRemovalListener())
                .ticker(Ticker.systemTicker())
                .build(new CacheLoader<String, TradeAccount>() {
                    @Override
                    public TradeAccount load(String key) throws Exception {
                        return tradeAccountService.getTradeAccountById(key);
                    }
                });
    }
}

class TradeAccount {

    private String id;      //ID
    private String owner;   //所有者
    private double balance; //余额

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getOwner() {
        return owner;
    }

    public void setOwner(String owner) {
        this.owner = owner;
    }

    public double getBalance() {
        return balance;
    }

    public void setBalance(double balance) {
        this.balance = balance;
    }
}
```
我们来简要的对第一个例子做一些说明：
首先，我们调用了 **expireAfterWrite方法**，它可以 **自动的使缓存条目在指定的时间后失效**，在本例中，是5分钟。
第二步，我们通过 **maximumSize方法**，5000作为传入值，指定了 **缓存的最大大小**，当缓存的大小 **逼近到最大值时**，
缓存中一些 **最近很少使用** 到的条目将会被移除，不一定在缓存大小达到最大值甚至超过最大值才移除。
我们注册了一个 **RemovalListener监听器** 实例，它可以在缓存中的条目 **被移除后接收通知**。我们添加了一个 **Ticker实例**，
通过调用ticker方法，此方法提供了 **缓存条目过期的时间，纳秒级的精密度**。
最后，我们调用了 **build方法**，传入了一个新的 **CacheLoader**实例，**当缓存中的key存在，value不存在时**，
这个实例将被用来重新获取TradeAccount对象。





