连接到Redis
========================================================
spring-data-redis提供了一套与实现无关的连接器api(最主要的实现还是`Jedis`)，
`org.springframework.data.redis.connection`包以及`RedisConnection`、`RedisConnectionFactory`接口等。
如果遇到特别情况，获取本地库（实现的api，比如`Jedis`）也是方便的。`RedisConnection`提供专用方法`getNativeConnection()`
来返回原始的基础对象用于通信。

### RedisConnection and RedisConnectionFactory
`RedisConnection`是通过`RedisConnectionFactory`创建的。另外，这个工厂起着`PersistenceExceptionTranslator`的作用，
一旦定义，它允许透明的异常转换。

根据配置，工厂可以返回一个新的连接或现有的连接（在连接池或本地共享连接被使用的情况下）。

### 配置Jedis连接器
示例：
```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="jedisConnectionFactory" class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory"
        p:host-name="server" p:port="6379" />
</beans>
```

### Redis Sentinel Support(Redis官方提供的集群管理工具)
`Redis Sentinel`通过`RedisSentinelConfiguration`来支持`Redis`的HA方案。
```java
/**jedis*/
@Bean
public RedisConnectionFactory jedisConnectionFactory() {
    RedisSentinelConfiguration sentinelConfig = new RedisSentinelConfiguration()
        .master("mymaster")
        .sentinel("127.0.0.1", 26379)
        .sentinel("127.0.0.1", 26380);
    return new JedisConnectionFactory(sentinelConfig);
}
```
`RedisSentinelConfiguration`可以通过`PropertySource`定义：
```
spring.redis.sentinel.master: master节点名称
spring.redis.sentinel.nodes: 通过逗号分隔的`host:port`列表
```
