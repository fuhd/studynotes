Redis数据结构简介
====================================================
Redis可以存储 **键** 与 **5种不同数据结构类型** 之间的映射，这5种数据结构类型分别为 **`STRING`（字符串）**，
**`LIST`（列表）**，**`SET（集合）`**，**`HASH（散列）`** 和 **`ZSET（有序集合）`**。

Redis提供的5种结构：

| 结构类型 | 结构存储的值 | 结构的读写能力 |
| :------ | :--------- | :---------- |
| STRING|可以是字符串，整数或者浮点数|对整个字符串或者字符串的其中一部分执行操作；对整数和浮点数执行自增或者自减操作|
| LIST|一个链表，链表上的每个节点都包含了一个字符串|从链表的两端推入或者弹出元素；根据偏移量对链表进行修剪；读取单个或者多个元素；根据值查找或者移除元素|
| SET|包含字符串的无序收集器，并且被包含的每个字符串都是独一无二，各不相同的|添加，获取，移除单个元素；检查一个元素是否存在于集合中；计算交集，并集，差集；从集合里面随机获取元素|
| HASH|包含键值对的无序散列表|添加，获取，移除单个键值对；获取所有键值对|
| ZSET（有序集合）|字符串成员与浮点数分值之间的有序映射，元素的排列顺序由分值的大小决定|添加，获取，删除单个元素；根据分值范围或者成员来获取元素|

注意：Redis in action的Java示例代码可以在 [这里](https://github.com/josiahcarlson/redis-in-action/tree/master/java/src/main/java);

### Redis中的字符串
字符串拥有一些和其他键值存储相似的命令，比如：`GET`（获取值），`SET`（设置值）和`DEL`（删除值）。
可以尝试使用 **redis-cli** 执行 `SET`，`GET`，`DEL`。

使用`redis-cli`的示例：
```powershell
$ redis-cli
127.0.0.1:6379> set hello world
OK
127.0.0.1:6379> get hello
"world"
127.0.0.1:6379> del hello
(integer) 1
127.0.0.1:6379> get hello
(nil)
127.0.0.1:6379>
```
除了能够`GET`，`SET`和`DEL`字符串值之外，Redis还提供了一些可以对字符串的其中一部分内容进行读取和写入的命令。

### Redis中的列表
Redis对 **链表结构** 的支持使得它在键值存储的世界中独树一帜。一个列表结构可以有序地存储多个字符串。
Redis列表可执行的操作和很多编程语言里面的列表操作非常相似：`LPUSH`命令和`RPUSH`命令分别用于将元素
推入列表的左端（left end）和右端（right end）；`LPOP`命令和`RPOP`命令分别用于从列表的左端和右端
弹出元素；`LINDEX`命令用于获取列表在给定位置上的一个元素；`LRANGE`命令用于获取列表在给定范围上的所有元素。

使用`redis-cli`的示例：
```powershell
127.0.0.1:6379> RPUSH list-key1 item
(integer) 1
127.0.0.1:6379> RPUSH list-key1 item2
(integer) 2
127.0.0.1:6379> RPUSH list-key1 item3
(integer) 3
127.0.0.1:6379> LRANGE list-key1 0 -1
1) "item"
2) "item2"
3) "item3"
127.0.0.1:6379> LINDEX list-key1 1
"item2"
127.0.0.1:6379> LPOP list-key1
"item"
127.0.0.1:6379> LPOP list-key1
"item2"
127.0.0.1:6379> LRANGE list-key1 0 -1
1) "item3"
127.0.0.1:6379>
```
除了上面提到的命令之外，Redis列表还拥有从列表里面移除元素的命令，将元素插入列表中间的命令，
将列表修剪至指定长度的命令，以及其他一些命令。后面再讲述！

### Redis的集合
Redis的集合和列表都可以存储多个字符串，它们之间的不同在于，**列表可以存储多个相同的字符串，而集合则
通过使用散列表来保证自己存储的每个字符串都是各不相同的**。

因为Redis的集合使用 **无序方式** 存储元素，所以用户不能像使用列表那样，将元素推入集合的某一端，或者从集合的
某一端弹出元素。不过用户可以使用`SADD`命令将元素添加到集合，或者使用`SREM`命令从集合里面移除元素。
另外还可以通过`SISMEMBER`命令快速地检查一个元素是否已经存在于集合中，或者使用`SMEMBERS`命令获取
集合包含的所有元素（如果集合包含的元素非常多，那么`SMEMBERS`命令的执行速度可能会很慢，所以请谨慎地使用这个命令）。

使用`redis-cli`的示例：
```powershell
127.0.0.1:6379> SADD set-key1 item
(integer) 1
127.0.0.1:6379> SADD set-key1 item2
(integer) 1
127.0.0.1:6379> SADD set-key1 item3
(integer) 1
127.0.0.1:6379> SADD set-key1 item
(integer) 0
127.0.0.1:6379> SMEMBERS set-key1
1) "item2"
2) "item3"
3) "item"
127.0.0.1:6379> SISMEMBER set-key1 item
(integer) 1
127.0.0.1:6379> SISMEMBER set-key1 item4
(integer) 0
127.0.0.1:6379> SREM set-key1 item
(integer) 1
127.0.0.1:6379> SMEMBERS set-key1
1) "item2"
2) "item3"
127.0.0.1:6379>
```
跟字符串和列表一样，集合除了基本的添加操作和移除操作之外，还支持很多其他操作，比如`SINTER`，`SUNION`，
`SDIFF`这3个命令就可以分别执行常见的交集计算，并集计算和差集计算。后面再详细介绍！！

### Redis的散列
Redis的散列可以存储多个键值对之间的映射。和字符串一样，散列存储的值既可以是字符串又可以是数字值，
并且用户同样可以对散列存储的数字值执行自增操作或者自减操作。

`HSET`命令，在散列里面关联起给定的键值对；`HGET`命令，获取指定散列键的值；`HGETALL`命令，
获取散列包含的所有键值对，`HDEL`命令，如果给定键存在于散列需面，那么移除这个键！！
```powershell
127.0.0.1:6379> HSET hask-key1 sub-key1 value1
(integer) 1
127.0.0.1:6379> HSET hask-key1 sub-key2 value2
(integer) 1
127.0.0.1:6379> HSET hask-key1 sub-key3 value3
(integer) 1
127.0.0.1:6379> HGETALL hask-key1
1) "sub-key1"
2) "value1"
3) "sub-key2"
4) "value2"
5) "sub-key3"
6) "value3"
127.0.0.1:6379> HDEL hask-key1 sub-key2
(integer) 1
127.0.0.1:6379> HDEL hask-key1 sub-key1
(integer) 1
127.0.0.1:6379> HGETALL hask-key1
1) "sub-key3"
2) "value3"
127.0.0.1:6379>
```

### Redis的有序集合
有序集合和散列一样，都用于存储键值对：有序集合的 **键** 被称为 **成员（member）**，每个成员都是各不相同的；
而有序集合的 **值** 则被称为 **分值（score）**，分值必须为 **浮点数**。有序集合是Redis里面唯一一个既可以根据成员
访问元素（这一点和散列一样），又可以根据分值以及分值的排列顺序来访问元素的结构。

`ZADD`命令，将一个带有给定分值的成员添加到有序集合里面；`ZRANGE`命令，根据元素在有序排列中所处的位置，
从有序集合里面获取多个元素；`ZRANGEBYSCORE`命令，获取有序集合在给定分值范围内的所有元素；`ZREM`命令，
如果给定成员存在于有序集合，那么移除这个成员；

```powershell
127.0.0.1:6379> ZADD zset-key1 728 member1
(integer) 1
127.0.0.1:6379> ZADD zset-key1 982 member0
(integer) 1
127.0.0.1:6379> ZADD zset-key1 982 member0
(integer) 0
127.0.0.1:6379> ZRANGE zset-key1 0 -1 withscores
1) "member1"
2) "728"
3) "member0"
4) "982"
127.0.0.1:6379> ZRANGEBYSCORE zset-key1 0 800 withscores
1) "member1"
2) "728"
127.0.0.1:6379> ZREM zset-key1 member1
(integer) 1
127.0.0.1:6379> ZREM zset-key1 member1
(integer) 0
127.0.0.1:6379> ZRANGE zset-key1 0 -1 withscores
1) "member0"
2) "982"
127.0.0.1:6379>
```
