Simulation API
================================================================================
模拟API如下示例：
```scala
abstract class Simulation {
  type Action = () => Unit
  case class WorkItem(time: Int, action: Action)
  private var curtime = 0
  def currentTime: Int = curtime
  private var agenda: List[WorkItem] = List()
  private def insert(ag: List[WorkItem], item: WorkItem): List[WorkItem] = {
    if(ag.isEmpty || item.time < ag.head.time) item :: ag
    else ag.head :: insert(ag.tail, item)
  }
  def afterDelay(delay: Int)(block: => Unit) = {
    val item = WorkItem(currentTime + delay, () => block)
    agenda = insert(agenda, item)
  }
  private def next() = {
    (agenda: @unchecked) match {
      case item :: rest =>
        agenda = rest
        curtime = item.time
        item.action()
    }
  }
  def run() = {
    afterDelay(0) {
      println("*** simulation started, time = " + currentTime + " ***")
    }
    while (!agenda.isEmpty) next()
  }
}
```
它包含了`org.stairwaybook.simlulation`包的`Simulation`类。具体的模拟类库继承自这个类，并
补充扩展领域特定的功能。

离散事件模拟在指定的时间（`time`）执行用户定义的动作（`action`）。所有有具体模拟子类定义的动作
都是如下类型的：
```scala
type Action = () => Unit
```
**这条语句将Action定义为接收空参数列表并返回Unit的过程类型的别名**。Action是Simulation类的
**类型成员**（`type member`）。可以将它想象成`() => Unit`这个类型更可读的名字。类于类型成员
的更详细内容请参考`20.6`节。

动作被执行的时间是模拟时间，跟实际的“挂钟”（`wall clock`）时间无关。模拟时间简单地以整数表示，
当前的模拟时间保存在私有变量里：
```scala
private var curtime: Int = 0
```
这个变量有一个公有的访问方法，用于获取当前时间：
```scala
def currentTime: Int = curtime
```
