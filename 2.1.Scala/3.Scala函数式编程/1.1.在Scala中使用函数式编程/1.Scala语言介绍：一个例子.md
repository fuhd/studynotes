Scala语言介绍：一个例子
================================================================================
下面是一个我们要讨论的完整的Scala程序。
```scala
//声明一个单例对象，即同时声明一个类和它的唯一实例
object MyModule {
    def abs(n: Int): Int = if (n < 0) -n else n
    //一个私有方法只能被MyModule里的其他成员调用
    private def formatAbs(x: Int) = {
        //字符串里有2个个点位符，%d代表数字
        val msg = "The absolute value of %d is %d"
        //在字符串里将2个%d占位符分别替换为x和abs(x)
        msg.format(x, abs(x))
    }
    //Unit类似于Java或C语言里的void
    def main(args: Array[String]): Unit = {
        println(formatAbs(-42))
    }
}
```
我们声明了一个名为MyModule的 **单例对象**。只是简单地封装一段代码，**随后可以通过名字来引用**。
Scala代码必须放在一个单例对象或一个类中，出于简单，这里使用一个单例对象，把代码放在花括号之间。
```
object关键字

object关键字创建一个新的单例类型， 就像一个class只有一个被命名的实例。如果你熟悉Java，在Scala中声明一个object有些像
创建了一个匿名类的实例。Scala没有等同于Java中static关键字的概念，object在Scala中经常用到就像你在Java中用一个带有静
态成员的class一样。
```
MyModule对象有3个方法，它们使用def关键字声明：`abs`、`formatAbs`和`main`。**我们使用术语
“方法”来指代一些在单例对象或类的内部通过def关键字声明的函数或成员**，现在我们来看一下MyModule
里的方法。

`abs`方法是一个接收整型类型参数并返回其绝对值的 **纯函数**：
```scala
def abs(n: Int): Int = if (n < 0) -n else n
```
**在def关键字之后紧跟着方法名，然后是小括号，里面是方法参数**。在这个例子中，`abs`方法只有一个
Int类型的单个参数。在参数列表闭括号之后是一个可选的类型（`:Int`），它表示返回值是Int类型。

在等号（`=`）之后的部分是 **方法体**。有时我们 **对等号前边的声明部分称为“左手边的”或“签名”,等
号后边的部分称为“右手边的”或“定义”**。注意，如果没有显式地使用return关键字，一个方法的返回值就
是右手边的求值结果。所有的表达式，包括if表达式都产生一个结果。这里代码中“右手边的”只是简单地返回
`-n`或者`n`（取决于是否`n < 0`）的表达式。

`formatAbs`方法是另一个 **纯函数**：
```scala
private def formatAbs(x: Int) = {
    val msg = "The absolute value of %d is %d."
    msg.format(x, abs(x))
}
```
这个方法定义为`private`，意味着无法在MyModule对象之外调用。它接收一个Int类型，返回一个String。
**注意返回值类型没有声明，因为Scala有能力推断一个方法的返回值类型**，所以我们省略了，但是通常考
虑到与他们协作和保持良好的代码风格，最好还是显式地声明返回值类型。

方法体中包含了多条声明，所以把它们放在花括号中。一对花括号所包含的声明也称为“代码块”。声明由分号
或换行符分割。这个例子中，每个声明都在单独一行里，所以可以不用分号。

代码块的第一行声明使用val关键字定义了一个字符串，命名为msg。只是简单地给一个名字以便引用。**val
表示不可变变量**，所以formatAbs方法体中msg会一直引用同一个字符串值。如果你在方法体中将msg重新
赋值了一个值，编译器将会报错。

记住，**一个方法只是简单地返回它右手边的值。所以不必需要return关键字**。这个例子中右手边是一个
代码块。**在Scala中，一段包含在大括号里的多行声明代码块的值等于它最后一个表达式的返回值**。因此，
`formatAbs`方法的值就是`msg.format(x, abs(x))`的返回值。

最后，`main`方法是一个调用纯函数内核的外壳，并打印结果到终端。以`main`命名的方法是一个特殊方法。
当程序运行时Scala会查找以`main`命名的特定签名的方法。它接收一个字符串数组作为参数，返回值类型是
Unit。

参数数组包含了从命令行传递过来的参数，我们在这里并没有使用。

Unit与C或Java编程语言中的void有相似的目的。在Scala中只要没有引起程序崩溃或挂住，每个方法都会返
回值。**但`main`方法的返回值没有任何意义。它只是一个特殊的类型Unit，该类型只有唯一的值，文法上
写为`()`，一对小括号，发音为`unit`。通常返回Unit类型的方法暗示它包含副作用**。

`main`方法体把调用`formatAbs`返回的结果字符串打印到终端，注意`println`方法的返回值是`Unit`，
也正是`main`方法需要返回值的类型。

