dd:磁盘操作
======================================

**作用：** `dd`可以从标准输入或文件中读取数据，按照指定的用法来转换数据，再输出到文件，设备或标准输出上。

**用法：**
+ `dd [操作符] ...`
+ `dd [选项]`

主要选项如下：
+ `bs=<字节数>`：设置输入/输出的字节数。
+ `cbs=<字节数>`：设置转换的字节数。
+ `conv=<关键字>`：转换方式。
+ `ibs=<字节数>`：设置每次读取的字节数。
+ `if=<文件>`：指定文件作为读取的对象。
+ `obs=<字节数>`：设置每次输出的字节数。
+ `of=<文件>`：结果输出到指定的文件中。

### 应用示例
#### 软盘互相复制
要把一张软盘的内容复制到另一张软盘上，利用`/tmp`作为临时存储区。把源盘插入驱动器中，输入下列命令：
```powershell
dd if=/dev/fd0 of=/tmp/tmpfile
```
复制完成后，将源盘从驱动器中取出，把目标盘插入，输入命令：
```powershell
dd if=/tmp/tmpfile of=/dev/fd0
```
复制完成后，应该将临时文件删除：
```powershell
rm /tmp/tmpfile
```
#### 把net.i文件写入软盘中，并设置读／写缓冲区的数目
**注意**：软盘中的内容会被完全覆盖掉。
```powershell
dd if=net.i of=/dev/fd0 bs=4M
```
#### 将文件sfile复制到文件dfile中
```powershell
dd if=sfile of=dfile
```
#### 整盘数据备份与恢复
##### 整盘数据备份
将本地的/dev/hdx整盘备份到/dev/hdy：
```powershell
dd if=/dev/hdx of=dev/hdy
```
将/dev/hdx全盘数据备份到指定路径的image文件：
```powershell
dd if=/dev/hdx of=/path/to/image
```
备份/dev/hdx全盘数据，并利用gzip工具进行压缩，保存到指定路径：
```powershell
dd if=/dev/hdx | gzip /path/to/image.gz
```
##### 整盘数据恢复
将备份文件恢复到指定盘：
```powershell
dd if=/path/to/image of=/dev/hdx
```
将压缩的备份文件恢复到指定盘：
```powershell
gzip -dc /path/to/image.gz | dd of=/dev/hdx
```
#### 将内存数据复制到硬盘
将内存里的数据复制到root目录下的mem.bin文件中：
```powershell
dd if=/dev/mem of=/root/mem.bin bs=1024
```
要从光盘复制ISO镜像，可将光盘数据复制到root文件夹下，并保存为cd.iso文件：
```powershell
dd if=/dev/cdrom of=/root/cd.iso
```
#### 销毁磁盘数据
利用随机的数据填充硬盘：
```powershell
dd if=/dev/urandom of=/dev/hda1
```
在某些必要的场合可以用来销毁数据。执行此操作后，/dev/hda1将无法挂载，创建和复制操作无法进行。
#### 修复硬盘
当硬盘较长时间（比如一，两年）放置不使用后，磁盘上会产生`magnetic flux point`。当磁头读到这些区域
时会遇到困难，并可能导致I/O错误。当这种情况影响到硬盘的第一个扇区时，可能导致硬盘报废。下面的命令
**有可能** 使这些数据起死回生：
```powershell
dd if=/dev/sda of=/dev/sda
```
